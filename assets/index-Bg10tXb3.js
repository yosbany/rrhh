const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index.es-BAOV3Uu9.js","./vendor-Q6nwWIZj.js"])))=>i.map(i=>d[i]);
import{r as ke,a as A5,N as Lc,O as k5,g as C5,b as Al,L as Cm,R as Rs,u as E5,c as wg,d as I5,H as T5,e as L5,f as Wo}from"./vendor-Q6nwWIZj.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var xg={exports:{}},Tu={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P5=ke,D5=Symbol.for("react.element"),O5=Symbol.for("react.fragment"),M5=Object.prototype.hasOwnProperty,R5=P5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,F5={key:!0,ref:!0,__self:!0,__source:!0};function Ng(n,e,t){var r,i={},s=null,a=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)M5.call(e,r)&&!F5.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:D5,type:n,key:s,ref:a,props:i,_owner:R5.current}}Tu.Fragment=O5;Tu.jsx=Ng;Tu.jsxs=Ng;xg.exports=Tu;var _=xg.exports,Sg,Em=A5;Sg=Em.createRoot,Em.hydrateRoot;let j5={data:""},B5=n=>typeof window=="object"?((n?n.querySelector("#_goober"):window._goober)||Object.assign((n||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:n||j5,U5=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,q5=/\/\*[^]*?\*\/|  +/g,Im=/\n+/g,Xi=(n,e)=>{let t="",r="",i="";for(let s in n){let a=n[s];s[0]=="@"?s[1]=="i"?t=s+" "+a+";":r+=s[1]=="f"?Xi(a,s):s+"{"+Xi(a,s[1]=="k"?"":e)+"}":typeof a=="object"?r+=Xi(a,e?e.replace(/([^,])+/g,o=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,o):o?o+" "+c:c)):s):a!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Xi.p?Xi.p(s,a):s+":"+a+";")}return t+(e&&i?e+"{"+i+"}":i)+r},vi={},Ag=n=>{if(typeof n=="object"){let e="";for(let t in n)e+=t+Ag(n[t]);return e}return n},V5=(n,e,t,r,i)=>{let s=Ag(n),a=vi[s]||(vi[s]=(c=>{let u=0,f=11;for(;u<c.length;)f=101*f+c.charCodeAt(u++)>>>0;return"go"+f})(s));if(!vi[a]){let c=s!==n?n:(u=>{let f,p,v=[{}];for(;f=U5.exec(u.replace(q5,""));)f[4]?v.shift():f[3]?(p=f[3].replace(Im," ").trim(),v.unshift(v[0][p]=v[0][p]||{})):v[0][f[1]]=f[2].replace(Im," ").trim();return v[0]})(n);vi[a]=Xi(i?{["@keyframes "+a]:c}:c,t?"":"."+a)}let o=t&&vi.g?vi.g:null;return t&&(vi.g=vi[a]),((c,u,f,p)=>{p?u.data=u.data.replace(p,c):u.data.indexOf(c)===-1&&(u.data=f?c+u.data:u.data+c)})(vi[a],e,r,o),a},W5=(n,e,t)=>n.reduce((r,i,s)=>{let a=e[s];if(a&&a.call){let o=a(t),c=o&&o.props&&o.props.className||/^go/.test(o)&&o;a=c?"."+c:o&&typeof o=="object"?o.props?"":Xi(o,""):o===!1?"":o}return r+i+(a??"")},"");function Lu(n){let e=this||{},t=n.call?n(e.p):n;return V5(t.unshift?t.raw?W5(t,[].slice.call(arguments,1),e.p):t.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):t,B5(e.target),e.g,e.o,e.k)}let kg,Ad,kd;Lu.bind({g:1});let ki=Lu.bind({k:1});function z5(n,e,t,r){Xi.p=e,kg=n,Ad=t,kd=r}function gs(n,e){let t=this||{};return function(){let r=arguments;function i(s,a){let o=Object.assign({},s),c=o.className||i.className;t.p=Object.assign({theme:Ad&&Ad()},o),t.o=/ *go\d+/.test(c),o.className=Lu.apply(t,r)+(c?" "+c:"");let u=n;return n[0]&&(u=o.as||n,delete o.as),kd&&u[0]&&kd(o),kg(u,o)}return i}}var H5=n=>typeof n=="function",eu=(n,e)=>H5(n)?n(e):n,$5=(()=>{let n=0;return()=>(++n).toString()})(),Cg=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");n=!e||e.matches}return n}})(),G5=20,qc=new Map,Y5=1e3,Tm=n=>{if(qc.has(n))return;let e=setTimeout(()=>{qc.delete(n),Gs({type:4,toastId:n})},Y5);qc.set(n,e)},K5=n=>{let e=qc.get(n);e&&clearTimeout(e)},Cd=(n,e)=>{switch(e.type){case 0:return{...n,toasts:[e.toast,...n.toasts].slice(0,G5)};case 1:return e.toast.id&&K5(e.toast.id),{...n,toasts:n.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:t}=e;return n.toasts.find(s=>s.id===t.id)?Cd(n,{type:1,toast:t}):Cd(n,{type:0,toast:t});case 3:let{toastId:r}=e;return r?Tm(r):n.toasts.forEach(s=>{Tm(s.id)}),{...n,toasts:n.toasts.map(s=>s.id===r||r===void 0?{...s,visible:!1}:s)};case 4:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...n,pausedAt:e.time};case 6:let i=e.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},Vc=[],Wc={toasts:[],pausedAt:void 0},Gs=n=>{Wc=Cd(Wc,n),Vc.forEach(e=>{e(Wc)})},X5={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},J5=(n={})=>{let[e,t]=ke.useState(Wc);ke.useEffect(()=>(Vc.push(t),()=>{let i=Vc.indexOf(t);i>-1&&Vc.splice(i,1)}),[e]);let r=e.toasts.map(i=>{var s,a;return{...n,...n[i.type],...i,duration:i.duration||((s=n[i.type])==null?void 0:s.duration)||(n==null?void 0:n.duration)||X5[i.type],style:{...n.style,...(a=n[i.type])==null?void 0:a.style,...i.style}}});return{...e,toasts:r}},Q5=(n,e="blank",t)=>({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...t,id:(t==null?void 0:t.id)||$5()}),kl=n=>(e,t)=>{let r=Q5(e,n,t);return Gs({type:2,toast:r}),r.id},sr=(n,e)=>kl("blank")(n,e);sr.error=kl("error");sr.success=kl("success");sr.loading=kl("loading");sr.custom=kl("custom");sr.dismiss=n=>{Gs({type:3,toastId:n})};sr.remove=n=>Gs({type:4,toastId:n});sr.promise=(n,e,t)=>{let r=sr.loading(e.loading,{...t,...t==null?void 0:t.loading});return n.then(i=>(sr.success(eu(e.success,i),{id:r,...t,...t==null?void 0:t.success}),i)).catch(i=>{sr.error(eu(e.error,i),{id:r,...t,...t==null?void 0:t.error})}),n};var Z5=(n,e)=>{Gs({type:1,toast:{id:n,height:e}})},ey=()=>{Gs({type:5,time:Date.now()})},ty=n=>{let{toasts:e,pausedAt:t}=J5(n);ke.useEffect(()=>{if(t)return;let s=Date.now(),a=e.map(o=>{if(o.duration===1/0)return;let c=(o.duration||0)+o.pauseDuration-(s-o.createdAt);if(c<0){o.visible&&sr.dismiss(o.id);return}return setTimeout(()=>sr.dismiss(o.id),c)});return()=>{a.forEach(o=>o&&clearTimeout(o))}},[e,t]);let r=ke.useCallback(()=>{t&&Gs({type:6,time:Date.now()})},[t]),i=ke.useCallback((s,a)=>{let{reverseOrder:o=!1,gutter:c=8,defaultPosition:u}=a||{},f=e.filter(g=>(g.position||u)===(s.position||u)&&g.height),p=f.findIndex(g=>g.id===s.id),v=f.filter((g,N)=>N<p&&g.visible).length;return f.filter(g=>g.visible).slice(...o?[v+1]:[0,v]).reduce((g,N)=>g+(N.height||0)+c,0)},[e]);return{toasts:e,handlers:{updateHeight:Z5,startPause:ey,endPause:r,calculateOffset:i}}},ny=ki`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,ry=ki`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,iy=ki`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,sy=gs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ny} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${ry} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${iy} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,ay=ki`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,oy=gs("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${ay} 1s linear infinite;
`,ly=ki`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,cy=ki`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,uy=gs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ly} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${cy} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,hy=gs("div")`
  position: absolute;
`,dy=gs("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,fy=ki`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,py=gs("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${fy} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,my=({toast:n})=>{let{icon:e,type:t,iconTheme:r}=n;return e!==void 0?typeof e=="string"?ke.createElement(py,null,e):e:t==="blank"?null:ke.createElement(dy,null,ke.createElement(oy,{...r}),t!=="loading"&&ke.createElement(hy,null,t==="error"?ke.createElement(sy,{...r}):ke.createElement(uy,{...r})))},gy=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,vy=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,yy="0%{opacity:0;} 100%{opacity:1;}",_y="0%{opacity:1;} 100%{opacity:0;}",by=gs("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,wy=gs("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,xy=(n,e)=>{let t=n.includes("top")?1:-1,[r,i]=Cg()?[yy,_y]:[gy(t),vy(t)];return{animation:e?`${ki(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ki(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Ny=ke.memo(({toast:n,position:e,style:t,children:r})=>{let i=n.height?xy(n.position||e||"top-center",n.visible):{opacity:0},s=ke.createElement(my,{toast:n}),a=ke.createElement(wy,{...n.ariaProps},eu(n.message,n));return ke.createElement(by,{className:n.className,style:{...i,...t,...n.style}},typeof r=="function"?r({icon:s,message:a}):ke.createElement(ke.Fragment,null,s,a))});z5(ke.createElement);var Sy=({id:n,className:e,style:t,onHeightUpdate:r,children:i})=>{let s=ke.useCallback(a=>{if(a){let o=()=>{let c=a.getBoundingClientRect().height;r(n,c)};o(),new MutationObserver(o).observe(a,{subtree:!0,childList:!0,characterData:!0})}},[n,r]);return ke.createElement("div",{ref:s,className:e,style:t},i)},Ay=(n,e)=>{let t=n.includes("top"),r=t?{top:0}:{bottom:0},i=n.includes("center")?{justifyContent:"center"}:n.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Cg()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...r,...i}},ky=Lu`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Pc=16,Cy=({reverseOrder:n,position:e="top-center",toastOptions:t,gutter:r,children:i,containerStyle:s,containerClassName:a})=>{let{toasts:o,handlers:c}=ty(t);return ke.createElement("div",{style:{position:"fixed",zIndex:9999,top:Pc,left:Pc,right:Pc,bottom:Pc,pointerEvents:"none",...s},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},o.map(u=>{let f=u.position||e,p=c.calculateOffset(u,{reverseOrder:n,gutter:r,defaultPosition:e}),v=Ay(f,p);return ke.createElement(Sy,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?ky:"",style:v},u.type==="custom"?eu(u.message,u):i?i(u):ke.createElement(Ny,{toast:u,position:f}))}))},Lt=sr,Lm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ae=function(n,e){if(!n)throw io(e)},io=function(n){return new Error("Firebase Database ("+Eg.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Ey=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],a=n[t++],o=n[t++],c=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},$f={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,o=a?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,f=s>>2,p=(s&3)<<4|o>>4;let v=(o&15)<<2|u>>6,g=u&63;c||(g=64,a||(v=64)),r.push(t[f],t[p],t[v],t[g])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Ig(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Ey(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],o=i<n.length?t[n.charAt(i)]:0;++i;const u=i<n.length?t[n.charAt(i)]:64;++i;const p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||o==null||u==null||p==null)throw new Iy;const v=s<<2|o>>4;if(r.push(v),u!==64){const g=o<<4&240|u>>2;if(r.push(g),p!==64){const N=u<<6&192|p;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Iy extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Tg=function(n){const e=Ig(n);return $f.encodeByteArray(e,!0)},tu=function(n){return Tg(n).replace(/\./g,"")},nu=function(n){try{return $f.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(n){return Lg(void 0,n)}function Lg(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!Ly(t)||(n[t]=Lg(n[t],e[t]));return n}function Ly(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Py(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy=()=>Py().__FIREBASE_DEFAULTS__,Oy=()=>{if(typeof process>"u"||typeof Lm>"u")return;const n=Lm.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},My=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&nu(n[1]);return e&&JSON.parse(e)},Gf=()=>{try{return Dy()||Oy()||My()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Pg=n=>{var e,t;return(t=(e=Gf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Ry=n=>{const e=Pg(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Dg=()=>{var n;return(n=Gf())===null||n===void 0?void 0:n.config},Og=n=>{var e;return(e=Gf())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[tu(JSON.stringify(t)),tu(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Yf(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qn())}function jy(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function By(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Mg(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Uy(){const n=qn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Rg(){return Eg.NODE_ADMIN===!0}function qy(){try{return typeof indexedDB=="object"}catch{return!1}}function Vy(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy="FirebaseError";class vs extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Wy,Object.setPrototypeOf(this,vs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,El.prototype.create)}}class El{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?zy(s,r):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new vs(i,o,r)}}function zy(n,e){return n.replace(Hy,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Hy=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(n){return JSON.parse(n)}function hn(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg=function(n){let e={},t={},r={},i="";try{const s=n.split(".");e=ll(nu(s[0])||""),t=ll(nu(s[1])||""),i=s[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}},$y=function(n){const e=Fg(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},Gy=function(n){const e=Fg(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Xa(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function Ed(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ru(n,e,t){const r={};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function iu(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(Pm(s)&&Pm(a)){if(!iu(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Pm(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Zo(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function el(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if(typeof e=="string")for(let p=0;p<16;p++)r[p]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let p=0;p<16;p++)r[p]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let p=16;p<80;p++){const v=r[p-3]^r[p-8]^r[p-14]^r[p-16];r[p]=(v<<1|v>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],a=this.chain_[2],o=this.chain_[3],c=this.chain_[4],u,f;for(let p=0;p<80;p++){p<40?p<20?(u=o^s&(a^o),f=1518500249):(u=s^a^o,f=1859775393):p<60?(u=s&a|o&(s|a),f=2400959708):(u=s^a^o,f=3395469782);const v=(i<<5|i>>>27)+u+c+f+r[p]&4294967295;c=o,o=a,a=(s<<30|s>>>2)&4294967295,s=i,i=v}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+o&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const r=t-this.blockSize;let i=0;const s=this.buf_;let a=this.inbuf_;for(;i<t;){if(a===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(s[a]=e.charCodeAt(i),++a,++i,a===this.blockSize){this.compress_(s),a=0;break}}else for(;i<t;)if(s[a]=e[i],++a,++i,a===this.blockSize){this.compress_(s),a=0;break}}this.inbuf_=a,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function Ky(n,e){const t=new Xy(n,e);return t.subscribe.bind(t)}class Xy{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Jy(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=$h),i.error===void 0&&(i.error=$h),i.complete===void 0&&(i.complete=$h);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Jy(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function $h(){}function Pu(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,Ae(r<n.length,"Surrogate pair missing trail surrogate.");const a=n.charCodeAt(r)-56320;i=65536+(s<<10)+a}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Du=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(n){return n&&n._delegate?n._delegate:n}class Us{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Cl;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(t_(e))try{this.getOrInitializeService({instanceIdentifier:Ps})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ps){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ps){return this.instances.has(e)}getOptions(e=Ps){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:e_(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ps){return this.component?this.component.multipleInstances?e:Ps:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function e_(n){return n===Ps?void 0:n}function t_(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Zy(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Tt||(Tt={}));const r_={debug:Tt.DEBUG,verbose:Tt.VERBOSE,info:Tt.INFO,warn:Tt.WARN,error:Tt.ERROR,silent:Tt.SILENT},i_=Tt.INFO,s_={[Tt.DEBUG]:"log",[Tt.VERBOSE]:"log",[Tt.INFO]:"info",[Tt.WARN]:"warn",[Tt.ERROR]:"error"},a_=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=s_[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Kf{constructor(e){this.name=e,this._logLevel=i_,this._logHandler=a_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?r_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Tt.DEBUG,...e),this._logHandler(this,Tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Tt.VERBOSE,...e),this._logHandler(this,Tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Tt.INFO,...e),this._logHandler(this,Tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Tt.WARN,...e),this._logHandler(this,Tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Tt.ERROR,...e),this._logHandler(this,Tt.ERROR,...e)}}const o_=(n,e)=>e.some(t=>n instanceof t);let Dm,Om;function l_(){return Dm||(Dm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function c_(){return Om||(Om=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jg=new WeakMap,Id=new WeakMap,Bg=new WeakMap,Gh=new WeakMap,Xf=new WeakMap;function u_(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(rs(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&jg.set(t,n)}).catch(()=>{}),Xf.set(e,n),e}function h_(n){if(Id.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});Id.set(n,e)}let Td={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Id.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Bg.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return rs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function d_(n){Td=n(Td)}function f_(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Yh(this),e,...t);return Bg.set(r,e.sort?e.sort():[e]),rs(r)}:c_().includes(n)?function(...e){return n.apply(Yh(this),e),rs(jg.get(this))}:function(...e){return rs(n.apply(Yh(this),e))}}function p_(n){return typeof n=="function"?f_(n):(n instanceof IDBTransaction&&h_(n),o_(n,l_())?new Proxy(n,Td):n)}function rs(n){if(n instanceof IDBRequest)return u_(n);if(Gh.has(n))return Gh.get(n);const e=p_(n);return e!==n&&(Gh.set(n,e),Xf.set(e,n)),e}const Yh=n=>Xf.get(n);function m_(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),o=rs(a);return r&&a.addEventListener("upgradeneeded",c=>{r(rs(a.result),c.oldVersion,c.newVersion,rs(a.transaction),c)}),t&&a.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),o.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const g_=["get","getKey","getAll","getAllKeys","count"],v_=["put","add","delete","clear"],Kh=new Map;function Mm(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Kh.get(e))return Kh.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=v_.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||g_.includes(t)))return;const s=async function(a,...o){const c=this.transaction(a,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[t](...o),i&&c.done]))[0]};return Kh.set(e,s),s}d_(n=>({...n,get:(e,t,r)=>Mm(e,t)||n.get(e,t,r),has:(e,t)=>!!Mm(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(__(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function __(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ld="@firebase/app",Rm="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci=new Kf("@firebase/app"),b_="@firebase/app-compat",w_="@firebase/analytics-compat",x_="@firebase/analytics",N_="@firebase/app-check-compat",S_="@firebase/app-check",A_="@firebase/auth",k_="@firebase/auth-compat",C_="@firebase/database",E_="@firebase/data-connect",I_="@firebase/database-compat",T_="@firebase/functions",L_="@firebase/functions-compat",P_="@firebase/installations",D_="@firebase/installations-compat",O_="@firebase/messaging",M_="@firebase/messaging-compat",R_="@firebase/performance",F_="@firebase/performance-compat",j_="@firebase/remote-config",B_="@firebase/remote-config-compat",U_="@firebase/storage",q_="@firebase/storage-compat",V_="@firebase/firestore",W_="@firebase/vertexai-preview",z_="@firebase/firestore-compat",H_="firebase",$_="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd="[DEFAULT]",G_={[Ld]:"fire-core",[b_]:"fire-core-compat",[x_]:"fire-analytics",[w_]:"fire-analytics-compat",[S_]:"fire-app-check",[N_]:"fire-app-check-compat",[A_]:"fire-auth",[k_]:"fire-auth-compat",[C_]:"fire-rtdb",[E_]:"fire-data-connect",[I_]:"fire-rtdb-compat",[T_]:"fire-fn",[L_]:"fire-fn-compat",[P_]:"fire-iid",[D_]:"fire-iid-compat",[O_]:"fire-fcm",[M_]:"fire-fcm-compat",[R_]:"fire-perf",[F_]:"fire-perf-compat",[j_]:"fire-rc",[B_]:"fire-rc-compat",[U_]:"fire-gcs",[q_]:"fire-gcs-compat",[V_]:"fire-fst",[z_]:"fire-fst-compat",[W_]:"fire-vertex","fire-js":"fire-js",[H_]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su=new Map,Y_=new Map,Dd=new Map;function Fm(n,e){try{n.container.addComponent(e)}catch(t){Ci.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ja(n){const e=n.name;if(Dd.has(e))return Ci.debug(`There were multiple attempts to register component ${e}.`),!1;Dd.set(e,n);for(const t of su.values())Fm(t,n);for(const t of Y_.values())Fm(t,n);return!0}function Jf(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function bi(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},is=new El("app","Firebase",K_);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Us("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw is.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao=$_;function Ug(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Pd,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw is.create("bad-app-name",{appName:String(i)});if(t||(t=Dg()),!t)throw is.create("no-options");const s=su.get(i);if(s){if(iu(t,s.options)&&iu(r,s.config))return s;throw is.create("duplicate-app",{appName:i})}const a=new n_(i);for(const c of Dd.values())a.addComponent(c);const o=new X_(t,r,a);return su.set(i,o),o}function qg(n=Pd){const e=su.get(n);if(!e&&n===Pd&&Dg())return Ug();if(!e)throw is.create("no-app",{appName:n});return e}function ss(n,e,t){var r;let i=(r=G_[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${i}" with version "${e}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ci.warn(o.join(" "));return}Ja(new Us(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="firebase-heartbeat-database",Q_=1,cl="firebase-heartbeat-store";let Xh=null;function Vg(){return Xh||(Xh=m_(J_,Q_,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(cl)}catch(t){console.warn(t)}}}}).catch(n=>{throw is.create("idb-open",{originalErrorMessage:n.message})})),Xh}async function Z_(n){try{const t=(await Vg()).transaction(cl),r=await t.objectStore(cl).get(Wg(n));return await t.done,r}catch(e){if(e instanceof vs)Ci.warn(e.message);else{const t=is.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ci.warn(t.message)}}}async function jm(n,e){try{const r=(await Vg()).transaction(cl,"readwrite");await r.objectStore(cl).put(e,Wg(n)),await r.done}catch(t){if(t instanceof vs)Ci.warn(t.message);else{const r=is.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ci.warn(r.message)}}}function Wg(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb=1024,tb=30*24*60*60*1e3;class nb{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ib(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Bm();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=tb}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ci.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Bm(),{heartbeatsToSend:r,unsentEntries:i}=rb(this._heartbeatsCache.heartbeats),s=tu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Ci.warn(t),""}}}function Bm(){return new Date().toISOString().substring(0,10)}function rb(n,e=eb){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),Um(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Um(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class ib{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qy()?Vy().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Z_(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return jm(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return jm(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Um(n){return tu(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(n){Ja(new Us("platform-logger",e=>new y_(e),"PRIVATE")),Ja(new Us("heartbeat",e=>new nb(e),"PRIVATE")),ss(Ld,Rm,n),ss(Ld,Rm,"esm2017"),ss("fire-js","")}sb("");function Qf(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function zg(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ab=zg,Hg=new El("auth","Firebase",zg());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au=new Kf("@firebase/auth");function ob(n,...e){au.logLevel<=Tt.WARN&&au.warn(`Auth (${ao}): ${n}`,...e)}function zc(n,...e){au.logLevel<=Tt.ERROR&&au.error(`Auth (${ao}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(n,...e){throw Zf(n,...e)}function Zr(n,...e){return Zf(n,...e)}function $g(n,e,t){const r=Object.assign(Object.assign({},ab()),{[e]:t});return new El("auth","Firebase",r).create(e,{appName:n.name})}function as(n){return $g(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Zf(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Hg.create(n,...e)}function Je(n,e,...t){if(!n)throw Zf(e,...t)}function wi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw zc(e),new Error(e)}function Ei(n,e){n||wi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function lb(){return qm()==="http:"||qm()==="https:"}function qm(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lb()||By()||"connection"in navigator)?navigator.onLine:!0}function ub(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ei(t>e,"Short delay should be less than long delay!"),this.isMobile=Yf()||Mg()}get(){return cb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(n,e){Ei(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db=new Il(3e4,6e4);function Ys(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ys(n,e,t,r,i={}){return Yg(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const o=so(Object.assign({key:n.config.apiKey},a)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const u=Object.assign({method:e,headers:c},s);return jy()||(u.referrerPolicy="no-referrer"),Gg.fetch()(Kg(n,n.config.apiHost,t,o),u)})}async function Yg(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},hb),e);try{const i=new pb(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Dc(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Dc(n,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Dc(n,"email-already-in-use",a);if(c==="USER_DISABLED")throw Dc(n,"user-disabled",a);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw $g(n,f,u);Rr(n,f)}}catch(i){if(i instanceof vs)throw i;Rr(n,"network-request-failed",{message:String(i)})}}async function Ou(n,e,t,r,i={}){const s=await ys(n,e,t,r,i);return"mfaPendingCredential"in s&&Rr(n,"multi-factor-auth-required",{_serverResponse:s}),s}function Kg(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?ep(n.config,i):`${n.config.apiScheme}://${i}`}function fb(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class pb{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Zr(this.auth,"network-request-failed")),db.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Dc(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Zr(n,e,r);return i.customData._tokenResponse=t,i}function Vm(n){return n!==void 0&&n.enterprise!==void 0}class mb{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return fb(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function gb(n,e){return ys(n,"GET","/v2/recaptchaConfig",Ys(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vb(n,e){return ys(n,"POST","/v1/accounts:delete",e)}async function Xg(n,e){return ys(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yb(n,e=!1){const t=Dn(n),r=await t.getIdToken(e),i=tp(r);Je(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:tl(Jh(i.auth_time)),issuedAtTime:tl(Jh(i.iat)),expirationTime:tl(Jh(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Jh(n){return Number(n)*1e3}function tp(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return zc("JWT malformed, contained fewer than 3 sections"),null;try{const i=nu(t);return i?JSON.parse(i):(zc("Failed to decode base64 JWT payload"),null)}catch(i){return zc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Wm(n){const e=tp(n);return Je(e,"internal-error"),Je(typeof e.exp<"u","internal-error"),Je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof vs&&_b(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function _b({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=tl(this.lastLoginAt),this.creationTime=tl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ou(n){var e;const t=n.auth,r=await n.getIdToken(),i=await ul(n,Xg(t,{idToken:r}));Je(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Jg(s.providerUserInfo):[],o=xb(n.providerData,a),c=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!(o!=null&&o.length),f=c?u:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Md(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,p)}async function wb(n){const e=Dn(n);await ou(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xb(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Jg(n){return n.map(e=>{var{providerId:t}=e,r=Qf(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nb(n,e){const t=await Yg(n,{},async()=>{const r=so({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=Kg(n,i,"/v1/token",`key=${s}`),o=await n._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Gg.fetch()(a,{method:"POST",headers:o,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Sb(n,e){return ys(n,"POST","/v2/accounts:revokeToken",Ys(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Je(e.idToken,"internal-error"),Je(typeof e.idToken<"u","internal-error"),Je(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Wm(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Je(e.length!==0,"internal-error");const t=Wm(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await Nb(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new Ua;return r&&(Je(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(Je(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Je(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ua,this.toJSON())}_performRefresh(){return wi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(n,e){Je(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class xi{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Qf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Md(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await ul(this,this.stsTokenManager.getToken(this.auth,e));return Je(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return yb(this,e)}reload(){return wb(this)}_assign(e){this!==e&&(Je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new xi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await ou(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bi(this.auth.app))return Promise.reject(as(this.auth));const e=await this.getIdToken();return await ul(this,vb(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,a,o,c,u,f;const p=(r=t.displayName)!==null&&r!==void 0?r:void 0,v=(i=t.email)!==null&&i!==void 0?i:void 0,g=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,N=(a=t.photoURL)!==null&&a!==void 0?a:void 0,S=(o=t.tenantId)!==null&&o!==void 0?o:void 0,I=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,b=(u=t.createdAt)!==null&&u!==void 0?u:void 0,A=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:P,emailVerified:R,isAnonymous:W,providerData:ie,stsTokenManager:Q}=t;Je(P&&Q,e,"internal-error");const V=Ua.fromJSON(this.name,Q);Je(typeof P=="string",e,"internal-error"),Gi(p,e.name),Gi(v,e.name),Je(typeof R=="boolean",e,"internal-error"),Je(typeof W=="boolean",e,"internal-error"),Gi(g,e.name),Gi(N,e.name),Gi(S,e.name),Gi(I,e.name),Gi(b,e.name),Gi(A,e.name);const se=new xi({uid:P,auth:e,email:v,emailVerified:R,displayName:p,isAnonymous:W,photoURL:N,phoneNumber:g,tenantId:S,stsTokenManager:V,createdAt:b,lastLoginAt:A});return ie&&Array.isArray(ie)&&(se.providerData=ie.map(me=>Object.assign({},me))),I&&(se._redirectEventId=I),se}static async _fromIdTokenResponse(e,t,r=!1){const i=new Ua;i.updateFromServerResponse(t);const s=new xi({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await ou(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Je(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Jg(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new Ua;o.updateFromIdToken(r);const c=new xi({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Md(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm=new Map;function Ni(n){Ei(n instanceof Function,"Expected a class definition");let e=zm.get(n);return e?(Ei(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,zm.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Qg.type="NONE";const Hm=Qg;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(n,e,t){return`firebase:${n}:${e}:${t}`}class qa{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Hc(this.userKey,i.apiKey,s),this.fullPersistenceKey=Hc("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?xi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new qa(Ni(Hm),e,r);const i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Ni(Hm);const a=Hc(r,e.config.apiKey,e.name);let o=null;for(const u of t)try{const f=await u._get(a);if(f){const p=xi._fromJSON(e,f);u!==s&&(o=p),s=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new qa(s,e,r):(s=c[0],o&&await s._set(a,o.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new qa(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(n1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Zg(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(i1(e))return"Blackberry";if(s1(e))return"Webos";if(e1(e))return"Safari";if((e.includes("chrome/")||t1(e))&&!e.includes("edge/"))return"Chrome";if(r1(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Zg(n=qn()){return/firefox\//i.test(n)}function e1(n=qn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function t1(n=qn()){return/crios\//i.test(n)}function n1(n=qn()){return/iemobile/i.test(n)}function r1(n=qn()){return/android/i.test(n)}function i1(n=qn()){return/blackberry/i.test(n)}function s1(n=qn()){return/webos/i.test(n)}function np(n=qn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Ab(n=qn()){var e;return np(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function kb(){return Uy()&&document.documentMode===10}function a1(n=qn()){return np(n)||r1(n)||s1(n)||i1(n)||/windows phone/i.test(n)||n1(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(n,e=[]){let t;switch(n){case"Browser":t=$m(qn());break;case"Worker":t=`${$m(qn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ao}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,o)=>{try{const c=e(s);a(c)}catch(c){o(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eb(n,e={}){return ys(n,"GET","/v2/passwordPolicy",Ys(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib=6;class Tb{constructor(e){var t,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:Ib,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,a,o;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(o=c.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),c}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gm(this),this.idTokenSubscription=new Gm(this),this.beforeStateQueue=new Cb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Hg,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ni(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await qa.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Xg(this,{idToken:e}),r=await xi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(bi(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,o=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===o)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ou(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ub()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(bi(this.app))return Promise.reject(as(this));const t=e?Dn(e):null;return t&&Je(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return bi(this.app)?Promise.reject(as(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return bi(this.app)?Promise.reject(as(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ni(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Eb(this),t=new Tb(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new El("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Sb(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ni(e)||this._popupRedirectResolver;Je(t,this,"argument-error"),this.redirectPersistenceManager=await qa.create(this,[Ni(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Je(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,i);return()=>{a=!0,c()}}else{const c=e.addObserver(t);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=o1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&ob(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function oo(n){return Dn(n)}class Gm{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ky(t=>this.observer=t)}get next(){return Je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Pb(n){Mu=n}function l1(n){return Mu.loadJS(n)}function Db(){return Mu.recaptchaEnterpriseScript}function Ob(){return Mu.gapiScript}function Mb(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const Rb="recaptcha-enterprise",Fb="NO_RECAPTCHA";class jb{constructor(e){this.type=Rb,this.auth=oo(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{gb(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new mb(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,a(u.siteKey)}}).catch(c=>{o(c)})})}function i(s,a,o){const c=window.grecaptcha;Vm(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{a(u)}).catch(()=>{a(Fb)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{r(this.auth).then(o=>{if(!t&&Vm(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Db();c.length!==0&&(c+=o),l1(c).then(()=>{i(o,s,a)}).catch(u=>{a(u)})}}).catch(o=>{a(o)})})}}async function Ym(n,e,t,r=!1){const i=new jb(n);let s;try{s=await i.verify(t)}catch{s=await i.verify(t,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Km(n,e,t,r){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Ym(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Ym(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(n,e){const t=Jf(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(iu(s,e??{}))return i;Rr(i,"already-initialized")}return t.initialize({options:e})}function Ub(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Ni);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function qb(n,e,t){const r=oo(n);Je(r._canInitEmulator,r,"emulator-config-failed"),Je(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=c1(e),{host:a,port:o}=Vb(e),c=o===null?"":`:${o}`;r.config.emulator={url:`${s}//${a}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),Wb()}function c1(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Vb(n){const e=c1(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Xm(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:Xm(a)}}}function Xm(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Wb(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return wi("not implemented")}_getIdTokenResponse(e){return wi("not implemented")}_linkToIdToken(e,t){return wi("not implemented")}_getReauthenticationResolver(e){return wi("not implemented")}}async function zb(n,e){return ys(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hb(n,e){return Ou(n,"POST","/v1/accounts:signInWithPassword",Ys(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $b(n,e){return Ou(n,"POST","/v1/accounts:signInWithEmailLink",Ys(n,e))}async function Gb(n,e){return Ou(n,"POST","/v1/accounts:signInWithEmailLink",Ys(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl extends rp{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new hl(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new hl(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Km(e,t,"signInWithPassword",Hb);case"emailLink":return $b(e,{email:this._email,oobCode:this._password});default:Rr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Km(e,r,"signUpPassword",zb);case"emailLink":return Gb(e,{idToken:t,email:this._email,oobCode:this._password});default:Rr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Va(n,e){return Ou(n,"POST","/v1/accounts:signInWithIdp",Ys(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="http://localhost";class qs extends rp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new qs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Rr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Qf(t,["providerId","signInMethod"]);if(!r||!i)return null;const a=new qs(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Va(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Va(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Va(e,t)}buildRequest(){const e={requestUri:Yb,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=so(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Xb(n){const e=Zo(el(n)).link,t=e?Zo(el(e)).deep_link_id:null,r=Zo(el(n)).deep_link_id;return(r?Zo(el(r)).link:null)||r||t||e||n}class ip{constructor(e){var t,r,i,s,a,o;const c=Zo(el(e)),u=(t=c.apiKey)!==null&&t!==void 0?t:null,f=(r=c.oobCode)!==null&&r!==void 0?r:null,p=Kb((i=c.mode)!==null&&i!==void 0?i:null);Je(u&&f&&p,"argument-error"),this.apiKey=u,this.operation=p,this.code=f,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=c.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=c.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const t=Xb(e);try{return new ip(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(){this.providerId=lo.PROVIDER_ID}static credential(e,t){return hl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=ip.parseLink(t);return Je(r,"argument-error"),hl._fromEmailAndCode(e,r.code,r.tenantId)}}lo.PROVIDER_ID="password";lo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";lo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl extends u1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends Tl{constructor(){super("facebook.com")}static credential(e){return qs._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ji.credential(e.oauthAccessToken)}catch{return null}}}Ji.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ji.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends Tl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return qs._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Qi.credential(t,r)}catch{return null}}}Qi.GOOGLE_SIGN_IN_METHOD="google.com";Qi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends Tl{constructor(){super("github.com")}static credential(e){return qs._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zi.credential(e.oauthAccessToken)}catch{return null}}}Zi.GITHUB_SIGN_IN_METHOD="github.com";Zi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends Tl{constructor(){super("twitter.com")}static credential(e,t){return qs._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return es.credential(t,r)}catch{return null}}}es.TWITTER_SIGN_IN_METHOD="twitter.com";es.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await xi._fromIdTokenResponse(e,r,i),a=Jm(r);return new Qa({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=Jm(r);return new Qa({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function Jm(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu extends vs{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,lu.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new lu(e,t,r,i)}}function h1(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?lu._fromErrorAndOperation(n,s,e,r):s})}async function Jb(n,e,t=!1){const r=await ul(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Qa._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qb(n,e,t=!1){const{auth:r}=n;if(bi(r.app))return Promise.reject(as(r));const i="reauthenticate";try{const s=await ul(n,h1(r,i,e,n),t);Je(s.idToken,r,"internal-error");const a=tp(s.idToken);Je(a,r,"internal-error");const{sub:o}=a;return Je(n.uid===o,r,"user-mismatch"),Qa._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Rr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d1(n,e,t=!1){if(bi(n.app))return Promise.reject(as(n));const r="signIn",i=await h1(n,r,e),s=await Qa._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function Zb(n,e){return d1(oo(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ew(n){const e=oo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function tw(n,e,t){return bi(n.app)?Promise.reject(as(n)):Zb(Dn(n),lo.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ew(n),r})}function nw(n,e,t,r){return Dn(n).onIdTokenChanged(e,t,r)}function rw(n,e,t){return Dn(n).beforeAuthStateChanged(e,t)}function iw(n,e,t,r){return Dn(n).onAuthStateChanged(e,t,r)}function sw(n){return Dn(n).signOut()}const cu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(cu,"1"),this.storage.removeItem(cu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw=1e3,ow=10;class p1 extends f1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=a1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,o,c)=>{this.notifyListeners(a,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);kb()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,ow):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},aw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}p1.type="LOCAL";const lw=p1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1 extends f1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}m1.type="SESSION";const g1=m1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Ru(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(a).map(async u=>u(t.origin,s)),c=await cw(o);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ru.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,c)=>{const u=sp("",20);i.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(p){const v=p;if(v.data.eventId===u)switch(v.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(v.data.response);break;default:clearTimeout(f),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(){return window}function hw(n){ei().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(){return typeof ei().WorkerGlobalScope<"u"&&typeof ei().importScripts=="function"}async function dw(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fw(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function pw(){return v1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1="firebaseLocalStorageDb",mw=1,uu="firebaseLocalStorage",_1="fbase_key";class Ll{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Fu(n,e){return n.transaction([uu],e?"readwrite":"readonly").objectStore(uu)}function gw(){const n=indexedDB.deleteDatabase(y1);return new Ll(n).toPromise()}function Rd(){const n=indexedDB.open(y1,mw);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(uu,{keyPath:_1})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(uu)?e(r):(r.close(),await gw(),e(await Rd()))})})}async function Qm(n,e,t){const r=Fu(n,!0).put({[_1]:e,value:t});return new Ll(r).toPromise()}async function vw(n,e){const t=Fu(n,!1).get(e),r=await new Ll(t).toPromise();return r===void 0?null:r.value}function Zm(n,e){const t=Fu(n,!0).delete(e);return new Ll(t).toPromise()}const yw=800,_w=3;class b1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Rd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>_w)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return v1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ru._getInstance(pw()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await dw(),!this.activeServiceWorker)return;this.sender=new uw(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fw()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Rd();return await Qm(e,cu,"1"),await Zm(e,cu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Qm(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>vw(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Zm(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Fu(i,!1).getAll();return new Ll(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}b1.type="LOCAL";const bw=b1;new Il(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ww(n,e){return e?Ni(e):(Je(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap extends rp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Va(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Va(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Va(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function xw(n){return d1(n.auth,new ap(n),n.bypassAuthState)}function Nw(n){const{auth:e,user:t}=n;return Je(t,e,"internal-error"),Qb(t,new ap(n),n.bypassAuthState)}async function Sw(n){const{auth:e,user:t}=n;return Je(t,e,"internal-error"),Jb(t,new ap(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xw;case"linkViaPopup":case"linkViaRedirect":return Sw;case"reauthViaPopup":case"reauthViaRedirect":return Nw;default:Rr(this.auth,"internal-error")}}resolve(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw=new Il(2e3,1e4);class Fa extends w1{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Fa.currentPopupAction&&Fa.currentPopupAction.cancel(),Fa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Je(e,this.auth,"internal-error"),e}async onExecution(){Ei(this.filter.length===1,"Popup operations only handle one event");const e=sp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Zr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Zr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Aw.get())};e()}}Fa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="pendingRedirect",$c=new Map;class Cw extends w1{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=$c.get(this.auth._key());if(!e){try{const r=await Ew(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}$c.set(this.auth._key(),e)}return this.bypassAuthState||$c.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ew(n,e){const t=Lw(e),r=Tw(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function Iw(n,e){$c.set(n._key(),e)}function Tw(n){return Ni(n._redirectPersistence)}function Lw(n){return Hc(kw,n.config.apiKey,n.name)}async function Pw(n,e,t=!1){if(bi(n.app))return Promise.reject(as(n));const r=oo(n),i=ww(r,e),a=await new Cw(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw=10*60*1e3;class Ow{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Mw(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!x1(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Zr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Dw&&this.cachedEventUids.clear(),this.cachedEventUids.has(e0(e))}saveEventToCache(e){this.cachedEventUids.add(e0(e)),this.lastProcessedEventTime=Date.now()}}function e0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function x1({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Mw(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return x1(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rw(n,e={}){return ys(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jw=/^https?/;async function Bw(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Rw(n);for(const t of e)try{if(Uw(t))return}catch{}Rr(n,"unauthorized-domain")}function Uw(n){const e=Od(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!jw.test(t))return!1;if(Fw.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw=new Il(3e4,6e4);function t0(){const n=ei().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Vw(n){return new Promise((e,t)=>{var r,i,s;function a(){t0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{t0(),t(Zr(n,"network-request-failed"))},timeout:qw.get()})}if(!((i=(r=ei().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ei().gapi)===null||s===void 0)&&s.load)a();else{const o=Mb("iframefcb");return ei()[o]=()=>{gapi.load?a():t(Zr(n,"network-request-failed"))},l1(`${Ob()}?onload=${o}`).catch(c=>t(c))}}).catch(e=>{throw Gc=null,e})}let Gc=null;function Ww(n){return Gc=Gc||Vw(n),Gc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw=new Il(5e3,15e3),Hw="__/auth/iframe",$w="emulator/auth/iframe",Gw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Yw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Kw(n){const e=n.config;Je(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ep(e,$w):`https://${n.config.authDomain}/${Hw}`,r={apiKey:e.apiKey,appName:n.name,v:ao},i=Yw.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${so(r).slice(1)}`}async function Xw(n){const e=await Ww(n),t=ei().gapi;return Je(t,n,"internal-error"),e.open({where:document.body,url:Kw(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gw,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Zr(n,"network-request-failed"),o=ei().setTimeout(()=>{s(a)},zw.get());function c(){ei().clearTimeout(o),i(r)}r.ping(c).then(c,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Qw=500,Zw=600,ex="_blank",tx="http://localhost";class n0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nx(n,e,t,r=Qw,i=Zw){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const c=Object.assign(Object.assign({},Jw),{width:r.toString(),height:i.toString(),top:s,left:a}),u=qn().toLowerCase();t&&(o=t1(u)?ex:t),Zg(u)&&(e=e||tx,c.scrollbars="yes");const f=Object.entries(c).reduce((v,[g,N])=>`${v}${g}=${N},`,"");if(Ab(u)&&o!=="_self")return rx(e||"",o),new n0(null);const p=window.open(e||"",o,f);Je(p,n,"popup-blocked");try{p.focus()}catch{}return new n0(p)}function rx(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="__/auth/handler",sx="emulator/auth/handler",ax=encodeURIComponent("fac");async function r0(n,e,t,r,i,s){Je(n.config.authDomain,n,"auth-domain-config-required"),Je(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ao,eventId:i};if(e instanceof u1){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",Ed(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))a[f]=p}if(e instanceof Tl){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(a.scopes=f.join(","))}n.tenantId&&(a.tid=n.tenantId);const o=a;for(const f of Object.keys(o))o[f]===void 0&&delete o[f];const c=await n._getAppCheckToken(),u=c?`#${ax}=${encodeURIComponent(c)}`:"";return`${ox(n)}?${so(o).slice(1)}${u}`}function ox({config:n}){return n.emulator?ep(n,sx):`https://${n.authDomain}/${ix}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh="webStorageSupport";class lx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=g1,this._completeRedirectFn=Pw,this._overrideRedirectResult=Iw}async _openPopup(e,t,r,i){var s;Ei((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await r0(e,t,r,Od(),i);return nx(e,a,sp())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await r0(e,t,r,Od(),i);return hw(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Ei(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Xw(e),r=new Ow(e);return t.register("authEvent",i=>(Je(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Qh,{type:Qh},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Qh];a!==void 0&&t(!!a),Rr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Bw(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return a1()||e1()||np()}}const cx=lx;var i0="@firebase/auth",s0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dx(n){Ja(new Us("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Je(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:o1(n)},u=new Lb(r,i,s,c);return Ub(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ja(new Us("auth-internal",e=>{const t=oo(e.getProvider("auth").getImmediate());return(r=>new ux(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ss(i0,s0,hx(n)),ss(i0,s0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx=5*60,px=Og("authIdTokenMaxAge")||fx;let a0=null;const mx=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>px)return;const i=t==null?void 0:t.token;a0!==i&&(a0=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function gx(n=qg()){const e=Jf(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Bb(n,{popupRedirectResolver:cx,persistence:[bw,lw,g1]}),r=Og("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=mx(s.toString());rw(t,a,()=>a(t.currentUser)),nw(t,o=>a(o))}}const i=Pg("auth");return i&&qb(t,`http://${i}`),t}function vx(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Pb({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Zr("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",vx().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dx("Browser");var yx="firebase",_x="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ss(yx,_x,"app");var o0={};const l0="@firebase/database",c0="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let N1="";function bx(n){N1=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),hn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:ll(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return ri(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new wx(e)}}catch{}return new xx},Fs=S1("localStorage"),Nx=S1("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa=new Kf("@firebase/database"),Sx=function(){let n=1;return function(){return n++}}(),A1=function(n){const e=Qy(n),t=new Yy;t.update(e);const r=t.digest();return $f.encodeByteArray(r)},Pl=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Pl.apply(null,r):typeof r=="object"?e+=hn(r):e+=r,e+=" "}return e};let nl=null,u0=!0;const Ax=function(n,e){Ae(!e,"Can't turn on custom loggers persistently."),Wa.logLevel=Tt.VERBOSE,nl=Wa.log.bind(Wa)},wn=function(...n){if(u0===!0&&(u0=!1,nl===null&&Nx.get("logging_enabled")===!0&&Ax()),nl){const e=Pl.apply(null,n);nl(e)}},Dl=function(n){return function(...e){wn(n,...e)}},Fd=function(...n){const e="FIREBASE INTERNAL ERROR: "+Pl(...n);Wa.error(e)},Ii=function(...n){const e=`FIREBASE FATAL ERROR: ${Pl(...n)}`;throw Wa.error(e),new Error(e)},Bn=function(...n){const e="FIREBASE WARNING: "+Pl(...n);Wa.warn(e)},kx=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Bn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},op=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Cx=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Za="[MIN_NAME]",Vs="[MAX_NAME]",Ks=function(n,e){if(n===e)return 0;if(n===Za||e===Vs)return-1;if(e===Za||n===Vs)return 1;{const t=h0(n),r=h0(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},Ex=function(n,e){return n===e?0:n<e?-1:1},zo=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+hn(e))},lp=function(n){if(typeof n!="object"||n===null)return hn(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=hn(e[r]),t+=":",t+=lp(n[e[r]]);return t+="}",t},k1=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function xn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const C1=function(n){Ae(!op(n),"Invalid JSON number");const e=11,t=52,r=(1<<e-1)-1;let i,s,a,o,c;n===0?(s=0,a=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(o=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=o+r,a=Math.round(n*Math.pow(2,t-o)-Math.pow(2,t))):(s=0,a=Math.round(n/Math.pow(2,1-r-t))));const u=[];for(c=t;c;c-=1)u.push(a%2?1:0),a=Math.floor(a/2);for(c=e;c;c-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const f=u.join("");let p="";for(c=0;c<64;c+=8){let v=parseInt(f.substr(c,8),2).toString(16);v.length===1&&(v="0"+v),p=p+v}return p.toLowerCase()},Ix=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Tx=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Lx(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}const Px=new RegExp("^-?(0*)\\d{1,10}$"),Dx=-2147483648,Ox=2147483647,h0=function(n){if(Px.test(n)){const e=Number(n);if(e>=Dx&&e<=Ox)return e}return null},co=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw Bn("Exception was thrown by user callback.",t),e},Math.floor(0))}},Mx=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},rl=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Bn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(wn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Bn(e)}}class Yc{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Yc.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp="5",E1="v",I1="s",T1="r",L1="f",P1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,D1="ls",O1="p",jd="ac",M1="websocket",R1="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,t,r,i,s=!1,a="",o=!1,c=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=a,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Fs.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Fs.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function jx(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function j1(n,e,t){Ae(typeof e=="string","typeof type must == string"),Ae(typeof t=="object","typeof params must == object");let r;if(e===M1)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===R1)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);jx(n)&&(t.ns=n.namespace);const i=[];return xn(t,(s,a)=>{i.push(s+"="+a)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(){this.counters_={}}incrementCounter(e,t=1){ri(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Ty(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh={},ed={};function up(n){const e=n.toString();return Zh[e]||(Zh[e]=new Bx),Zh[e]}function Ux(n,e){const t=n.toString();return ed[t]||(ed[t]=e()),ed[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&co(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0="start",Vx="close",Wx="pLPCommand",zx="pRTLPCB",B1="id",U1="pw",q1="ser",Hx="cb",$x="seg",Gx="ts",Yx="d",Kx="dframe",V1=1870,W1=30,Xx=V1-W1,Jx=25e3,Qx=3e4;class ja{constructor(e,t,r,i,s,a,o){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=a,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Dl(e),this.stats_=up(t),this.urlFn=c=>(this.appCheckToken&&(c[jd]=this.appCheckToken),j1(t,R1,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new qx(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Qx)),Cx(()=>{if(this.isClosed_)return;this.scriptTagHolder=new hp((...s)=>{const[a,o,c,u,f]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,a===d0)this.id=o,this.password=c;else if(a===Vx)o?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(o,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+a)},(...s)=>{const[a,o]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(a,o)},()=>{this.onClosed_()},this.urlFn);const r={};r[d0]="t",r[q1]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Hx]=this.scriptTagHolder.uniqueCallbackIdentifier),r[E1]=cp,this.transportSessionId&&(r[I1]=this.transportSessionId),this.lastSessionId&&(r[D1]=this.lastSessionId),this.applicationId&&(r[O1]=this.applicationId),this.appCheckToken&&(r[jd]=this.appCheckToken),typeof location<"u"&&location.hostname&&P1.test(location.hostname)&&(r[T1]=L1);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ja.forceAllow_=!0}static forceDisallow(){ja.forceDisallow_=!0}static isAvailable(){return ja.forceAllow_?!0:!ja.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Ix()&&!Tx()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=hn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=Tg(t),i=k1(r,Xx);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={};r[Kx]="t",r[B1]=e,r[U1]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=hn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class hp{constructor(e,t,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Sx(),window[Wx+this.uniqueCallbackIdentifier]=e,window[zx+this.uniqueCallbackIdentifier]=t,this.myIFrame=hp.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(o){wn("frame writing exception"),o.stack&&wn(o.stack),wn(o)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||wn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[B1]=this.myID,e[U1]=this.myPW,e[q1]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+W1+r.length<=V1;){const a=this.pendingSegs.shift();r=r+"&"+$x+i+"="+a.seg+"&"+Gx+i+"="+a.ts+"&"+Yx+i+"="+a.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(Jx)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{wn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=16384,e3=45e3;let hu=null;typeof MozWebSocket<"u"?hu=MozWebSocket:typeof WebSocket<"u"&&(hu=WebSocket);class Dr{constructor(e,t,r,i,s,a,o){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Dl(this.connId),this.stats_=up(t),this.connURL=Dr.connectionURL_(t,a,o,i,r),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,r,i,s){const a={};return a[E1]=cp,typeof location<"u"&&location.hostname&&P1.test(location.hostname)&&(a[T1]=L1),t&&(a[I1]=t),r&&(a[D1]=r),i&&(a[jd]=i),s&&(a[O1]=s),j1(e,M1,a)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Fs.set("previous_websocket_failure",!0);try{let r;Rg(),this.mySock=new hu(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Dr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(t);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&hu!==null&&!Dr.forceDisallow_}static previouslyFailed(){return Fs.isInMemoryStorage||Fs.get("previous_websocket_failure")===!0}markConnectionHealthy(){Fs.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const r=ll(t);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ae(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const r=this.extractFrameCount_(t);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const t=hn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=k1(t,Zx);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(e3))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Dr.responsesRequiredToBeHealthy=2;Dr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ja,Dr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=Dr&&Dr.isAvailable();let r=t&&!Dr.previouslyFailed();if(e.webSocketOnly&&(t||Bn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Dr];else{const i=this.transports_=[];for(const s of dl.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);dl.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}dl.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t3=6e4,n3=5e3,r3=10*1024,i3=100*1024,td="t",f0="d",s3="s",p0="r",a3="e",m0="o",g0="a",v0="n",y0="p",o3="h";class l3{constructor(e,t,r,i,s,a,o,c,u,f){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=a,this.onReady_=o,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Dl("c:"+this.id+":"),this.transportManager_=new dl(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=rl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>i3?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>r3?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(td in e){const t=e[td];t===g0?this.upgradeIfSecondaryHealthy_():t===p0?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===m0&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=zo("t",e),r=zo("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:y0,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:g0,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:v0,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=zo("t",e),r=zo("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=zo(td,e);if(f0 in e){const r=e[f0];if(t===o3){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===v0){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===s3?this.onConnectionShutdown_(r):t===p0?this.onReset_(r):t===a3?Fd("Server Error: "+r):t===m0?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Fd("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),cp!==r&&Bn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),rl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(t3))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):rl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(n3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:y0,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Fs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e){this.allowedEvents_=e,this.listeners_={},Ae(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){Ae(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du extends H1{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Yf()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new du}getInitialEvent(e){return Ae(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0=32,b0=768;class Pt{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function _t(){return new Pt("")}function pt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function us(n){return n.pieces_.length-n.pieceNum_}function Bt(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Pt(n.pieces_,e)}function dp(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function c3(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function fl(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function $1(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Pt(e,0)}function Kt(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Pt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Pt(t,0)}function dt(n){return n.pieceNum_>=n.pieces_.length}function jn(n,e){const t=pt(n),r=pt(e);if(t===null)return e;if(t===r)return jn(Bt(n),Bt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function u3(n,e){const t=fl(n,0),r=fl(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=Ks(t[i],r[i]);if(s!==0)return s}return t.length===r.length?0:t.length<r.length?-1:1}function G1(n,e){if(us(n)!==us(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function vr(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(us(n)>us(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class h3{constructor(e,t){this.errorPrefix_=t,this.parts_=fl(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Du(this.parts_[r]);Y1(this)}}function d3(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Du(e),Y1(n)}function f3(n){const e=n.parts_.pop();n.byteLength_-=Du(e),n.parts_.length>0&&(n.byteLength_-=1)}function Y1(n){if(n.byteLength_>b0)throw new Error(n.errorPrefix_+"has a key path longer than "+b0+" bytes ("+n.byteLength_+").");if(n.parts_.length>_0)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+_0+") or object contains a cycle "+Ds(n))}function Ds(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp extends H1{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new fp}getInitialEvent(e){return Ae(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho=1e3,p3=60*5*1e3,w0=30*1e3,m3=1.3,g3=3e4,v3="server_kill",x0=3;class Ai extends z1{constructor(e,t,r,i,s,a,o,c){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=o,this.authOverride_=c,this.id=Ai.nextPersistentConnectionId_++,this.log_=Dl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ho,this.maxReconnectDelay_=p3,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!Rg())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");fp.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&du.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,r){const i=++this.requestNumber_,s={r:i,a:e,b:t};this.log_(hn(s)),Ae(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const t=new Cl,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:a=>{const o=a.d;a.s==="ok"?t.resolve(o):t.reject(o)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),t.promise}listen(e,t,r,i){this.initConnection_();const s=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),Ae(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ae(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");const o={onComplete:i,hashFn:t,query:e,tag:r};this.listens.get(a).set(s,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(r)})}sendListen_(e){const t=e.query,r=t._path.toString(),i=t._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},a="q";e.tag&&(s.q=t._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(a,s,o=>{const c=o.d,u=o.s;Ai.warnOnListenWarnings_(c,t),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",o),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,c))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&ri(e,"w")){const r=Xa(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+t._queryParams.getIndex().toString()+'"',s=t._path.toString();Bn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Gy(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=w0)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=$y(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(t,r,i=>{const s=i.s,a=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,r=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,r)})}unlisten(e,t){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),Ae(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,t)}sendUnlisten_(e,t,r,i){this.log_("Unlisten on "+e+" for "+t);const s={p:e},a="n";i&&(s.q=r,s.t=i),this.sendRequest(a,s)}onDisconnectPut(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:r})}onDisconnectMerge(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:r})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,r,i){const s={p:t,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,a=>{i&&setTimeout(()=>{i(a.s,a.d)},Math.floor(0))})}put(e,t,r,i){this.putInternal("p",e,t,r,i)}merge(e,t,r,i){this.putInternal("m",e,t,r,i)}putInternal(e,t,r,i,s){this.initConnection_();const a={p:t,d:r};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:e,request:a,onComplete:i}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,r,s=>{this.log_(t+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+hn(e));const t=e.r,r=this.requestCBHash_[t];r&&(delete this.requestCBHash_[t],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):Fd("Unrecognized action received from server: "+hn(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ae(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ho,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ho,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>g3&&(this.reconnectDelay_=Ho),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*m3)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Ai.nextConnectionId_++,s=this.lastSessionId;let a=!1,o=null;const c=function(){o?o.close():(a=!0,r())},u=function(p){Ae(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(p)};this.realtime_={close:c,sendRequest:u};const f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[p,v]=await Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);a?wn("getToken() completed but was canceled"):(wn("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=v&&v.token,o=new l3(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,r,g=>{Bn(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(v3)},s))}catch(p){this.log_("Failed to get token: "+p),a||(this.repoInfo_.nodeAdmin&&Bn(p),c())}}}interrupt(e){wn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){wn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Ed(this.interruptReasons_)&&(this.reconnectDelay_=Ho,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let r;t?r=t.map(s=>lp(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,t){const r=new Pt(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(t),s.delete(t),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,t){wn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=x0&&(this.reconnectDelay_=w0,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){wn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=x0&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+N1.replace(/\./g,"-")]=1,Yf()?e["framework.cordova"]=1:Mg()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=du.getInstance().currentlyOnline();return Ed(this.interruptReasons_)&&e}}Ai.nextPersistentConnectionId_=0;Ai.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new ut(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new ut(Za,e),i=new ut(Za,t);return this.compare(r,i)!==0}minPost(){return ut.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oc;class K1 extends ju{static get __EMPTY_NODE(){return Oc}static set __EMPTY_NODE(e){Oc=e}compare(e,t){return Ks(e.name,t.name)}isDefinedOn(e){throw io("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return ut.MIN}maxPost(){return new ut(Vs,Oc)}makePost(e,t){return Ae(typeof e=="string","KeyIndex indexValue must always be a string."),new ut(e,Oc)}toString(){return".key"}}const za=new K1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let a=1;for(;!e.isEmpty();)if(e=e,a=t?r(e.key,t):1,i&&(a*=-1),a<0)this.isReverse_?e=e.left:e=e.right;else if(a===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class gn{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??gn.RED,this.left=i??Xn.EMPTY_NODE,this.right=s??Xn.EMPTY_NODE}copy(e,t,r,i,s){return new gn(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i=i.copy(null,t,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Xn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let r,i;if(r=this,t(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),t(e,r.key)===0){if(r.right.isEmpty())return Xn.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,gn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,gn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}gn.RED=!0;gn.BLACK=!1;class y3{copy(e,t,r,i,s){return this}insert(e,t,r){return new gn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Xn{constructor(e,t=Xn.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Xn(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,gn.BLACK,null,null))}remove(e){return new Xn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,gn.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Mc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Mc(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Mc(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Mc(this.root_,null,this.comparator_,!0,e)}}Xn.EMPTY_NODE=new y3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _3(n,e){return Ks(n.name,e.name)}function pp(n,e){return Ks(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bd;function b3(n){Bd=n}const X1=function(n){return typeof n=="number"?"number:"+C1(n):"string:"+n},J1=function(n){if(n.isLeafNode()){const e=n.val();Ae(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ri(e,".sv"),"Priority must be a string or number.")}else Ae(n===Bd||n.isEmpty(),"priority of unexpected type.");Ae(n===Bd||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let N0;class mn{constructor(e,t=mn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Ae(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),J1(this.priorityNode_)}static set __childrenNodeConstructor(e){N0=e}static get __childrenNodeConstructor(){return N0}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new mn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:mn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return dt(e)?this:pt(e)===".priority"?this.priorityNode_:mn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:mn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const r=pt(e);return r===null?t:t.isEmpty()&&r!==".priority"?this:(Ae(r!==".priority"||us(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,mn.__childrenNodeConstructor.EMPTY_NODE.updateChild(Bt(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+X1(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=C1(this.value_):e+=this.value_,this.lazyHash_=A1(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===mn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof mn.__childrenNodeConstructor?-1:(Ae(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,r=typeof this.value_,i=mn.VALUE_TYPE_ORDER.indexOf(t),s=mn.VALUE_TYPE_ORDER.indexOf(r);return Ae(i>=0,"Unknown leaf type: "+t),Ae(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}mn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Q1,Z1;function w3(n){Q1=n}function x3(n){Z1=n}class N3 extends ju{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return s===0?Ks(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return ut.MIN}maxPost(){return new ut(Vs,new mn("[PRIORITY-POST]",Z1))}makePost(e,t){const r=Q1(e);return new ut(t,new mn("[PRIORITY-POST]",r))}toString(){return".priority"}}const Xt=new N3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3=Math.log(2);class A3{constructor(e){const t=s=>parseInt(Math.log(s)/S3,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const fu=function(n,e,t,r){n.sort(e);const i=function(c,u){const f=u-c;let p,v;if(f===0)return null;if(f===1)return p=n[c],v=t?t(p):p,new gn(v,p.node,gn.BLACK,null,null);{const g=parseInt(f/2,10)+c,N=i(c,g),S=i(g+1,u);return p=n[g],v=t?t(p):p,new gn(v,p.node,gn.BLACK,N,S)}},s=function(c){let u=null,f=null,p=n.length;const v=function(N,S){const I=p-N,b=p;p-=N;const A=i(I+1,b),P=n[I],R=t?t(P):P;g(new gn(R,P.node,S,null,A))},g=function(N){u?(u.left=N,u=N):(f=N,u=N)};for(let N=0;N<c.count;++N){const S=c.nextBitIsOne(),I=Math.pow(2,c.count-(N+1));S?v(I,gn.BLACK):(v(I,gn.BLACK),v(I,gn.RED))}return f},a=new A3(n.length),o=s(a);return new Xn(r||e,o)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nd;const La={};class Si{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return Ae(La&&Xt,"ChildrenNode.ts has not been loaded"),nd=nd||new Si({".priority":La},{".priority":Xt}),nd}get(e){const t=Xa(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Xn?t:null}hasIndex(e){return ri(this.indexSet_,e.toString())}addIndex(e,t){Ae(e!==za,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(ut.Wrap);let a=s.getNext();for(;a;)i=i||e.isDefinedOn(a.node),r.push(a),a=s.getNext();let o;i?o=fu(r,e.getCompare()):o=La;const c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;const f=Object.assign({},this.indexes_);return f[c]=o,new Si(f,u)}addToIndexes(e,t){const r=ru(this.indexes_,(i,s)=>{const a=Xa(this.indexSet_,s);if(Ae(a,"Missing index implementation for "+s),i===La)if(a.isDefinedOn(e.node)){const o=[],c=t.getIterator(ut.Wrap);let u=c.getNext();for(;u;)u.name!==e.name&&o.push(u),u=c.getNext();return o.push(e),fu(o,a.getCompare())}else return La;else{const o=t.get(e.name);let c=i;return o&&(c=c.remove(new ut(e.name,o))),c.insert(e,e.node)}});return new Si(r,this.indexSet_)}removeFromIndexes(e,t){const r=ru(this.indexes_,i=>{if(i===La)return i;{const s=t.get(e.name);return s?i.remove(new ut(e.name,s)):i}});return new Si(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $o;class Xe{constructor(e,t,r){this.children_=e,this.priorityNode_=t,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&J1(this.priorityNode_),this.children_.isEmpty()&&Ae(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return $o||($o=new Xe(new Xn(pp),null,Si.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||$o}updatePriority(e){return this.children_.isEmpty()?this:new Xe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?$o:t}}getChild(e){const t=pt(e);return t===null?this:this.getImmediateChild(t).getChild(Bt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(Ae(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const r=new ut(e,t);let i,s;t.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,t),s=this.indexMap_.addToIndexes(r,this.children_));const a=i.isEmpty()?$o:this.priorityNode_;return new Xe(i,a,s)}}updateChild(e,t){const r=pt(e);if(r===null)return t;{Ae(pt(e)!==".priority"||us(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(Bt(e),t);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let r=0,i=0,s=!0;if(this.forEachChild(Xt,(a,o)=>{t[a]=o.val(e),r++,s&&Xe.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):s=!1}),!e&&s&&i<2*r){const a=[];for(const o in t)a[o]=t[o];return a}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+X1(this.getPriority().val())+":"),this.forEachChild(Xt,(t,r)=>{const i=r.hash();i!==""&&(e+=":"+t+":"+i)}),this.lazyHash_=e===""?"":A1(e)}return this.lazyHash_}getPredecessorChildName(e,t,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new ut(e,t));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new ut(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new ut(t,this.children_.get(t)):null}forEachChild(e,t){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>t(i.name,i.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,ut.Wrap);let s=i.peek();for(;s!=null&&t.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,ut.Wrap);let s=i.peek();for(;s!=null&&t.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ol?-1:0}withIndex(e){if(e===za||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Xe(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===za||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const r=this.getIterator(Xt),i=t.getIterator(Xt);let s=r.getNext(),a=i.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=r.getNext(),a=i.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(e){return e===za?null:this.indexMap_.get(e.toString())}}Xe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class k3 extends Xe{constructor(){super(new Xn(pp),Xe.EMPTY_NODE,Si.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Xe.EMPTY_NODE}isEmpty(){return!1}}const Ol=new k3;Object.defineProperties(ut,{MIN:{value:new ut(Za,Xe.EMPTY_NODE)},MAX:{value:new ut(Vs,Ol)}});K1.__EMPTY_NODE=Xe.EMPTY_NODE;mn.__childrenNodeConstructor=Xe;b3(Ol);x3(Ol);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3=!0;function un(n,e=null){if(n===null)return Xe.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),Ae(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new mn(t,un(e))}if(!(n instanceof Array)&&C3){const t=[];let r=!1;if(xn(n,(a,o)=>{if(a.substring(0,1)!=="."){const c=un(o);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),t.push(new ut(a,c)))}}),t.length===0)return Xe.EMPTY_NODE;const s=fu(t,_3,a=>a.name,pp);if(r){const a=fu(t,Xt.getCompare());return new Xe(s,un(e),new Si({".priority":a},{".priority":Xt}))}else return new Xe(s,un(e),Si.Default)}else{let t=Xe.EMPTY_NODE;return xn(n,(r,i)=>{if(ri(n,r)&&r.substring(0,1)!=="."){const s=un(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(un(e))}}w3(un);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3 extends ju{constructor(e){super(),this.indexPath_=e,Ae(!dt(e)&&pt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return s===0?Ks(e.name,t.name):s}makePost(e,t){const r=un(e),i=Xe.EMPTY_NODE.updateChild(this.indexPath_,r);return new ut(t,i)}maxPost(){const e=Xe.EMPTY_NODE.updateChild(this.indexPath_,Ol);return new ut(Vs,e)}toString(){return fl(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3 extends ju{compare(e,t){const r=e.node.compareTo(t.node);return r===0?Ks(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return ut.MIN}maxPost(){return ut.MAX}makePost(e,t){const r=un(e);return new ut(t,r)}toString(){return".value"}}const T3=new I3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(n){return{type:"value",snapshotNode:n}}function eo(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function pl(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function ml(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function L3(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e){this.index_=e}updateChild(e,t,r,i,s,a){Ae(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(i).equals(r.getChild(i))&&o.isEmpty()===r.isEmpty()||(a!=null&&(r.isEmpty()?e.hasChild(t)?a.trackChildChange(pl(t,o)):Ae(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(eo(t,r)):a.trackChildChange(ml(t,r,o))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Xt,(i,s)=>{t.hasChild(i)||r.trackChildChange(pl(i,s))}),t.isLeafNode()||t.forEachChild(Xt,(i,s)=>{if(e.hasChild(i)){const a=e.getImmediateChild(i);a.equals(s)||r.trackChildChange(ml(i,s,a))}else r.trackChildChange(eo(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Xe.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e){this.indexedFilter_=new mp(e.getIndex()),this.index_=e.getIndex(),this.startPost_=gl.getStartPost_(e),this.endPost_=gl.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,a){return this.matches(new ut(t,r))||(r=Xe.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,a)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Xe.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Xe.EMPTY_NODE);const s=this;return t.forEachChild(Xt,(a,o)=>{s.matches(new ut(a,o))||(i=i.updateImmediateChild(a,Xe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new gl(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,a){return this.rangedFilter_.matches(new ut(t,r))||(r=Xe.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,a):this.fullLimitUpdateChild_(e,t,r,s,a)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Xe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){i=Xe.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let a=0;for(;s.hasNext()&&a<this.limit_;){const o=s.getNext();if(this.withinDirectionalStart(o))if(this.withinDirectionalEnd(o))i=i.updateImmediateChild(o.name,o.node),a++;else break;else continue}}else{i=t.withIndex(this.index_),i=i.updatePriority(Xe.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let a=0;for(;s.hasNext();){const o=s.getNext();a<this.limit_&&this.withinDirectionalStart(o)&&this.withinDirectionalEnd(o)?a++:i=i.updateImmediateChild(o.name,Xe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let a;if(this.reverse_){const p=this.index_.getCompare();a=(v,g)=>p(g,v)}else a=this.index_.getCompare();const o=e;Ae(o.numChildren()===this.limit_,"");const c=new ut(t,r),u=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),f=this.rangedFilter_.matches(c);if(o.hasChild(t)){const p=o.getImmediateChild(t);let v=i.getChildAfterChild(this.index_,u,this.reverse_);for(;v!=null&&(v.name===t||o.hasChild(v.name));)v=i.getChildAfterChild(this.index_,v,this.reverse_);const g=v==null?1:a(v,c);if(f&&!r.isEmpty()&&g>=0)return s!=null&&s.trackChildChange(ml(t,r,p)),o.updateImmediateChild(t,r);{s!=null&&s.trackChildChange(pl(t,p));const S=o.updateImmediateChild(t,Xe.EMPTY_NODE);return v!=null&&this.rangedFilter_.matches(v)?(s!=null&&s.trackChildChange(eo(v.name,v.node)),S.updateImmediateChild(v.name,v.node)):S}}else return r.isEmpty()?e:f&&a(u,c)>=0?(s!=null&&(s.trackChildChange(pl(u.name,u.node)),s.trackChildChange(eo(t,r))),o.updateImmediateChild(t,r).updateImmediateChild(u.name,Xe.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Xt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Ae(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ae(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Za}hasEnd(){return this.endSet_}getIndexEndValue(){return Ae(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ae(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Vs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Ae(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Xt}copy(){const e=new gp;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function D3(n){return n.loadsAllData()?new mp(n.getIndex()):n.hasLimit()?new P3(n):new gl(n)}function S0(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Xt?t="$priority":n.index_===T3?t="$value":n.index_===za?t="$key":(Ae(n.index_ instanceof E3,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=hn(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=hn(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+hn(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=hn(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+hn(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function A0(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Xt&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu extends z1{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Dl("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(Ae(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const a=pu.getListenId_(e,r),o={};this.listens_[a]=o;const c=S0(e._queryParams);this.restRequest_(s+".json",c,(u,f)=>{let p=f;if(u===404&&(p=null,u=null),u===null&&this.onDataUpdate_(s,p,!1,r),Xa(this.listens_,a)===o){let v;u?u===401?v="permission_denied":v="rest_error:"+u:v="ok",i(v,null)}})}unlisten(e,t){const r=pu.getListenId_(e,t);delete this.listens_[r]}get(e){const t=S0(e._queryParams),r=e._path.toString(),i=new Cl;return this.restRequest_(r+".json",t,(s,a)=>{let o=a;s===404&&(o=null,s=null),s===null?(this.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+so(t);this.log_("Sending REST request for "+a);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(r&&o.readyState===4){this.log_("REST Response for "+a+" received. status:",o.status,"response:",o.responseText);let c=null;if(o.status>=200&&o.status<300){try{c=ll(o.responseText)}catch{Bn("Failed to parse JSON response for "+a+": "+o.responseText)}r(null,c)}else o.status!==401&&o.status!==404&&Bn("Got unsuccessful REST response for "+a+" Status: "+o.status),r(o.status);r=null}},o.open("GET",a,!0),o.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(){this.rootNode_=Xe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(){return{value:null,children:new Map}}function t2(n,e,t){if(dt(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const r=pt(e);n.children.has(r)||n.children.set(r,mu());const i=n.children.get(r);e=Bt(e),t2(i,e,t)}}function Ud(n,e,t){n.value!==null?t(e,n.value):M3(n,(r,i)=>{const s=new Pt(e.toString()+"/"+r);Ud(i,s,t)})}function M3(n,e){n.children.forEach((t,r)=>{e(r,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&xn(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0=10*1e3,F3=30*1e3,j3=5*60*1e3;class B3{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new R3(e);const r=k0+(F3-k0)*Math.random();rl(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;xn(e,(i,s)=>{s>0&&ri(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),rl(this.reportStats_.bind(this),Math.floor(Math.random()*2*j3))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Or;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Or||(Or={}));function vp(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function yp(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function _p(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Or.ACK_USER_WRITE,this.source=vp()}operationForChild(e){if(dt(this.path)){if(this.affectedTree.value!=null)return Ae(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Pt(e));return new gu(_t(),t,this.revert)}}else return Ae(pt(this.path)===e,"operationForChild called for unrelated child."),new gu(Bt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,t){this.source=e,this.path=t,this.type=Or.LISTEN_COMPLETE}operationForChild(e){return dt(this.path)?new vl(this.source,_t()):new vl(this.source,Bt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Or.OVERWRITE}operationForChild(e){return dt(this.path)?new Ws(this.source,_t(),this.snap.getImmediateChild(e)):new Ws(this.source,Bt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Or.MERGE}operationForChild(e){if(dt(this.path)){const t=this.children.subtree(new Pt(e));return t.isEmpty()?null:t.value?new Ws(this.source,_t(),t.value):new to(this.source,_t(),t)}else return Ae(pt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new to(this.source,Bt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(dt(e))return this.isFullyInitialized()&&!this.filtered_;const t=pt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function q3(n,e,t,r){const i=[],s=[];return e.forEach(a=>{a.type==="child_changed"&&n.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&s.push(L3(a.childName,a.snapshotNode))}),Go(n,i,"child_removed",e,r,t),Go(n,i,"child_added",e,r,t),Go(n,i,"child_moved",s,r,t),Go(n,i,"child_changed",e,r,t),Go(n,i,"value",e,r,t),i}function Go(n,e,t,r,i,s){const a=r.filter(o=>o.type===t);a.sort((o,c)=>W3(n,o,c)),a.forEach(o=>{const c=V3(n,o,s);i.forEach(u=>{u.respondsTo(o.type)&&e.push(u.createEvent(c,n.query_))})})}function V3(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function W3(n,e,t){if(e.childName==null||t.childName==null)throw io("Should only compare child_ events.");const r=new ut(e.childName,e.snapshotNode),i=new ut(t.childName,t.snapshotNode);return n.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(n,e){return{eventCache:n,serverCache:e}}function il(n,e,t,r){return Bu(new hs(e,t,r),n.serverCache)}function n2(n,e,t,r){return Bu(n.eventCache,new hs(e,t,r))}function vu(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function zs(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rd;const z3=()=>(rd||(rd=new Xn(Ex)),rd);class jt{constructor(e,t=z3()){this.value=e,this.children=t}static fromObject(e){let t=new jt(null);return xn(e,(r,i)=>{t=t.set(new Pt(r),i)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:_t(),value:this.value};if(dt(e))return null;{const r=pt(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(Bt(e),t);return s!=null?{path:Kt(new Pt(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(dt(e))return this;{const t=pt(e),r=this.children.get(t);return r!==null?r.subtree(Bt(e)):new jt(null)}}set(e,t){if(dt(e))return new jt(t,this.children);{const r=pt(e),s=(this.children.get(r)||new jt(null)).set(Bt(e),t),a=this.children.insert(r,s);return new jt(this.value,a)}}remove(e){if(dt(e))return this.children.isEmpty()?new jt(null):new jt(null,this.children);{const t=pt(e),r=this.children.get(t);if(r){const i=r.remove(Bt(e));let s;return i.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,i),this.value===null&&s.isEmpty()?new jt(null):new jt(this.value,s)}else return this}}get(e){if(dt(e))return this.value;{const t=pt(e),r=this.children.get(t);return r?r.get(Bt(e)):null}}setTree(e,t){if(dt(e))return t;{const r=pt(e),s=(this.children.get(r)||new jt(null)).setTree(Bt(e),t);let a;return s.isEmpty()?a=this.children.remove(r):a=this.children.insert(r,s),new jt(this.value,a)}}fold(e){return this.fold_(_t(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Kt(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,_t(),t)}findOnPath_(e,t,r){const i=this.value?r(t,this.value):!1;if(i)return i;if(dt(e))return null;{const s=pt(e),a=this.children.get(s);return a?a.findOnPath_(Bt(e),Kt(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,_t(),t)}foreachOnPath_(e,t,r){if(dt(e))return this;{this.value&&r(t,this.value);const i=pt(e),s=this.children.get(i);return s?s.foreachOnPath_(Bt(e),Kt(t,i),r):new jt(null)}}foreach(e){this.foreach_(_t(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Kt(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e){this.writeTree_=e}static empty(){return new Mr(new jt(null))}}function sl(n,e,t){if(dt(e))return new Mr(new jt(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const a=jn(i,e);return s=s.updateChild(a,t),new Mr(n.writeTree_.set(i,s))}else{const i=new jt(t),s=n.writeTree_.setTree(e,i);return new Mr(s)}}}function qd(n,e,t){let r=n;return xn(t,(i,s)=>{r=sl(r,Kt(e,i),s)}),r}function C0(n,e){if(dt(e))return Mr.empty();{const t=n.writeTree_.setTree(e,new jt(null));return new Mr(t)}}function Vd(n,e){return Xs(n,e)!=null}function Xs(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(jn(t.path,e)):null}function E0(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Xt,(r,i)=>{e.push(new ut(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new ut(r,i.value))}),e}function os(n,e){if(dt(e))return n;{const t=Xs(n,e);return t!=null?new Mr(new jt(t)):new Mr(n.writeTree_.subtree(e))}}function Wd(n){return n.writeTree_.isEmpty()}function no(n,e){return r2(_t(),n.writeTree_,e)}function r2(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(Ae(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):t=r2(Kt(n,i),s,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(Kt(n,".priority"),r)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(n,e){return o2(e,n)}function H3(n,e,t,r,i){Ae(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=sl(n.visibleWrites,e,t)),n.lastWriteId=r}function $3(n,e,t,r){Ae(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=qd(n.visibleWrites,e,t),n.lastWriteId=r}function G3(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}function Y3(n,e){const t=n.allWrites.findIndex(o=>o.writeId===e);Ae(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,a=n.allWrites.length-1;for(;i&&a>=0;){const o=n.allWrites[a];o.visible&&(a>=t&&K3(o,r.path)?i=!1:vr(r.path,o.path)&&(s=!0)),a--}if(i){if(s)return X3(n),!0;if(r.snap)n.visibleWrites=C0(n.visibleWrites,r.path);else{const o=r.children;xn(o,c=>{n.visibleWrites=C0(n.visibleWrites,Kt(r.path,c))})}return!0}else return!1}function K3(n,e){if(n.snap)return vr(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&vr(Kt(n.path,t),e))return!0;return!1}function X3(n){n.visibleWrites=i2(n.allWrites,J3,_t()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function J3(n){return n.visible}function i2(n,e,t){let r=Mr.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const a=s.path;let o;if(s.snap)vr(t,a)?(o=jn(t,a),r=sl(r,o,s.snap)):vr(a,t)&&(o=jn(a,t),r=sl(r,_t(),s.snap.getChild(o)));else if(s.children){if(vr(t,a))o=jn(t,a),r=qd(r,o,s.children);else if(vr(a,t))if(o=jn(a,t),dt(o))r=qd(r,_t(),s.children);else{const c=Xa(s.children,pt(o));if(c){const u=c.getChild(Bt(o));r=sl(r,_t(),u)}}}else throw io("WriteRecord should have .snap or .children")}}return r}function s2(n,e,t,r,i){if(!r&&!i){const s=Xs(n.visibleWrites,e);if(s!=null)return s;{const a=os(n.visibleWrites,e);if(Wd(a))return t;if(t==null&&!Vd(a,_t()))return null;{const o=t||Xe.EMPTY_NODE;return no(a,o)}}}else{const s=os(n.visibleWrites,e);if(!i&&Wd(s))return t;if(!i&&t==null&&!Vd(s,_t()))return null;{const a=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(vr(u.path,e)||vr(e,u.path))},o=i2(n.allWrites,a,e),c=t||Xe.EMPTY_NODE;return no(o,c)}}}function Q3(n,e,t){let r=Xe.EMPTY_NODE;const i=Xs(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Xt,(s,a)=>{r=r.updateImmediateChild(s,a)}),r;if(t){const s=os(n.visibleWrites,e);return t.forEachChild(Xt,(a,o)=>{const c=no(os(s,new Pt(a)),o);r=r.updateImmediateChild(a,c)}),E0(s).forEach(a=>{r=r.updateImmediateChild(a.name,a.node)}),r}else{const s=os(n.visibleWrites,e);return E0(s).forEach(a=>{r=r.updateImmediateChild(a.name,a.node)}),r}}function Z3(n,e,t,r,i){Ae(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Kt(e,t);if(Vd(n.visibleWrites,s))return null;{const a=os(n.visibleWrites,s);return Wd(a)?i.getChild(t):no(a,i.getChild(t))}}function e4(n,e,t,r){const i=Kt(e,t),s=Xs(n.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(t)){const a=os(n.visibleWrites,i);return no(a,r.getNode().getImmediateChild(t))}else return null}function t4(n,e){return Xs(n.visibleWrites,e)}function n4(n,e,t,r,i,s,a){let o;const c=os(n.visibleWrites,e),u=Xs(c,_t());if(u!=null)o=u;else if(t!=null)o=no(c,t);else return[];if(o=o.withIndex(a),!o.isEmpty()&&!o.isLeafNode()){const f=[],p=a.getCompare(),v=s?o.getReverseIteratorFrom(r,a):o.getIteratorFrom(r,a);let g=v.getNext();for(;g&&f.length<i;)p(g,r)!==0&&f.push(g),g=v.getNext();return f}else return[]}function r4(){return{visibleWrites:Mr.empty(),allWrites:[],lastWriteId:-1}}function yu(n,e,t,r){return s2(n.writeTree,n.treePath,e,t,r)}function bp(n,e){return Q3(n.writeTree,n.treePath,e)}function I0(n,e,t,r){return Z3(n.writeTree,n.treePath,e,t,r)}function _u(n,e){return t4(n.writeTree,Kt(n.treePath,e))}function i4(n,e,t,r,i,s){return n4(n.writeTree,n.treePath,e,t,r,i,s)}function wp(n,e,t){return e4(n.writeTree,n.treePath,e,t)}function a2(n,e){return o2(Kt(n.treePath,e),n.writeTree)}function o2(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;Ae(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),Ae(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(r,ml(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(r,pl(r,i.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(r,eo(r,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(r,ml(r,e.snapshotNode,i.oldSnap));else throw io("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}}const l2=new a4;class xp{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new hs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return wp(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:zs(this.viewCache_),s=i4(this.writes_,i,t,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o4(n){return{filter:n}}function l4(n,e){Ae(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),Ae(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function c4(n,e,t,r,i){const s=new s4;let a,o;if(t.type===Or.OVERWRITE){const u=t;u.source.fromUser?a=zd(n,e,u.path,u.snap,r,i,s):(Ae(u.source.fromServer,"Unknown source."),o=u.source.tagged||e.serverCache.isFiltered()&&!dt(u.path),a=bu(n,e,u.path,u.snap,r,i,o,s))}else if(t.type===Or.MERGE){const u=t;u.source.fromUser?a=h4(n,e,u.path,u.children,r,i,s):(Ae(u.source.fromServer,"Unknown source."),o=u.source.tagged||e.serverCache.isFiltered(),a=Hd(n,e,u.path,u.children,r,i,o,s))}else if(t.type===Or.ACK_USER_WRITE){const u=t;u.revert?a=p4(n,e,u.path,r,i,s):a=d4(n,e,u.path,u.affectedTree,r,i,s)}else if(t.type===Or.LISTEN_COMPLETE)a=f4(n,e,t.path,r,s);else throw io("Unknown operation type: "+t.type);const c=s.getChanges();return u4(e,a,c),{viewCache:a,changes:c}}function u4(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=vu(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(e2(vu(e)))}}function c2(n,e,t,r,i,s){const a=e.eventCache;if(_u(r,t)!=null)return e;{let o,c;if(dt(t))if(Ae(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=zs(e),f=u instanceof Xe?u:Xe.EMPTY_NODE,p=bp(r,f);o=n.filter.updateFullNode(e.eventCache.getNode(),p,s)}else{const u=yu(r,zs(e));o=n.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=pt(t);if(u===".priority"){Ae(us(t)===1,"Can't have a priority with additional path components");const f=a.getNode();c=e.serverCache.getNode();const p=I0(r,t,f,c);p!=null?o=n.filter.updatePriority(f,p):o=a.getNode()}else{const f=Bt(t);let p;if(a.isCompleteForChild(u)){c=e.serverCache.getNode();const v=I0(r,t,a.getNode(),c);v!=null?p=a.getNode().getImmediateChild(u).updateChild(f,v):p=a.getNode().getImmediateChild(u)}else p=wp(r,u,e.serverCache);p!=null?o=n.filter.updateChild(a.getNode(),u,p,f,i,s):o=a.getNode()}}return il(e,o,a.isFullyInitialized()||dt(t),n.filter.filtersNodes())}}function bu(n,e,t,r,i,s,a,o){const c=e.serverCache;let u;const f=a?n.filter:n.filter.getIndexedFilter();if(dt(t))u=f.updateFullNode(c.getNode(),r,null);else if(f.filtersNodes()&&!c.isFiltered()){const g=c.getNode().updateChild(t,r);u=f.updateFullNode(c.getNode(),g,null)}else{const g=pt(t);if(!c.isCompleteForPath(t)&&us(t)>1)return e;const N=Bt(t),I=c.getNode().getImmediateChild(g).updateChild(N,r);g===".priority"?u=f.updatePriority(c.getNode(),I):u=f.updateChild(c.getNode(),g,I,N,l2,null)}const p=n2(e,u,c.isFullyInitialized()||dt(t),f.filtersNodes()),v=new xp(i,p,s);return c2(n,p,t,i,v,o)}function zd(n,e,t,r,i,s,a){const o=e.eventCache;let c,u;const f=new xp(i,e,s);if(dt(t))u=n.filter.updateFullNode(e.eventCache.getNode(),r,a),c=il(e,u,!0,n.filter.filtersNodes());else{const p=pt(t);if(p===".priority")u=n.filter.updatePriority(e.eventCache.getNode(),r),c=il(e,u,o.isFullyInitialized(),o.isFiltered());else{const v=Bt(t),g=o.getNode().getImmediateChild(p);let N;if(dt(v))N=r;else{const S=f.getCompleteChild(p);S!=null?dp(v)===".priority"&&S.getChild($1(v)).isEmpty()?N=S:N=S.updateChild(v,r):N=Xe.EMPTY_NODE}if(g.equals(N))c=e;else{const S=n.filter.updateChild(o.getNode(),p,N,v,f,a);c=il(e,S,o.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function T0(n,e){return n.eventCache.isCompleteForChild(e)}function h4(n,e,t,r,i,s,a){let o=e;return r.foreach((c,u)=>{const f=Kt(t,c);T0(e,pt(f))&&(o=zd(n,o,f,u,i,s,a))}),r.foreach((c,u)=>{const f=Kt(t,c);T0(e,pt(f))||(o=zd(n,o,f,u,i,s,a))}),o}function L0(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Hd(n,e,t,r,i,s,a,o){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;dt(t)?u=r:u=new jt(null).setTree(t,r);const f=e.serverCache.getNode();return u.children.inorderTraversal((p,v)=>{if(f.hasChild(p)){const g=e.serverCache.getNode().getImmediateChild(p),N=L0(n,g,v);c=bu(n,c,new Pt(p),N,i,s,a,o)}}),u.children.inorderTraversal((p,v)=>{const g=!e.serverCache.isCompleteForChild(p)&&v.value===null;if(!f.hasChild(p)&&!g){const N=e.serverCache.getNode().getImmediateChild(p),S=L0(n,N,v);c=bu(n,c,new Pt(p),S,i,s,a,o)}}),c}function d4(n,e,t,r,i,s,a){if(_u(i,t)!=null)return e;const o=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(dt(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return bu(n,e,t,c.getNode().getChild(t),i,s,o,a);if(dt(t)){let u=new jt(null);return c.getNode().forEachChild(za,(f,p)=>{u=u.set(new Pt(f),p)}),Hd(n,e,t,u,i,s,o,a)}else return e}else{let u=new jt(null);return r.foreach((f,p)=>{const v=Kt(t,f);c.isCompleteForPath(v)&&(u=u.set(f,c.getNode().getChild(v)))}),Hd(n,e,t,u,i,s,o,a)}}function f4(n,e,t,r,i){const s=e.serverCache,a=n2(e,s.getNode(),s.isFullyInitialized()||dt(t),s.isFiltered());return c2(n,a,t,r,l2,i)}function p4(n,e,t,r,i,s){let a;if(_u(r,t)!=null)return e;{const o=new xp(r,e,i),c=e.eventCache.getNode();let u;if(dt(t)||pt(t)===".priority"){let f;if(e.serverCache.isFullyInitialized())f=yu(r,zs(e));else{const p=e.serverCache.getNode();Ae(p instanceof Xe,"serverChildren would be complete if leaf node"),f=bp(r,p)}f=f,u=n.filter.updateFullNode(c,f,s)}else{const f=pt(t);let p=wp(r,f,e.serverCache);p==null&&e.serverCache.isCompleteForChild(f)&&(p=c.getImmediateChild(f)),p!=null?u=n.filter.updateChild(c,f,p,Bt(t),o,s):e.eventCache.getNode().hasChild(f)?u=n.filter.updateChild(c,f,Xe.EMPTY_NODE,Bt(t),o,s):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(a=yu(r,zs(e)),a.isLeafNode()&&(u=n.filter.updateFullNode(u,a,s)))}return a=e.serverCache.isFullyInitialized()||_u(r,_t())!=null,il(e,u,a,n.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new mp(r.getIndex()),s=D3(r);this.processor_=o4(s);const a=t.serverCache,o=t.eventCache,c=i.updateFullNode(Xe.EMPTY_NODE,a.getNode(),null),u=s.updateFullNode(Xe.EMPTY_NODE,o.getNode(),null),f=new hs(c,a.isFullyInitialized(),i.filtersNodes()),p=new hs(u,o.isFullyInitialized(),s.filtersNodes());this.viewCache_=Bu(p,f),this.eventGenerator_=new U3(this.query_)}get query(){return this.query_}}function g4(n){return n.viewCache_.serverCache.getNode()}function v4(n){return vu(n.viewCache_)}function y4(n,e){const t=zs(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!dt(e)&&!t.getImmediateChild(pt(e)).isEmpty())?t.getChild(e):null}function P0(n){return n.eventRegistrations_.length===0}function _4(n,e){n.eventRegistrations_.push(e)}function D0(n,e,t){const r=[];if(t){Ae(e==null,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const a=s.createCancelEvent(t,i);a&&r.push(a)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const a=n.eventRegistrations_[s];if(!a.matches(e))i.push(a);else if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function O0(n,e,t,r){e.type===Or.MERGE&&e.source.queryId!==null&&(Ae(zs(n.viewCache_),"We should always have a full cache before handling merges"),Ae(vu(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=c4(n.processor_,i,e,t,r);return l4(n.processor_,s.viewCache),Ae(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,u2(n,s.changes,s.viewCache.eventCache.getNode(),null)}function b4(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Xt,(s,a)=>{r.push(eo(s,a))}),t.isFullyInitialized()&&r.push(e2(t.getNode())),u2(n,r,t.getNode(),e)}function u2(n,e,t,r){const i=r?[r]:n.eventRegistrations_;return q3(n.eventGenerator_,e,t,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wu;class h2{constructor(){this.views=new Map}}function w4(n){Ae(!wu,"__referenceConstructor has already been defined"),wu=n}function x4(){return Ae(wu,"Reference.ts has not been loaded"),wu}function N4(n){return n.views.size===0}function Np(n,e,t,r){const i=e.source.queryId;if(i!==null){const s=n.views.get(i);return Ae(s!=null,"SyncTree gave us an op for an invalid query."),O0(s,e,t,r)}else{let s=[];for(const a of n.views.values())s=s.concat(O0(a,e,t,r));return s}}function d2(n,e,t,r,i){const s=e._queryIdentifier,a=n.views.get(s);if(!a){let o=yu(t,i?r:null),c=!1;o?c=!0:r instanceof Xe?(o=bp(t,r),c=!1):(o=Xe.EMPTY_NODE,c=!1);const u=Bu(new hs(o,c,!1),new hs(r,i,!1));return new m4(e,u)}return a}function S4(n,e,t,r,i,s){const a=d2(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,a),_4(a,t),b4(a,t)}function A4(n,e,t,r){const i=e._queryIdentifier,s=[];let a=[];const o=ds(n);if(i==="default")for(const[c,u]of n.views.entries())a=a.concat(D0(u,t,r)),P0(u)&&(n.views.delete(c),u.query._queryParams.loadsAllData()||s.push(u.query));else{const c=n.views.get(i);c&&(a=a.concat(D0(c,t,r)),P0(c)&&(n.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return o&&!ds(n)&&s.push(new(x4())(e._repo,e._path)),{removed:s,events:a}}function f2(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function ls(n,e){let t=null;for(const r of n.views.values())t=t||y4(r,e);return t}function p2(n,e){if(e._queryParams.loadsAllData())return qu(n);{const r=e._queryIdentifier;return n.views.get(r)}}function m2(n,e){return p2(n,e)!=null}function ds(n){return qu(n)!=null}function qu(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xu;function k4(n){Ae(!xu,"__referenceConstructor has already been defined"),xu=n}function C4(){return Ae(xu,"Reference.ts has not been loaded"),xu}let E4=1;class M0{constructor(e){this.listenProvider_=e,this.syncPointTree_=new jt(null),this.pendingWriteTree_=r4(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function g2(n,e,t,r,i){return H3(n.pendingWriteTree_,e,t,r,i),i?uo(n,new Ws(vp(),e,t)):[]}function I4(n,e,t,r){$3(n.pendingWriteTree_,e,t,r);const i=jt.fromObject(t);return uo(n,new to(vp(),e,i))}function ts(n,e,t=!1){const r=G3(n.pendingWriteTree_,e);if(Y3(n.pendingWriteTree_,e)){let s=new jt(null);return r.snap!=null?s=s.set(_t(),!0):xn(r.children,a=>{s=s.set(new Pt(a),!0)}),uo(n,new gu(r.path,s,t))}else return[]}function Ml(n,e,t){return uo(n,new Ws(yp(),e,t))}function T4(n,e,t){const r=jt.fromObject(t);return uo(n,new to(yp(),e,r))}function L4(n,e){return uo(n,new vl(yp(),e))}function P4(n,e,t){const r=Ap(n,t);if(r){const i=kp(r),s=i.path,a=i.queryId,o=jn(s,e),c=new vl(_p(a),o);return Cp(n,s,c)}else return[]}function v2(n,e,t,r,i=!1){const s=e._path,a=n.syncPointTree_.get(s);let o=[];if(a&&(e._queryIdentifier==="default"||m2(a,e))){const c=A4(a,e,t,r);N4(a)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const u=c.removed;if(o=c.events,!i){const f=u.findIndex(v=>v._queryParams.loadsAllData())!==-1,p=n.syncPointTree_.findOnPath(s,(v,g)=>ds(g));if(f&&!p){const v=n.syncPointTree_.subtree(s);if(!v.isEmpty()){const g=R4(v);for(let N=0;N<g.length;++N){const S=g[N],I=S.query,b=w2(n,S);n.listenProvider_.startListening(al(I),yl(n,I),b.hashFn,b.onComplete)}}}!p&&u.length>0&&!r&&(f?n.listenProvider_.stopListening(al(e),null):u.forEach(v=>{const g=n.queryToTagMap.get(Vu(v));n.listenProvider_.stopListening(al(v),g)}))}F4(n,u)}return o}function y2(n,e,t,r){const i=Ap(n,r);if(i!=null){const s=kp(i),a=s.path,o=s.queryId,c=jn(a,e),u=new Ws(_p(o),c,t);return Cp(n,a,u)}else return[]}function D4(n,e,t,r){const i=Ap(n,r);if(i){const s=kp(i),a=s.path,o=s.queryId,c=jn(a,e),u=jt.fromObject(t),f=new to(_p(o),c,u);return Cp(n,a,f)}else return[]}function O4(n,e,t,r=!1){const i=e._path;let s=null,a=!1;n.syncPointTree_.foreachOnPath(i,(v,g)=>{const N=jn(v,i);s=s||ls(g,N),a=a||ds(g)});let o=n.syncPointTree_.get(i);o?(a=a||ds(o),s=s||ls(o,_t())):(o=new h2,n.syncPointTree_=n.syncPointTree_.set(i,o));let c;s!=null?c=!0:(c=!1,s=Xe.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((g,N)=>{const S=ls(N,_t());S&&(s=s.updateImmediateChild(g,S))}));const u=m2(o,e);if(!u&&!e._queryParams.loadsAllData()){const v=Vu(e);Ae(!n.queryToTagMap.has(v),"View does not exist, but we have a tag");const g=j4();n.queryToTagMap.set(v,g),n.tagToQueryMap.set(g,v)}const f=Uu(n.pendingWriteTree_,i);let p=S4(o,e,t,f,s,c);if(!u&&!a&&!r){const v=p2(o,e);p=p.concat(B4(n,e,v))}return p}function Sp(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(a,o)=>{const c=jn(a,e),u=ls(o,c);if(u)return u});return s2(i,e,s,t,!0)}function M4(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(u,f)=>{const p=jn(u,t);r=r||ls(f,p)});let i=n.syncPointTree_.get(t);i?r=r||ls(i,_t()):(i=new h2,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=r!=null,a=s?new hs(r,!0,!1):null,o=Uu(n.pendingWriteTree_,e._path),c=d2(i,e,o,s?a.getNode():Xe.EMPTY_NODE,s);return v4(c)}function uo(n,e){return _2(e,n.syncPointTree_,null,Uu(n.pendingWriteTree_,_t()))}function _2(n,e,t,r){if(dt(n.path))return b2(n,e,t,r);{const i=e.get(_t());t==null&&i!=null&&(t=ls(i,_t()));let s=[];const a=pt(n.path),o=n.operationForChild(a),c=e.children.get(a);if(c&&o){const u=t?t.getImmediateChild(a):null,f=a2(r,a);s=s.concat(_2(o,c,u,f))}return i&&(s=s.concat(Np(i,n,r,t))),s}}function b2(n,e,t,r){const i=e.get(_t());t==null&&i!=null&&(t=ls(i,_t()));let s=[];return e.children.inorderTraversal((a,o)=>{const c=t?t.getImmediateChild(a):null,u=a2(r,a),f=n.operationForChild(a);f&&(s=s.concat(b2(f,o,c,u)))}),i&&(s=s.concat(Np(i,n,r,t))),s}function w2(n,e){const t=e.query,r=yl(n,t);return{hashFn:()=>(g4(e)||Xe.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?P4(n,t._path,r):L4(n,t._path);{const s=Lx(i,t);return v2(n,t,null,s)}}}}function yl(n,e){const t=Vu(e);return n.queryToTagMap.get(t)}function Vu(n){return n._path.toString()+"$"+n._queryIdentifier}function Ap(n,e){return n.tagToQueryMap.get(e)}function kp(n){const e=n.indexOf("$");return Ae(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Pt(n.substr(0,e))}}function Cp(n,e,t){const r=n.syncPointTree_.get(e);Ae(r,"Missing sync point for query tag that we're tracking");const i=Uu(n.pendingWriteTree_,e);return Np(r,t,i,null)}function R4(n){return n.fold((e,t,r)=>{if(t&&ds(t))return[qu(t)];{let i=[];return t&&(i=f2(t)),xn(r,(s,a)=>{i=i.concat(a)}),i}})}function al(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(C4())(n._repo,n._path):n}function F4(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=Vu(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}function j4(){return E4++}function B4(n,e,t){const r=e._path,i=yl(n,e),s=w2(n,t),a=n.listenProvider_.startListening(al(e),i,s.hashFn,s.onComplete),o=n.syncPointTree_.subtree(r);if(i)Ae(!ds(o.value),"If we're adding a query, it shouldn't be shadowed");else{const c=o.fold((u,f,p)=>{if(!dt(u)&&f&&ds(f))return[qu(f).query];{let v=[];return f&&(v=v.concat(f2(f).map(g=>g.query))),xn(p,(g,N)=>{v=v.concat(N)}),v}});for(let u=0;u<c.length;++u){const f=c[u];n.listenProvider_.stopListening(al(f),yl(n,f))}}return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Ep(t)}node(){return this.node_}}class Ip{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Kt(this.path_,e);return new Ip(this.syncTree_,t)}node(){return Sp(this.syncTree_,this.path_)}}const U4=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},R0=function(n,e,t){if(!n||typeof n!="object")return n;if(Ae(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return q4(n[".sv"],e,t);if(typeof n[".sv"]=="object")return V4(n[".sv"],e);Ae(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},q4=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:Ae(!1,"Unexpected server value: "+n)}},V4=function(n,e,t){n.hasOwnProperty("increment")||Ae(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;typeof r!="number"&&Ae(!1,"Unexpected increment value: "+r);const i=e.node();if(Ae(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const a=i.getValue();return typeof a!="number"?r:a+r},x2=function(n,e,t,r){return Tp(e,new Ip(t,n),r)},N2=function(n,e,t){return Tp(n,new Ep(e),t)};function Tp(n,e,t){const r=n.getPriority().val(),i=R0(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const a=n,o=R0(a.getValue(),e,t);return o!==a.getValue()||i!==a.getPriority().val()?new mn(o,un(i)):n}else{const a=n;return s=a,i!==a.getPriority().val()&&(s=s.updatePriority(new mn(i))),a.forEachChild(Xt,(o,c)=>{const u=Tp(c,e.getImmediateChild(o),t);u!==c&&(s=s.updateImmediateChild(o,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Pp(n,e){let t=e instanceof Pt?e:new Pt(e),r=n,i=pt(t);for(;i!==null;){const s=Xa(r.node.children,i)||{children:{},childCount:0};r=new Lp(i,r,s),t=Bt(t),i=pt(t)}return r}function ho(n){return n.node.value}function S2(n,e){n.node.value=e,$d(n)}function A2(n){return n.node.childCount>0}function W4(n){return ho(n)===void 0&&!A2(n)}function Wu(n,e){xn(n.node.children,(t,r)=>{e(new Lp(t,n,r))})}function k2(n,e,t,r){t&&!r&&e(n),Wu(n,i=>{k2(i,e,!0,r)}),t&&r&&e(n)}function z4(n,e,t){let r=n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Rl(n){return new Pt(n.parent===null?n.name:Rl(n.parent)+"/"+n.name)}function $d(n){n.parent!==null&&H4(n.parent,n.name,n)}function H4(n,e,t){const r=W4(t),i=ri(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,$d(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,$d(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4=/[\[\].#$\/\u0000-\u001F\u007F]/,G4=/[\[\].#$\u0000-\u001F\u007F]/,id=10*1024*1024,Dp=function(n){return typeof n=="string"&&n.length!==0&&!$4.test(n)},C2=function(n){return typeof n=="string"&&n.length!==0&&!G4.test(n)},Y4=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),C2(n)},K4=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!op(n)||n&&typeof n=="object"&&ri(n,".sv")},E2=function(n,e,t,r){r&&e===void 0||zu(Pu(n,"value"),e,t)},zu=function(n,e,t){const r=t instanceof Pt?new h3(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Ds(r));if(typeof e=="function")throw new Error(n+"contains a function "+Ds(r)+" with contents = "+e.toString());if(op(e))throw new Error(n+"contains "+e.toString()+" "+Ds(r));if(typeof e=="string"&&e.length>id/3&&Du(e)>id)throw new Error(n+"contains a string greater than "+id+" utf8 bytes "+Ds(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(xn(e,(a,o)=>{if(a===".value")i=!0;else if(a!==".priority"&&a!==".sv"&&(s=!0,!Dp(a)))throw new Error(n+" contains an invalid key ("+a+") "+Ds(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);d3(r,a),zu(n,o,r),f3(r)}),i&&s)throw new Error(n+' contains ".value" child '+Ds(r)+" in addition to actual children.")}},X4=function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=fl(r);for(let a=0;a<s.length;a++)if(!(s[a]===".priority"&&a===s.length-1)){if(!Dp(s[a]))throw new Error(n+"contains an invalid key ("+s[a]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(u3);let i=null;for(t=0;t<e.length;t++){if(r=e[t],i!==null&&vr(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},J4=function(n,e,t,r){const i=Pu(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];xn(e,(a,o)=>{const c=new Pt(a);if(zu(i,o,Kt(t,c)),dp(c)===".priority"&&!K4(o))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(c)}),X4(i,s)},I2=function(n,e,t,r){if(!C2(t))throw new Error(Pu(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Q4=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),I2(n,e,t)},T2=function(n,e){if(pt(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},Z4=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Dp(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!Y4(t))throw new Error(Pu(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Op(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();t!==null&&!G1(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function yr(n,e,t){Op(n,t),tN(n,r=>vr(r,e)||vr(e,r))}function tN(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];if(i){const s=i.path;e(s)?(nN(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function nN(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const r=t.getEventRunner();nl&&wn("event: "+t.toString()),co(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN="repo_interrupt",iN=25;class sN{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new eN,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=mu(),this.transactionQueueTree_=new Lp,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function aN(n,e,t){if(n.stats_=up(n.repoInfo_),n.forceRestClient_||Mx())n.server_=new pu(n.repoInfo_,(r,i,s,a)=>{F0(n,r,i,s,a)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>j0(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{hn(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Ai(n.repoInfo_,e,(r,i,s,a)=>{F0(n,r,i,s,a)},r=>{j0(n,r)},r=>{oN(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=Ux(n.repoInfo_,()=>new B3(n.stats_,n.server_)),n.infoData_=new O3,n.infoSyncTree_=new M0({startListening:(r,i,s,a)=>{let o=[];const c=n.infoData_.getNode(r._path);return c.isEmpty()||(o=Ml(n.infoSyncTree_,r._path,c),setTimeout(()=>{a("ok")},0)),o},stopListening:()=>{}}),Mp(n,"connected",!1),n.serverSyncTree_=new M0({startListening:(r,i,s,a)=>(n.server_.listen(r,s,i,(o,c)=>{const u=a(o,c);yr(n.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function L2(n){const t=n.infoData_.getNode(new Pt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function Hu(n){return U4({timestamp:L2(n)})}function F0(n,e,t,r,i){n.dataUpdateCount++;const s=new Pt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let a=[];if(i)if(r){const c=ru(t,u=>un(u));a=D4(n.serverSyncTree_,s,c,i)}else{const c=un(t);a=y2(n.serverSyncTree_,s,c,i)}else if(r){const c=ru(t,u=>un(u));a=T4(n.serverSyncTree_,s,c)}else{const c=un(t);a=Ml(n.serverSyncTree_,s,c)}let o=s;a.length>0&&(o=ro(n,s)),yr(n.eventQueue_,o,a)}function j0(n,e){Mp(n,"connected",e),e===!1&&hN(n)}function oN(n,e){xn(e,(t,r)=>{Mp(n,t,r)})}function Mp(n,e,t){const r=new Pt("/.info/"+e),i=un(t);n.infoData_.updateSnapshot(r,i);const s=Ml(n.infoSyncTree_,r,i);yr(n.eventQueue_,r,s)}function Rp(n){return n.nextWriteId_++}function lN(n,e,t){const r=M4(n.serverSyncTree_,e);return r!=null?Promise.resolve(r):n.server_.get(e).then(i=>{const s=un(i).withIndex(e._queryParams.getIndex());O4(n.serverSyncTree_,e,t,!0);let a;if(e._queryParams.loadsAllData())a=Ml(n.serverSyncTree_,e._path,s);else{const o=yl(n.serverSyncTree_,e);a=y2(n.serverSyncTree_,e._path,s,o)}return yr(n.eventQueue_,e._path,a),v2(n.serverSyncTree_,e,t,null,!0),s},i=>(Fl(n,"get for query "+hn(e)+" failed: "+i),Promise.reject(new Error(i))))}function cN(n,e,t,r,i){Fl(n,"set",{path:e.toString(),value:t,priority:r});const s=Hu(n),a=un(t,r),o=Sp(n.serverSyncTree_,e),c=N2(a,o,s),u=Rp(n),f=g2(n.serverSyncTree_,e,c,u,!0);Op(n.eventQueue_,f),n.server_.put(e.toString(),a.val(!0),(v,g)=>{const N=v==="ok";N||Bn("set at "+e+" failed: "+v);const S=ts(n.serverSyncTree_,u,!N);yr(n.eventQueue_,e,S),Gd(n,i,v,g)});const p=jp(n,e);ro(n,p),yr(n.eventQueue_,p,[])}function uN(n,e,t,r){Fl(n,"update",{path:e.toString(),value:t});let i=!0;const s=Hu(n),a={};if(xn(t,(o,c)=>{i=!1,a[o]=x2(Kt(e,o),un(c),n.serverSyncTree_,s)}),i)wn("update() called with empty data.  Don't do anything."),Gd(n,r,"ok",void 0);else{const o=Rp(n),c=I4(n.serverSyncTree_,e,a,o);Op(n.eventQueue_,c),n.server_.merge(e.toString(),t,(u,f)=>{const p=u==="ok";p||Bn("update at "+e+" failed: "+u);const v=ts(n.serverSyncTree_,o,!p),g=v.length>0?ro(n,e):e;yr(n.eventQueue_,g,v),Gd(n,r,u,f)}),xn(t,u=>{const f=jp(n,Kt(e,u));ro(n,f)}),yr(n.eventQueue_,e,[])}}function hN(n){Fl(n,"onDisconnectEvents");const e=Hu(n),t=mu();Ud(n.onDisconnect_,_t(),(i,s)=>{const a=x2(i,s,n.serverSyncTree_,e);t2(t,i,a)});let r=[];Ud(t,_t(),(i,s)=>{r=r.concat(Ml(n.serverSyncTree_,i,s));const a=jp(n,i);ro(n,a)}),n.onDisconnect_=mu(),yr(n.eventQueue_,_t(),r)}function dN(n){n.persistentConnection_&&n.persistentConnection_.interrupt(rN)}function Fl(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),wn(t,...e)}function Gd(n,e,t,r){e&&co(()=>{if(t==="ok")e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const a=new Error(s);a.code=i,e(a)}})}function P2(n,e,t){return Sp(n.serverSyncTree_,e,t)||Xe.EMPTY_NODE}function Fp(n,e=n.transactionQueueTree_){if(e||$u(n,e),ho(e)){const t=O2(n,e);Ae(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&fN(n,Rl(e),t)}else A2(e)&&Wu(e,t=>{Fp(n,t)})}function fN(n,e,t){const r=t.map(u=>u.currentWriteId),i=P2(n,e,r);let s=i;const a=i.hash();for(let u=0;u<t.length;u++){const f=t[u];Ae(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;const p=jn(e,f.path);s=s.updateChild(p,f.currentOutputSnapshotRaw)}const o=s.val(!0),c=e;n.server_.put(c.toString(),o,u=>{Fl(n,"transaction put response",{path:c.toString(),status:u});let f=[];if(u==="ok"){const p=[];for(let v=0;v<t.length;v++)t[v].status=2,f=f.concat(ts(n.serverSyncTree_,t[v].currentWriteId)),t[v].onComplete&&p.push(()=>t[v].onComplete(null,!0,t[v].currentOutputSnapshotResolved)),t[v].unwatcher();$u(n,Pp(n.transactionQueueTree_,e)),Fp(n,n.transactionQueueTree_),yr(n.eventQueue_,e,f);for(let v=0;v<p.length;v++)co(p[v])}else{if(u==="datastale")for(let p=0;p<t.length;p++)t[p].status===3?t[p].status=4:t[p].status=0;else{Bn("transaction at "+c.toString()+" failed: "+u);for(let p=0;p<t.length;p++)t[p].status=4,t[p].abortReason=u}ro(n,e)}},a)}function ro(n,e){const t=D2(n,e),r=Rl(t),i=O2(n,t);return pN(n,i,r),r}function pN(n,e,t){if(e.length===0)return;const r=[];let i=[];const a=e.filter(o=>o.status===0).map(o=>o.currentWriteId);for(let o=0;o<e.length;o++){const c=e[o],u=jn(t,c.path);let f=!1,p;if(Ae(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)f=!0,p=c.abortReason,i=i.concat(ts(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=iN)f=!0,p="maxretry",i=i.concat(ts(n.serverSyncTree_,c.currentWriteId,!0));else{const v=P2(n,c.path,a);c.currentInputSnapshot=v;const g=e[o].update(v.val());if(g!==void 0){zu("transaction failed: Data returned ",g,c.path);let N=un(g);typeof g=="object"&&g!=null&&ri(g,".priority")||(N=N.updatePriority(v.getPriority()));const I=c.currentWriteId,b=Hu(n),A=N2(N,v,b);c.currentOutputSnapshotRaw=N,c.currentOutputSnapshotResolved=A,c.currentWriteId=Rp(n),a.splice(a.indexOf(I),1),i=i.concat(g2(n.serverSyncTree_,c.path,A,c.currentWriteId,c.applyLocally)),i=i.concat(ts(n.serverSyncTree_,I,!0))}else f=!0,p="nodata",i=i.concat(ts(n.serverSyncTree_,c.currentWriteId,!0))}yr(n.eventQueue_,t,i),i=[],f&&(e[o].status=2,function(v){setTimeout(v,Math.floor(0))}(e[o].unwatcher),e[o].onComplete&&(p==="nodata"?r.push(()=>e[o].onComplete(null,!1,e[o].currentInputSnapshot)):r.push(()=>e[o].onComplete(new Error(p),!1,null))))}$u(n,n.transactionQueueTree_);for(let o=0;o<r.length;o++)co(r[o]);Fp(n,n.transactionQueueTree_)}function D2(n,e){let t,r=n.transactionQueueTree_;for(t=pt(e);t!==null&&ho(r)===void 0;)r=Pp(r,t),e=Bt(e),t=pt(e);return r}function O2(n,e){const t=[];return M2(n,e,t),t.sort((r,i)=>r.order-i.order),t}function M2(n,e,t){const r=ho(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Wu(e,i=>{M2(n,i,t)})}function $u(n,e){const t=ho(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,S2(e,t.length>0?t:void 0)}Wu(e,r=>{$u(n,r)})}function jp(n,e){const t=Rl(D2(n,e)),r=Pp(n.transactionQueueTree_,e);return z4(r,i=>{sd(n,i)}),sd(n,r),k2(r,i=>{sd(n,i)}),t}function sd(n,e){const t=ho(e);if(t){const r=[];let i=[],s=-1;for(let a=0;a<t.length;a++)t[a].status===3||(t[a].status===1?(Ae(s===a-1,"All SENT items should be at beginning of queue."),s=a,t[a].status=3,t[a].abortReason="set"):(Ae(t[a].status===0,"Unexpected transaction status in abort"),t[a].unwatcher(),i=i.concat(ts(n.serverSyncTree_,t[a].currentWriteId,!0)),t[a].onComplete&&r.push(t[a].onComplete.bind(null,new Error("set"),!1,null))));s===-1?S2(e,void 0):t.length=s+1,yr(n.eventQueue_,Rl(e),i);for(let a=0;a<r.length;a++)co(r[a])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function gN(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Bn(`Invalid query segment '${t}' in query '${n}'`)}return e}const B0=function(n,e){const t=vN(n),r=t.namespace;t.domain==="firebase.com"&&Ii(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&Ii("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||kx();const i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new F1(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new Pt(t.pathString)}},vN=function(n){let e="",t="",r="",i="",s="",a=!0,o="https",c=443;if(typeof n=="string"){let u=n.indexOf("//");u>=0&&(o=n.substring(0,u-1),n=n.substring(u+2));let f=n.indexOf("/");f===-1&&(f=n.length);let p=n.indexOf("?");p===-1&&(p=n.length),e=n.substring(0,Math.min(f,p)),f<p&&(i=mN(n.substring(f,p)));const v=gN(n.substring(Math.min(n.length,p)));u=e.indexOf(":"),u>=0?(a=o==="https"||o==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;const g=e.slice(0,u);if(g.toLowerCase()==="localhost")t="localhost";else if(g.split(".").length<=2)t=g;else{const N=e.indexOf(".");r=e.substring(0,N).toLowerCase(),t=e.substring(N+1),s=r}"ns"in v&&(s=v.ns)}return{host:e,port:c,domain:t,subdomain:r,secure:a,scheme:o,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",yN=function(){let n=0;const e=[];return function(t){const r=t===n;n=t;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=U0.charAt(t%64),t=Math.floor(t/64);Ae(t===0,"Cannot push at time == 0");let a=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)a+=U0.charAt(e[i]);return Ae(a.length===20,"nextPushId: Length should be 20."),a}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+hn(this.snapshot.exportVal())}}class bN{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Ae(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return dt(this._path)?null:dp(this._path)}get ref(){return new Pi(this._repo,this._path)}get _queryIdentifier(){const e=A0(this._queryParams),t=lp(e);return t==="{}"?"default":t}get _queryObject(){return A0(this._queryParams)}isEqual(e){if(e=Dn(e),!(e instanceof Bp))return!1;const t=this._repo===e._repo,r=G1(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+c3(this._path)}}class Pi extends Bp{constructor(e,t){super(e,t,new gp,!1)}get parent(){const e=$1(this._path);return e===null?null:new Pi(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class _l{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Pt(e),r=bl(this.ref,e);return new _l(this._node.getChild(t),r,Xt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new _l(i,bl(this.ref,r),Xt)))}hasChild(e){const t=new Pt(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function xt(n,e){return n=Dn(n),n._checkNotDeleted("ref"),e!==void 0?bl(n._root,e):n._root}function bl(n,e){return n=Dn(n),pt(n._path)===null?Q4("child","path",e):I2("child","path",e),new Pi(n._repo,Kt(n._path,e))}function ni(n,e){n=Dn(n),T2("push",n._path),E2("push",e,n._path,!0);const t=L2(n._repo),r=yN(t),i=bl(n,r),s=bl(n,r);let a;return a=Promise.resolve(s),i.then=a.then.bind(a),i.catch=a.then.bind(a,void 0),i}function Hs(n,e){n=Dn(n),T2("set",n._path),E2("set",e,n._path,!1);const t=new Cl;return cN(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function jl(n,e){J4("update",e,n._path);const t=new Cl;return uN(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function Un(n){n=Dn(n);const e=new wN(()=>{}),t=new Up(e);return lN(n._repo,n,t).then(r=>new _l(r,new Pi(n._repo,n._path),n._queryParams.getIndex()))}class Up{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const r=t._queryParams.getIndex();return new _N("value",this,new _l(e.snapshotNode,new Pi(t._repo,t._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new bN(this,e,t):null}matches(e){return e instanceof Up?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}w4(Pi);k4(Pi);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN="FIREBASE_DATABASE_EMULATOR_HOST",Yd={};let NN=!1;function SN(n,e,t,r){n.repoInfo_=new F1(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}function AN(n,e,t,r,i){let s=r||n.options.databaseURL;s===void 0&&(n.options.projectId||Ii("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),wn("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let a=B0(s,i),o=a.repoInfo,c;typeof process<"u"&&o0&&(c=o0[xN]),c?(s=`http://${c}?ns=${o.namespace}`,a=B0(s,i),o=a.repoInfo):a.repoInfo.secure;const u=new Fx(n.name,n.options,e);Z4("Invalid Firebase Database URL",a),dt(a.path)||Ii("Database URL must point to the root of a Firebase Database (not including a child path).");const f=CN(o,n,u,new Rx(n.name,t));return new EN(f,n)}function kN(n,e){const t=Yd[e];(!t||t[n.key]!==n)&&Ii(`Database ${e}(${n.repoInfo_}) has already been deleted.`),dN(n),delete t[n.key]}function CN(n,e,t,r){let i=Yd[e.name];i||(i={},Yd[e.name]=i);let s=i[n.toURLString()];return s&&Ii("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new sN(n,NN,t,r),i[n.toURLString()]=s,s}class EN{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(aN(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Pi(this._repo,_t())),this._rootInternal}_delete(){return this._rootInternal!==null&&(kN(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ii("Cannot call "+e+" on a deleted database.")}}function IN(n=qg(),e){const t=Jf(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=Ry("database");r&&TN(t,...r)}return t}function TN(n,e,t,r={}){n=Dn(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&Ii("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ii('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Yc(Yc.OWNER);else if(r.mockUserToken){const a=typeof r.mockUserToken=="string"?r.mockUserToken:Fy(r.mockUserToken,n.app.options.projectId);s=new Yc(a)}SN(i,e,t,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(n){bx(ao),Ja(new Us("database",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return AN(r,i,s,t)},"PUBLIC").setMultipleInstances(!0)),ss(l0,c0,n),ss(l0,c0,"esm2017")}Ai.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Ai.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};LN();const PN={apiKey:"AIzaSyCNC-IU_iDSuRyCCvj0kvse3AEQ7aF5yYU",authDomain:"nrd-bot-ea3f9.firebaseapp.com",databaseURL:"https://nrd-bot-ea3f9-default-rtdb.europe-west1.firebasedatabase.app",projectId:"nrd-bot-ea3f9",storageBucket:"nrd-bot-ea3f9.firebasestorage.app",messagingSenderId:"93214958631",appId:"1:93214958631:web:eb226897397674f0305a02"},R2=Ug(PN),ad=gx(R2),Nt=IN(R2),F2=ke.createContext(null),qp=()=>{const n=ke.useContext(F2);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},DN=({children:n})=>{const[e,t]=ke.useState(null),[r,i]=ke.useState(!0);ke.useEffect(()=>iw(ad,u=>{t(u),i(!1)}),[]);const o={user:e,loading:r,login:async(c,u)=>{await tw(ad,c,u)},logout:()=>sw(ad)};return _.jsx(F2.Provider,{value:o,children:!r&&n})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ON={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Vn=(n,e)=>{const t=ke.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:o="",children:c,...u},f)=>ke.createElement("svg",{ref:f,...ON,width:i,height:i,stroke:r,strokeWidth:a?Number(s)*24/Number(i):s,className:["lucide",`lucide-${MN(n)}`,o].join(" "),...u},[...e.map(([p,v])=>ke.createElement(p,v)),...Array.isArray(c)?c:[c]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=Vn("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=Vn("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gu=Vn("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=Vn("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=Vn("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=Vn("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=Vn("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=Vn("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=Vn("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=Vn("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=Vn("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vp=Vn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=Vn("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kd=Vn("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=Vn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function zN(){const{user:n,logout:e}=qp();return _.jsx("nav",{className:"bg-white shadow",children:_.jsxs("div",{className:"container mx-auto px-4",children:[_.jsxs("div",{className:"flex justify-between items-center h-16",children:[_.jsxs("div",{className:"flex items-center gap-8",children:[_.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Recursos Humanos"}),_.jsxs("div",{className:"hidden md:flex items-center gap-4",children:[_.jsxs(Lc,{to:"/",end:!0,className:({isActive:t})=>`flex items-center gap-2 px-3 py-2 rounded-md text-sm font-medium ${t?"bg-gray-800 text-white":"text-gray-600 hover:bg-gray-100"}`,children:[_.jsx(q0,{className:"w-4 h-4"}),"Dashboard"]}),_.jsxs(Lc,{to:"/employees",className:({isActive:t})=>`flex items-center gap-2 px-3 py-2 rounded-md text-sm font-medium ${t?"bg-gray-800 text-white":"text-gray-600 hover:bg-gray-100"}`,children:[_.jsx(Kd,{className:"w-4 h-4"}),"Empleados"]})]})]}),_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(WN,{className:"w-5 h-5 text-gray-600"}),_.jsx("span",{className:"text-sm text-gray-600",children:n==null?void 0:n.email})]}),_.jsxs("button",{onClick:()=>e(),className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md",children:[_.jsx(UN,{className:"w-4 h-4"}),"Cerrar Sesión"]})]})]}),_.jsx("div",{className:"md:hidden py-3 border-t border-gray-200",children:_.jsxs("div",{className:"flex flex-col gap-2",children:[_.jsxs(Lc,{to:"/",end:!0,className:({isActive:t})=>`flex items-center gap-2 px-3 py-2 rounded-md text-sm font-medium ${t?"bg-gray-800 text-white":"text-gray-600 hover:bg-gray-100"}`,children:[_.jsx(q0,{className:"w-4 h-4"}),"Dashboard"]}),_.jsxs(Lc,{to:"/employees",className:({isActive:t})=>`flex items-center gap-2 px-3 py-2 rounded-md text-sm font-medium ${t?"bg-gray-800 text-white":"text-gray-600 hover:bg-gray-100"}`,children:[_.jsx(Kd,{className:"w-4 h-4"}),"Empleados"]})]})})]})})}function HN(){return _.jsxs("div",{className:"min-h-screen bg-gray-50",children:[_.jsx(zN,{}),_.jsx("main",{className:"container mx-auto px-4 py-6",children:_.jsx(k5,{})})]})}function or(n){return n==null?"0.00":n.toLocaleString("es-UY",{minimumFractionDigits:2,maximumFractionDigits:2})}function $N(){const[n,e]=ke.useState({totalEmployees:0,totalProvisions:0,pendingPayments:0,totalPayments:0});return ke.useEffect(()=>{(async()=>{try{const[r,i,s]=await Promise.all([Un(xt(Nt,"employees")),Un(xt(Nt,"movements")),Un(xt(Nt,"payments"))]),a=r.val()||{},o=i.val()||{},c=s.val()||{};let u=0,f=0,p=0;Object.values(o).forEach(v=>{Object.values(v).forEach(g=>{const N=Math.round(g.amount*100)/100;g.type==="credit"&&(u+=N,g.status==="pending"&&(f+=N))})}),Object.values(c).forEach(v=>{Object.values(v).forEach(g=>{g.status==="completed"&&(p+=Math.round(g.total*100)/100)})}),e({totalEmployees:Object.keys(a).length,totalProvisions:Math.round(u*100)/100,pendingPayments:Math.round(f*100)/100,totalPayments:Math.round(p*100)/100})}catch(r){console.error("Error fetching stats:",r)}})()},[]),_.jsxs("div",{className:"space-y-6",children:[_.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[_.jsx("div",{className:"card",children:_.jsxs("div",{className:"card-body flex items-center gap-4",children:[_.jsx("div",{className:"bg-blue-500 p-3 rounded-lg text-white",children:_.jsx(Kd,{className:"w-6 h-6"})}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Empleados"}),_.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:n.totalEmployees})]})]})}),_.jsx("div",{className:"card",children:_.jsxs("div",{className:"card-body flex items-center gap-4",children:[_.jsx("div",{className:"bg-green-500 p-3 rounded-lg text-white",children:_.jsx(Gu,{className:"w-6 h-6"})}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Provisiones Totales"}),_.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["$",or(n.totalProvisions)]})]})]})}),_.jsx("div",{className:"card",children:_.jsxs("div",{className:"card-body flex items-center gap-4",children:[_.jsx("div",{className:"bg-yellow-500 p-3 rounded-lg text-white",children:_.jsx(Nu,{className:"w-6 h-6"})}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Pagos Pendientes"}),_.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["$",or(n.pendingPayments)]})]})]})}),_.jsx("div",{className:"card",children:_.jsxs("div",{className:"card-body flex items-center gap-4",children:[_.jsx("div",{className:"bg-purple-500 p-3 rounded-lg text-white",children:_.jsx(RN,{className:"w-6 h-6"})}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Pagos Totales"}),_.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["$",or(n.totalPayments)]})]})]})})]})]})}var Xd={exports:{}},B2={exports:{}};(function(n){function e(t){return t&&t.__esModule?t:{default:t}}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(B2);var Wt=B2.exports,Jd={exports:{}},Qd={exports:{}};function wt(n){"@babel/helpers - typeof";return wt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wt(n)}const GN=Object.freeze(Object.defineProperty({__proto__:null,get default(){return wt}},Symbol.toStringTag,{value:"Module"})),U2=C5(GN);var Zd={exports:{}};(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r,i){if(i.length<r)throw new TypeError(r+" argument"+(r>1?"s":"")+" required, but only "+i.length+" present")}n.exports=e.default})(Zd,Zd.exports);var Wn=Zd.exports;(function(n,e){var t=Wt.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var r=t(U2),i=t(Wn);function s(a){return(0,i.default)(1,arguments),a instanceof Date||(0,r.default)(a)==="object"&&Object.prototype.toString.call(a)==="[object Date]"}n.exports=e.default})(Qd,Qd.exports);var YN=Qd.exports,ef={exports:{}};(function(n,e){var t=Wt.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var r=t(U2),i=t(Wn);function s(a){(0,i.default)(1,arguments);var o=Object.prototype.toString.call(a);return a instanceof Date||(0,r.default)(a)==="object"&&o==="[object Date]"?new Date(a.getTime()):typeof a=="number"||o==="[object Number]"?new Date(a):((typeof a=="string"||o==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}n.exports=e.default})(ef,ef.exports);var ii=ef.exports;(function(n,e){var t=Wt.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var r=t(YN),i=t(ii),s=t(Wn);function a(o){if((0,s.default)(1,arguments),!(0,r.default)(o)&&typeof o!="number")return!1;var c=(0,i.default)(o);return!isNaN(Number(c))}n.exports=e.default})(Jd,Jd.exports);var KN=Jd.exports,tf={exports:{}},nf={exports:{}},rf={exports:{}};(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r){if(r===null||r===!0||r===!1)return NaN;var i=Number(r);return isNaN(i)?i:i<0?Math.ceil(i):Math.floor(i)}n.exports=e.default})(rf,rf.exports);var Js=rf.exports;const XN=Al(Js);(function(n,e){var t=Wt.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var r=t(Js),i=t(ii),s=t(Wn);function a(o,c){(0,s.default)(2,arguments);var u=(0,i.default)(o).getTime(),f=(0,r.default)(c);return new Date(u+f)}n.exports=e.default})(nf,nf.exports);var JN=nf.exports;(function(n,e){var t=Wt.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var r=t(JN),i=t(Wn),s=t(Js);function a(o,c){(0,i.default)(2,arguments);var u=(0,s.default)(c);return(0,r.default)(o,-u)}n.exports=e.default})(tf,tf.exports);var QN=tf.exports,sf={exports:{}},af={exports:{}};(function(n,e){var t=Wt.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var r=t(ii),i=t(Wn),s=864e5;function a(o){(0,i.default)(1,arguments);var c=(0,r.default)(o),u=c.getTime();c.setUTCMonth(0,1),c.setUTCHours(0,0,0,0);var f=c.getTime(),p=u-f;return Math.floor(p/s)+1}n.exports=e.default})(af,af.exports);var ZN=af.exports,of={exports:{}},lf={exports:{}};(function(n,e){var t=Wt.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var r=t(ii),i=t(Wn);function s(a){(0,i.default)(1,arguments);var o=1,c=(0,r.default)(a),u=c.getUTCDay(),f=(u<o?7:0)+u-o;return c.setUTCDate(c.getUTCDate()-f),c.setUTCHours(0,0,0,0),c}n.exports=e.default})(lf,lf.exports);var Wp=lf.exports,cf={exports:{}},uf={exports:{}};(function(n,e){var t=Wt.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var r=t(ii),i=t(Wn),s=t(Wp);function a(o){(0,i.default)(1,arguments);var c=(0,r.default)(o),u=c.getUTCFullYear(),f=new Date(0);f.setUTCFullYear(u+1,0,4),f.setUTCHours(0,0,0,0);var p=(0,s.default)(f),v=new Date(0);v.setUTCFullYear(u,0,4),v.setUTCHours(0,0,0,0);var g=(0,s.default)(v);return c.getTime()>=p.getTime()?u+1:c.getTime()>=g.getTime()?u:u-1}n.exports=e.default})(uf,uf.exports);var q2=uf.exports;(function(n,e){var t=Wt.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var r=t(q2),i=t(Wp),s=t(Wn);function a(o){(0,s.default)(1,arguments);var c=(0,r.default)(o),u=new Date(0);u.setUTCFullYear(c,0,4),u.setUTCHours(0,0,0,0);var f=(0,i.default)(u);return f}n.exports=e.default})(cf,cf.exports);var eS=cf.exports;(function(n,e){var t=Wt.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var r=t(ii),i=t(Wp),s=t(eS),a=t(Wn),o=6048e5;function c(u){(0,a.default)(1,arguments);var f=(0,r.default)(u),p=(0,i.default)(f).getTime()-(0,s.default)(f).getTime();return Math.round(p/o)+1}n.exports=e.default})(of,of.exports);var tS=of.exports,hf={exports:{}},df={exports:{}},Qs={};Object.defineProperty(Qs,"__esModule",{value:!0});Qs.getDefaultOptions=nS;Qs.setDefaultOptions=rS;var V2={};function nS(){return V2}function rS(n){V2=n}(function(n,e){var t=Wt.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var r=t(ii),i=t(Wn),s=t(Js),a=Qs;function o(c,u){var f,p,v,g,N,S,I,b;(0,i.default)(1,arguments);var A=(0,a.getDefaultOptions)(),P=(0,s.default)((f=(p=(v=(g=u==null?void 0:u.weekStartsOn)!==null&&g!==void 0?g:u==null||(N=u.locale)===null||N===void 0||(S=N.options)===null||S===void 0?void 0:S.weekStartsOn)!==null&&v!==void 0?v:A.weekStartsOn)!==null&&p!==void 0?p:(I=A.locale)===null||I===void 0||(b=I.options)===null||b===void 0?void 0:b.weekStartsOn)!==null&&f!==void 0?f:0);if(!(P>=0&&P<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var R=(0,r.default)(c),W=R.getUTCDay(),ie=(W<P?7:0)+W-P;return R.setUTCDate(R.getUTCDate()-ie),R.setUTCHours(0,0,0,0),R}n.exports=e.default})(df,df.exports);var zp=df.exports,ff={exports:{}},pf={exports:{}};(function(n,e){var t=Wt.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var r=t(ii),i=t(Wn),s=t(zp),a=t(Js),o=Qs;function c(u,f){var p,v,g,N,S,I,b,A;(0,i.default)(1,arguments);var P=(0,r.default)(u),R=P.getUTCFullYear(),W=(0,o.getDefaultOptions)(),ie=(0,a.default)((p=(v=(g=(N=f==null?void 0:f.firstWeekContainsDate)!==null&&N!==void 0?N:f==null||(S=f.locale)===null||S===void 0||(I=S.options)===null||I===void 0?void 0:I.firstWeekContainsDate)!==null&&g!==void 0?g:W.firstWeekContainsDate)!==null&&v!==void 0?v:(b=W.locale)===null||b===void 0||(A=b.options)===null||A===void 0?void 0:A.firstWeekContainsDate)!==null&&p!==void 0?p:1);if(!(ie>=1&&ie<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var Q=new Date(0);Q.setUTCFullYear(R+1,0,ie),Q.setUTCHours(0,0,0,0);var V=(0,s.default)(Q,f),se=new Date(0);se.setUTCFullYear(R,0,ie),se.setUTCHours(0,0,0,0);var me=(0,s.default)(se,f);return P.getTime()>=V.getTime()?R+1:P.getTime()>=me.getTime()?R:R-1}n.exports=e.default})(pf,pf.exports);var W2=pf.exports;(function(n,e){var t=Wt.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var r=t(W2),i=t(Wn),s=t(zp),a=t(Js),o=Qs;function c(u,f){var p,v,g,N,S,I,b,A;(0,i.default)(1,arguments);var P=(0,o.getDefaultOptions)(),R=(0,a.default)((p=(v=(g=(N=f==null?void 0:f.firstWeekContainsDate)!==null&&N!==void 0?N:f==null||(S=f.locale)===null||S===void 0||(I=S.options)===null||I===void 0?void 0:I.firstWeekContainsDate)!==null&&g!==void 0?g:P.firstWeekContainsDate)!==null&&v!==void 0?v:(b=P.locale)===null||b===void 0||(A=b.options)===null||A===void 0?void 0:A.firstWeekContainsDate)!==null&&p!==void 0?p:1),W=(0,r.default)(u,f),ie=new Date(0);ie.setUTCFullYear(W,0,R),ie.setUTCHours(0,0,0,0);var Q=(0,s.default)(ie,f);return Q}n.exports=e.default})(ff,ff.exports);var iS=ff.exports;(function(n,e){var t=Wt.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var r=t(ii),i=t(zp),s=t(iS),a=t(Wn),o=6048e5;function c(u,f){(0,a.default)(1,arguments);var p=(0,r.default)(u),v=(0,i.default)(p,f).getTime()-(0,s.default)(p,f).getTime();return Math.round(v/o)+1}n.exports=e.default})(hf,hf.exports);var sS=hf.exports,mf={exports:{}};(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r,i){for(var s=r<0?"-":"",a=Math.abs(r).toString();a.length<i;)a="0"+a;return s+a}n.exports=e.default})(mf,mf.exports);var z2=mf.exports,gf={exports:{}};(function(n,e){var t=Wt.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=t(z2),i={y:function(o,c){var u=o.getUTCFullYear(),f=u>0?u:1-u;return(0,r.default)(c==="yy"?f%100:f,c.length)},M:function(o,c){var u=o.getUTCMonth();return c==="M"?String(u+1):(0,r.default)(u+1,2)},d:function(o,c){return(0,r.default)(o.getUTCDate(),c.length)},a:function(o,c){var u=o.getUTCHours()/12>=1?"pm":"am";switch(c){case"a":case"aa":return u.toUpperCase();case"aaa":return u;case"aaaaa":return u[0];case"aaaa":default:return u==="am"?"a.m.":"p.m."}},h:function(o,c){return(0,r.default)(o.getUTCHours()%12||12,c.length)},H:function(o,c){return(0,r.default)(o.getUTCHours(),c.length)},m:function(o,c){return(0,r.default)(o.getUTCMinutes(),c.length)},s:function(o,c){return(0,r.default)(o.getUTCSeconds(),c.length)},S:function(o,c){var u=c.length,f=o.getUTCMilliseconds(),p=Math.floor(f*Math.pow(10,u-3));return(0,r.default)(p,c.length)}},s=i;e.default=s,n.exports=e.default})(gf,gf.exports);var aS=gf.exports;(function(n,e){var t=Wt.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=t(ZN),i=t(tS),s=t(q2),a=t(sS),o=t(W2),c=t(z2),u=t(aS),f={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},p={G:function(b,A,P){var R=b.getUTCFullYear()>0?1:0;switch(A){case"G":case"GG":case"GGG":return P.era(R,{width:"abbreviated"});case"GGGGG":return P.era(R,{width:"narrow"});case"GGGG":default:return P.era(R,{width:"wide"})}},y:function(b,A,P){if(A==="yo"){var R=b.getUTCFullYear(),W=R>0?R:1-R;return P.ordinalNumber(W,{unit:"year"})}return u.default.y(b,A)},Y:function(b,A,P,R){var W=(0,o.default)(b,R),ie=W>0?W:1-W;if(A==="YY"){var Q=ie%100;return(0,c.default)(Q,2)}return A==="Yo"?P.ordinalNumber(ie,{unit:"year"}):(0,c.default)(ie,A.length)},R:function(b,A){var P=(0,s.default)(b);return(0,c.default)(P,A.length)},u:function(b,A){var P=b.getUTCFullYear();return(0,c.default)(P,A.length)},Q:function(b,A,P){var R=Math.ceil((b.getUTCMonth()+1)/3);switch(A){case"Q":return String(R);case"QQ":return(0,c.default)(R,2);case"Qo":return P.ordinalNumber(R,{unit:"quarter"});case"QQQ":return P.quarter(R,{width:"abbreviated",context:"formatting"});case"QQQQQ":return P.quarter(R,{width:"narrow",context:"formatting"});case"QQQQ":default:return P.quarter(R,{width:"wide",context:"formatting"})}},q:function(b,A,P){var R=Math.ceil((b.getUTCMonth()+1)/3);switch(A){case"q":return String(R);case"qq":return(0,c.default)(R,2);case"qo":return P.ordinalNumber(R,{unit:"quarter"});case"qqq":return P.quarter(R,{width:"abbreviated",context:"standalone"});case"qqqqq":return P.quarter(R,{width:"narrow",context:"standalone"});case"qqqq":default:return P.quarter(R,{width:"wide",context:"standalone"})}},M:function(b,A,P){var R=b.getUTCMonth();switch(A){case"M":case"MM":return u.default.M(b,A);case"Mo":return P.ordinalNumber(R+1,{unit:"month"});case"MMM":return P.month(R,{width:"abbreviated",context:"formatting"});case"MMMMM":return P.month(R,{width:"narrow",context:"formatting"});case"MMMM":default:return P.month(R,{width:"wide",context:"formatting"})}},L:function(b,A,P){var R=b.getUTCMonth();switch(A){case"L":return String(R+1);case"LL":return(0,c.default)(R+1,2);case"Lo":return P.ordinalNumber(R+1,{unit:"month"});case"LLL":return P.month(R,{width:"abbreviated",context:"standalone"});case"LLLLL":return P.month(R,{width:"narrow",context:"standalone"});case"LLLL":default:return P.month(R,{width:"wide",context:"standalone"})}},w:function(b,A,P,R){var W=(0,a.default)(b,R);return A==="wo"?P.ordinalNumber(W,{unit:"week"}):(0,c.default)(W,A.length)},I:function(b,A,P){var R=(0,i.default)(b);return A==="Io"?P.ordinalNumber(R,{unit:"week"}):(0,c.default)(R,A.length)},d:function(b,A,P){return A==="do"?P.ordinalNumber(b.getUTCDate(),{unit:"date"}):u.default.d(b,A)},D:function(b,A,P){var R=(0,r.default)(b);return A==="Do"?P.ordinalNumber(R,{unit:"dayOfYear"}):(0,c.default)(R,A.length)},E:function(b,A,P){var R=b.getUTCDay();switch(A){case"E":case"EE":case"EEE":return P.day(R,{width:"abbreviated",context:"formatting"});case"EEEEE":return P.day(R,{width:"narrow",context:"formatting"});case"EEEEEE":return P.day(R,{width:"short",context:"formatting"});case"EEEE":default:return P.day(R,{width:"wide",context:"formatting"})}},e:function(b,A,P,R){var W=b.getUTCDay(),ie=(W-R.weekStartsOn+8)%7||7;switch(A){case"e":return String(ie);case"ee":return(0,c.default)(ie,2);case"eo":return P.ordinalNumber(ie,{unit:"day"});case"eee":return P.day(W,{width:"abbreviated",context:"formatting"});case"eeeee":return P.day(W,{width:"narrow",context:"formatting"});case"eeeeee":return P.day(W,{width:"short",context:"formatting"});case"eeee":default:return P.day(W,{width:"wide",context:"formatting"})}},c:function(b,A,P,R){var W=b.getUTCDay(),ie=(W-R.weekStartsOn+8)%7||7;switch(A){case"c":return String(ie);case"cc":return(0,c.default)(ie,A.length);case"co":return P.ordinalNumber(ie,{unit:"day"});case"ccc":return P.day(W,{width:"abbreviated",context:"standalone"});case"ccccc":return P.day(W,{width:"narrow",context:"standalone"});case"cccccc":return P.day(W,{width:"short",context:"standalone"});case"cccc":default:return P.day(W,{width:"wide",context:"standalone"})}},i:function(b,A,P){var R=b.getUTCDay(),W=R===0?7:R;switch(A){case"i":return String(W);case"ii":return(0,c.default)(W,A.length);case"io":return P.ordinalNumber(W,{unit:"day"});case"iii":return P.day(R,{width:"abbreviated",context:"formatting"});case"iiiii":return P.day(R,{width:"narrow",context:"formatting"});case"iiiiii":return P.day(R,{width:"short",context:"formatting"});case"iiii":default:return P.day(R,{width:"wide",context:"formatting"})}},a:function(b,A,P){var R=b.getUTCHours(),W=R/12>=1?"pm":"am";switch(A){case"a":case"aa":return P.dayPeriod(W,{width:"abbreviated",context:"formatting"});case"aaa":return P.dayPeriod(W,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return P.dayPeriod(W,{width:"narrow",context:"formatting"});case"aaaa":default:return P.dayPeriod(W,{width:"wide",context:"formatting"})}},b:function(b,A,P){var R=b.getUTCHours(),W;switch(R===12?W=f.noon:R===0?W=f.midnight:W=R/12>=1?"pm":"am",A){case"b":case"bb":return P.dayPeriod(W,{width:"abbreviated",context:"formatting"});case"bbb":return P.dayPeriod(W,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return P.dayPeriod(W,{width:"narrow",context:"formatting"});case"bbbb":default:return P.dayPeriod(W,{width:"wide",context:"formatting"})}},B:function(b,A,P){var R=b.getUTCHours(),W;switch(R>=17?W=f.evening:R>=12?W=f.afternoon:R>=4?W=f.morning:W=f.night,A){case"B":case"BB":case"BBB":return P.dayPeriod(W,{width:"abbreviated",context:"formatting"});case"BBBBB":return P.dayPeriod(W,{width:"narrow",context:"formatting"});case"BBBB":default:return P.dayPeriod(W,{width:"wide",context:"formatting"})}},h:function(b,A,P){if(A==="ho"){var R=b.getUTCHours()%12;return R===0&&(R=12),P.ordinalNumber(R,{unit:"hour"})}return u.default.h(b,A)},H:function(b,A,P){return A==="Ho"?P.ordinalNumber(b.getUTCHours(),{unit:"hour"}):u.default.H(b,A)},K:function(b,A,P){var R=b.getUTCHours()%12;return A==="Ko"?P.ordinalNumber(R,{unit:"hour"}):(0,c.default)(R,A.length)},k:function(b,A,P){var R=b.getUTCHours();return R===0&&(R=24),A==="ko"?P.ordinalNumber(R,{unit:"hour"}):(0,c.default)(R,A.length)},m:function(b,A,P){return A==="mo"?P.ordinalNumber(b.getUTCMinutes(),{unit:"minute"}):u.default.m(b,A)},s:function(b,A,P){return A==="so"?P.ordinalNumber(b.getUTCSeconds(),{unit:"second"}):u.default.s(b,A)},S:function(b,A){return u.default.S(b,A)},X:function(b,A,P,R){var W=R._originalDate||b,ie=W.getTimezoneOffset();if(ie===0)return"Z";switch(A){case"X":return g(ie);case"XXXX":case"XX":return N(ie);case"XXXXX":case"XXX":default:return N(ie,":")}},x:function(b,A,P,R){var W=R._originalDate||b,ie=W.getTimezoneOffset();switch(A){case"x":return g(ie);case"xxxx":case"xx":return N(ie);case"xxxxx":case"xxx":default:return N(ie,":")}},O:function(b,A,P,R){var W=R._originalDate||b,ie=W.getTimezoneOffset();switch(A){case"O":case"OO":case"OOO":return"GMT"+v(ie,":");case"OOOO":default:return"GMT"+N(ie,":")}},z:function(b,A,P,R){var W=R._originalDate||b,ie=W.getTimezoneOffset();switch(A){case"z":case"zz":case"zzz":return"GMT"+v(ie,":");case"zzzz":default:return"GMT"+N(ie,":")}},t:function(b,A,P,R){var W=R._originalDate||b,ie=Math.floor(W.getTime()/1e3);return(0,c.default)(ie,A.length)},T:function(b,A,P,R){var W=R._originalDate||b,ie=W.getTime();return(0,c.default)(ie,A.length)}};function v(I,b){var A=I>0?"-":"+",P=Math.abs(I),R=Math.floor(P/60),W=P%60;if(W===0)return A+String(R);var ie=b;return A+String(R)+ie+(0,c.default)(W,2)}function g(I,b){if(I%60===0){var A=I>0?"-":"+";return A+(0,c.default)(Math.abs(I)/60,2)}return N(I,b)}function N(I,b){var A=b||"",P=I>0?"-":"+",R=Math.abs(I),W=(0,c.default)(Math.floor(R/60),2),ie=(0,c.default)(R%60,2);return P+W+A+ie}var S=p;e.default=S,n.exports=e.default})(sf,sf.exports);var oS=sf.exports,vf={exports:{}};(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(c,u){switch(c){case"P":return u.date({width:"short"});case"PP":return u.date({width:"medium"});case"PPP":return u.date({width:"long"});case"PPPP":default:return u.date({width:"full"})}},r=function(c,u){switch(c){case"p":return u.time({width:"short"});case"pp":return u.time({width:"medium"});case"ppp":return u.time({width:"long"});case"pppp":default:return u.time({width:"full"})}},i=function(c,u){var f=c.match(/(P+)(p+)?/)||[],p=f[1],v=f[2];if(!v)return t(c,u);var g;switch(p){case"P":g=u.dateTime({width:"short"});break;case"PP":g=u.dateTime({width:"medium"});break;case"PPP":g=u.dateTime({width:"long"});break;case"PPPP":default:g=u.dateTime({width:"full"});break}return g.replace("{{date}}",t(p,u)).replace("{{time}}",r(v,u))},s={p:r,P:i},a=s;e.default=a,n.exports=e.default})(vf,vf.exports);var lS=vf.exports,yf={exports:{}};(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r){var i=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return i.setUTCFullYear(r.getFullYear()),r.getTime()-i.getTime()}n.exports=e.default})(yf,yf.exports);var H2=yf.exports;const V0=Al(H2);var Ul={};Object.defineProperty(Ul,"__esModule",{value:!0});Ul.isProtectedDayOfYearToken=hS;Ul.isProtectedWeekYearToken=dS;Ul.throwProtectedError=fS;var cS=["D","DD"],uS=["YY","YYYY"];function hS(n){return cS.indexOf(n)!==-1}function dS(n){return uS.indexOf(n)!==-1}function fS(n,e,t){if(n==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var _f={exports:{}},bf={exports:{}},wf={exports:{}};(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},r=function(a,o,c){var u,f=t[a];return typeof f=="string"?u=f:o===1?u=f.one:u=f.other.replace("{{count}}",o.toString()),c!=null&&c.addSuffix?c.comparison&&c.comparison>0?"in "+u:u+" ago":u},i=r;e.default=i,n.exports=e.default})(wf,wf.exports);var pS=wf.exports,xf={exports:{}},Nf={exports:{}};(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r){return function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=i.width?String(i.width):r.defaultWidth,a=r.formats[s]||r.formats[r.defaultWidth];return a}}n.exports=e.default})(Nf,Nf.exports);var mS=Nf.exports;(function(n,e){var t=Wt.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=t(mS),i={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},s={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},a={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},o={date:(0,r.default)({formats:i,defaultWidth:"full"}),time:(0,r.default)({formats:s,defaultWidth:"full"}),dateTime:(0,r.default)({formats:a,defaultWidth:"full"})},c=o;e.default=c,n.exports=e.default})(xf,xf.exports);var gS=xf.exports,Sf={exports:{}};(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},r=function(a,o,c,u){return t[a]},i=r;e.default=i,n.exports=e.default})(Sf,Sf.exports);var vS=Sf.exports,Af={exports:{}},kf={exports:{}};(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r){return function(i,s){var a=s!=null&&s.context?String(s.context):"standalone",o;if(a==="formatting"&&r.formattingValues){var c=r.defaultFormattingWidth||r.defaultWidth,u=s!=null&&s.width?String(s.width):c;o=r.formattingValues[u]||r.formattingValues[c]}else{var f=r.defaultWidth,p=s!=null&&s.width?String(s.width):r.defaultWidth;o=r.values[p]||r.values[f]}var v=r.argumentCallback?r.argumentCallback(i):i;return o[v]}}n.exports=e.default})(kf,kf.exports);var yS=kf.exports;(function(n,e){var t=Wt.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=t(yS),i={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},s={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},a={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},o={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},c={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},u={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},f=function(N,S){var I=Number(N),b=I%100;if(b>20||b<10)switch(b%10){case 1:return I+"st";case 2:return I+"nd";case 3:return I+"rd"}return I+"th"},p={ordinalNumber:f,era:(0,r.default)({values:i,defaultWidth:"wide"}),quarter:(0,r.default)({values:s,defaultWidth:"wide",argumentCallback:function(N){return N-1}}),month:(0,r.default)({values:a,defaultWidth:"wide"}),day:(0,r.default)({values:o,defaultWidth:"wide"}),dayPeriod:(0,r.default)({values:c,defaultWidth:"wide",formattingValues:u,defaultFormattingWidth:"wide"})},v=p;e.default=v,n.exports=e.default})(Af,Af.exports);var _S=Af.exports,Cf={exports:{}},Ef={exports:{}};(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(s){return function(a){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=o.width,u=c&&s.matchPatterns[c]||s.matchPatterns[s.defaultMatchWidth],f=a.match(u);if(!f)return null;var p=f[0],v=c&&s.parsePatterns[c]||s.parsePatterns[s.defaultParseWidth],g=Array.isArray(v)?i(v,function(I){return I.test(p)}):r(v,function(I){return I.test(p)}),N;N=s.valueCallback?s.valueCallback(g):g,N=o.valueCallback?o.valueCallback(N):N;var S=a.slice(p.length);return{value:N,rest:S}}}function r(s,a){for(var o in s)if(s.hasOwnProperty(o)&&a(s[o]))return o}function i(s,a){for(var o=0;o<s.length;o++)if(a(s[o]))return o}n.exports=e.default})(Ef,Ef.exports);var bS=Ef.exports,If={exports:{}};(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r){return function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.match(r.matchPattern);if(!a)return null;var o=a[0],c=i.match(r.parsePattern);if(!c)return null;var u=r.valueCallback?r.valueCallback(c[0]):c[0];u=s.valueCallback?s.valueCallback(u):u;var f=i.slice(o.length);return{value:u,rest:f}}}n.exports=e.default})(If,If.exports);var wS=If.exports;(function(n,e){var t=Wt.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=t(bS),i=t(wS),s=/^(\d+)(th|st|nd|rd)?/i,a=/\d+/i,o={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},c={any:[/^b/i,/^(a|c)/i]},u={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},f={any:[/1/i,/2/i,/3/i,/4/i]},p={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},v={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},g={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},N={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},S={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},I={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},b={ordinalNumber:(0,i.default)({matchPattern:s,parsePattern:a,valueCallback:function(R){return parseInt(R,10)}}),era:(0,r.default)({matchPatterns:o,defaultMatchWidth:"wide",parsePatterns:c,defaultParseWidth:"any"}),quarter:(0,r.default)({matchPatterns:u,defaultMatchWidth:"wide",parsePatterns:f,defaultParseWidth:"any",valueCallback:function(R){return R+1}}),month:(0,r.default)({matchPatterns:p,defaultMatchWidth:"wide",parsePatterns:v,defaultParseWidth:"any"}),day:(0,r.default)({matchPatterns:g,defaultMatchWidth:"wide",parsePatterns:N,defaultParseWidth:"any"}),dayPeriod:(0,r.default)({matchPatterns:S,defaultMatchWidth:"any",parsePatterns:I,defaultParseWidth:"any"})},A=b;e.default=A,n.exports=e.default})(Cf,Cf.exports);var xS=Cf.exports;(function(n,e){var t=Wt.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=t(pS),i=t(gS),s=t(vS),a=t(_S),o=t(xS),c={code:"en-US",formatDistance:r.default,formatLong:i.default,formatRelative:s.default,localize:a.default,match:o.default,options:{weekStartsOn:0,firstWeekContainsDate:1}},u=c;e.default=u,n.exports=e.default})(bf,bf.exports);var NS=bf.exports;(function(n,e){var t=Wt.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=t(NS),i=r.default;e.default=i,n.exports=e.default})(_f,_f.exports);var SS=_f.exports;(function(n,e){var t=Wt.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=P;var r=t(KN),i=t(QN),s=t(ii),a=t(oS),o=t(lS),c=t(H2),u=Ul,f=t(Js),p=t(Wn),v=Qs,g=t(SS),N=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,S=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,I=/^'([^]*?)'?$/,b=/''/g,A=/[a-zA-Z]/;function P(W,ie,Q){var V,se,me,D,O,G,q,ce,le,he,re,de,ge,Te,C,F,U,H;(0,p.default)(2,arguments);var X=String(ie),ne=(0,v.getDefaultOptions)(),ae=(V=(se=Q==null?void 0:Q.locale)!==null&&se!==void 0?se:ne.locale)!==null&&V!==void 0?V:g.default,oe=(0,f.default)((me=(D=(O=(G=Q==null?void 0:Q.firstWeekContainsDate)!==null&&G!==void 0?G:Q==null||(q=Q.locale)===null||q===void 0||(ce=q.options)===null||ce===void 0?void 0:ce.firstWeekContainsDate)!==null&&O!==void 0?O:ne.firstWeekContainsDate)!==null&&D!==void 0?D:(le=ne.locale)===null||le===void 0||(he=le.options)===null||he===void 0?void 0:he.firstWeekContainsDate)!==null&&me!==void 0?me:1);if(!(oe>=1&&oe<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var Se=(0,f.default)((re=(de=(ge=(Te=Q==null?void 0:Q.weekStartsOn)!==null&&Te!==void 0?Te:Q==null||(C=Q.locale)===null||C===void 0||(F=C.options)===null||F===void 0?void 0:F.weekStartsOn)!==null&&ge!==void 0?ge:ne.weekStartsOn)!==null&&de!==void 0?de:(U=ne.locale)===null||U===void 0||(H=U.options)===null||H===void 0?void 0:H.weekStartsOn)!==null&&re!==void 0?re:0);if(!(Se>=0&&Se<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!ae.localize)throw new RangeError("locale must contain localize property");if(!ae.formatLong)throw new RangeError("locale must contain formatLong property");var xe=(0,s.default)(W);if(!(0,r.default)(xe))throw new RangeError("Invalid time value");var Le=(0,c.default)(xe),Ie=(0,i.default)(xe,Le),$e={firstWeekContainsDate:oe,weekStartsOn:Se,locale:ae,_originalDate:xe},pe=X.match(S).map(function(B){var ze=B[0];if(ze==="p"||ze==="P"){var je=o.default[ze];return je(B,ae.formatLong)}return B}).join("").match(N).map(function(B){if(B==="''")return"'";var ze=B[0];if(ze==="'")return R(B);var je=a.default[ze];if(je)return!(Q!=null&&Q.useAdditionalWeekYearTokens)&&(0,u.isProtectedWeekYearToken)(B)&&(0,u.throwProtectedError)(B,ie,String(W)),!(Q!=null&&Q.useAdditionalDayOfYearTokens)&&(0,u.isProtectedDayOfYearToken)(B)&&(0,u.throwProtectedError)(B,ie,String(W)),je(Ie,B,ae.localize,$e);if(ze.match(A))throw new RangeError("Format string contains an unescaped latin alphabet character `"+ze+"`");return B}).join("");return pe}function R(W){var ie=W.match(I);return ie?ie[1].replace(b,"'"):W}n.exports=e.default})(Xd,Xd.exports);var AS=Xd.exports;const kS=Al(AS);function W0(n,e,t){var r=IS(n,t.timeZone,t.locale);return r.formatToParts?CS(r,e):ES(r,e)}function CS(n,e){for(var t=n.formatToParts(e),r=t.length-1;r>=0;--r)if(t[r].type==="timeZoneName")return t[r].value}function ES(n,e){var t=n.format(e).replace(/\u200E/g,""),r=/ [\w-+ ]+$/.exec(t);return r?r[0].substr(1):""}function IS(n,e,t){if(t&&!t.code)throw new Error("date-fns-tz error: Please set a language code on the locale object imported from date-fns, e.g. `locale.code = 'en-US'`");return new Intl.DateTimeFormat(t?[t.code,"en-US"]:void 0,{timeZone:e,timeZoneName:n})}function TS(n,e){var t=OS(e);return t.formatToParts?PS(t,n):DS(t,n)}var LS={year:0,month:1,day:2,hour:3,minute:4,second:5};function PS(n,e){try{for(var t=n.formatToParts(e),r=[],i=0;i<t.length;i++){var s=LS[t[i].type];s>=0&&(r[s]=parseInt(t[i].value,10))}return r}catch(a){if(a instanceof RangeError)return[NaN];throw a}}function DS(n,e){var t=n.format(e),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(t);return[r[3],r[1],r[2],r[4],r[5],r[6]]}var od={};function OS(n){if(!od[n]){var e=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),t=e==="06/25/2014, 00:00:00"||e==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";od[n]=t?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:n,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:n,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return od[n]}function Hp(n,e,t,r,i,s,a){var o=new Date(0);return o.setUTCFullYear(n,e,t),o.setUTCHours(r,i,s,a),o}var z0=36e5,MS=6e4,ld={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function Yu(n,e,t){var r,i;if(!n||(r=ld.timezoneZ.exec(n),r))return 0;var s;if(r=ld.timezoneHH.exec(n),r)return s=parseInt(r[1],10),H0(s)?-(s*z0):NaN;if(r=ld.timezoneHHMM.exec(n),r){s=parseInt(r[2],10);var a=parseInt(r[3],10);return H0(s,a)?(i=Math.abs(s)*z0+a*MS,r[1]==="+"?-i:i):NaN}if(jS(n)){e=new Date(e||Date.now());var o=t?e:RS(e),c=Tf(o,n),u=t?c:FS(e,c,n);return-u}return NaN}function RS(n){return Hp(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())}function Tf(n,e){var t=TS(n,e),r=Hp(t[0],t[1]-1,t[2],t[3]%24,t[4],t[5],0).getTime(),i=n.getTime(),s=i%1e3;return i-=s>=0?s:1e3+s,r-i}function FS(n,e,t){var r=n.getTime(),i=r-e,s=Tf(new Date(i),t);if(e===s)return e;i-=s-e;var a=Tf(new Date(i),t);return s===a?s:Math.max(s,a)}function H0(n,e){return-23<=n&&n<=23&&(e==null||0<=e&&e<=59)}var $0={};function jS(n){if($0[n])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:n}),$0[n]=!0,!0}catch{return!1}}var BS=60*1e3,US={X:function(n,e,t,r){var i=cd(r.timeZone,n);if(i===0)return"Z";switch(e){case"X":return G0(i);case"XXXX":case"XX":return Oa(i);case"XXXXX":case"XXX":default:return Oa(i,":")}},x:function(n,e,t,r){var i=cd(r.timeZone,n);switch(e){case"x":return G0(i);case"xxxx":case"xx":return Oa(i);case"xxxxx":case"xxx":default:return Oa(i,":")}},O:function(n,e,t,r){var i=cd(r.timeZone,n);switch(e){case"O":case"OO":case"OOO":return"GMT"+qS(i,":");case"OOOO":default:return"GMT"+Oa(i,":")}},z:function(n,e,t,r){switch(e){case"z":case"zz":case"zzz":return W0("short",n,r);case"zzzz":default:return W0("long",n,r)}}};function cd(n,e){var t=n?Yu(n,e,!0)/BS:e.getTimezoneOffset();if(Number.isNaN(t))throw new RangeError("Invalid time zone specified: "+n);return t}function Su(n,e){for(var t=n<0?"-":"",r=Math.abs(n).toString();r.length<e;)r="0"+r;return t+r}function Oa(n,e){var t=e||"",r=n>0?"-":"+",i=Math.abs(n),s=Su(Math.floor(i/60),2),a=Su(Math.floor(i%60),2);return r+s+t+a}function G0(n,e){if(n%60===0){var t=n>0?"-":"+";return t+Su(Math.abs(n)/60,2)}return Oa(n,e)}function qS(n,e){var t=n>0?"-":"+",r=Math.abs(n),i=Math.floor(r/60),s=r%60;if(s===0)return t+String(i);var a=e;return t+String(i)+a+Su(s,2)}var $2=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,ud=36e5,Y0=6e4,VS=2,Fn={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:$2};function Au(n,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(n===null)return new Date(NaN);var t=e||{},r=t.additionalDigits==null?VS:XN(t.additionalDigits);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]")return new Date(n.getTime());if(typeof n=="number"||Object.prototype.toString.call(n)==="[object Number]")return new Date(n);if(!(typeof n=="string"||Object.prototype.toString.call(n)==="[object String]"))return new Date(NaN);var i=WS(n),s=zS(i.date,r),a=s.year,o=s.restDateString,c=HS(o,a);if(isNaN(c))return new Date(NaN);if(c){var u=c.getTime(),f=0,p;if(i.time&&(f=$S(i.time),isNaN(f)))return new Date(NaN);if(i.timeZone||t.timeZone){if(p=Yu(i.timeZone||t.timeZone,new Date(u+f)),isNaN(p))return new Date(NaN)}else p=V0(new Date(u+f)),p=V0(new Date(u+f+p));return new Date(u+f+p)}else return new Date(NaN)}function WS(n){var e={},t=Fn.dateTimePattern.exec(n),r;if(t?(e.date=t[1],r=t[3]):(t=Fn.datePattern.exec(n),t?(e.date=t[1],r=t[2]):(e.date=null,r=n)),r){var i=Fn.timeZone.exec(r);i?(e.time=r.replace(i[1],""),e.timeZone=i[1].trim()):e.time=r}return e}function zS(n,e){var t=Fn.YYY[e],r=Fn.YYYYY[e],i;if(i=Fn.YYYY.exec(n)||r.exec(n),i){var s=i[1];return{year:parseInt(s,10),restDateString:n.slice(s.length)}}if(i=Fn.YY.exec(n)||t.exec(n),i){var a=i[1];return{year:parseInt(a,10)*100,restDateString:n.slice(a.length)}}return{year:null}}function HS(n,e){if(e===null)return null;var t,r,i,s;if(n.length===0)return r=new Date(0),r.setUTCFullYear(e),r;if(t=Fn.MM.exec(n),t)return r=new Date(0),i=parseInt(t[1],10)-1,X0(e,i)?(r.setUTCFullYear(e,i),r):new Date(NaN);if(t=Fn.DDD.exec(n),t){r=new Date(0);var a=parseInt(t[1],10);return KS(e,a)?(r.setUTCFullYear(e,0,a),r):new Date(NaN)}if(t=Fn.MMDD.exec(n),t){r=new Date(0),i=parseInt(t[1],10)-1;var o=parseInt(t[2],10);return X0(e,i,o)?(r.setUTCFullYear(e,i,o),r):new Date(NaN)}if(t=Fn.Www.exec(n),t)return s=parseInt(t[1],10)-1,J0(e,s)?K0(e,s):new Date(NaN);if(t=Fn.WwwD.exec(n),t){s=parseInt(t[1],10)-1;var c=parseInt(t[2],10)-1;return J0(e,s,c)?K0(e,s,c):new Date(NaN)}return null}function $S(n){var e,t,r;if(e=Fn.HH.exec(n),e)return t=parseFloat(e[1].replace(",",".")),hd(t)?t%24*ud:NaN;if(e=Fn.HHMM.exec(n),e)return t=parseInt(e[1],10),r=parseFloat(e[2].replace(",",".")),hd(t,r)?t%24*ud+r*Y0:NaN;if(e=Fn.HHMMSS.exec(n),e){t=parseInt(e[1],10),r=parseInt(e[2],10);var i=parseFloat(e[3].replace(",","."));return hd(t,r,i)?t%24*ud+r*Y0+i*1e3:NaN}return null}function K0(n,e,t){e=e||0,t=t||0;var r=new Date(0);r.setUTCFullYear(n,0,4);var i=r.getUTCDay()||7,s=e*7+t+1-i;return r.setUTCDate(r.getUTCDate()+s),r}var GS=[31,28,31,30,31,30,31,31,30,31,30,31],YS=[31,29,31,30,31,30,31,31,30,31,30,31];function G2(n){return n%400===0||n%4===0&&n%100!==0}function X0(n,e,t){if(e<0||e>11)return!1;if(t!=null){if(t<1)return!1;var r=G2(n);if(r&&t>YS[e]||!r&&t>GS[e])return!1}return!0}function KS(n,e){if(e<1)return!1;var t=G2(n);return!(t&&e>366||!t&&e>365)}function J0(n,e,t){return!(e<0||e>52||t!=null&&(t<0||t>6))}function hd(n,e,t){return!(n!=null&&(n<0||n>=25)||e!=null&&(e<0||e>=60)||t!=null&&(t<0||t>=60))}var XS=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function Y2(n,e,t){var r=String(e),i=t||{},s=r.match(XS);if(s){var a=Au(i.originalDate||n,i);r=s.reduce(function(o,c){if(c[0]==="'")return o;var u=o.indexOf(c),f=o[u-1]==="'",p=o.replace(c,"'"+US[c[0]](a,c,null,i)+"'");return f?p.substring(0,u-1)+p.substring(u+1):p},r)}return kS(n,r,i)}var Lf={exports:{}},Pf={exports:{}};(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r,i){if(r==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s]);return r}n.exports=e.default})(Pf,Pf.exports);var JS=Pf.exports;(function(n,e){var t=Wt.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var r=t(JS);function i(s){return(0,r.default)({},s)}n.exports=e.default})(Lf,Lf.exports);var QS=Lf.exports;const ZS=Al(QS);function eA(n,e,t){var r=Au(n,t),i=Yu(e,r,!0),s=new Date(r.getTime()-i),a=new Date(0);return a.setFullYear(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()),a.setHours(s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()),a}function tA(n,e,t){if(typeof n=="string"&&!n.match($2)){var r=ZS(t);return r.timeZone=e,Au(n,r)}var i=Au(n,t),s=Hp(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()).getTime(),a=Yu(e,new Date(s));return new Date(s+a)}function K2(n){if(n===null||n===!0||n===!1)return NaN;var e=Number(n);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Fr(n,e){if(e.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+e.length+" present")}function Jn(n){Fr(1,arguments);var e=Object.prototype.toString.call(n);return n instanceof Date||wt(n)==="object"&&e==="[object Date]"?new Date(n.getTime()):typeof n=="number"||e==="[object Number]"?new Date(n):((typeof n=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function nA(n,e){Fr(2,arguments);var t=Jn(n),r=K2(e);if(isNaN(r))return new Date(NaN);if(!r)return t;var i=t.getDate(),s=new Date(t.getTime());s.setMonth(t.getMonth()+r+1,0);var a=s.getDate();return i>=a?s:(t.setFullYear(s.getFullYear(),s.getMonth(),i),t)}function dd(n,e){Fr(2,arguments);var t=Jn(n),r=Jn(e),i=t.getTime()-r.getTime();return i<0?-1:i>0?1:i}var X2=6e4,J2=36e5;function rA(n,e){Fr(2,arguments);var t=Jn(n),r=Jn(e),i=t.getFullYear()-r.getFullYear(),s=t.getMonth()-r.getMonth();return i*12+s}function iA(n){Fr(1,arguments);var e=Jn(n);return e.setHours(23,59,59,999),e}function Q2(n){Fr(1,arguments);var e=Jn(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}function sA(n){Fr(1,arguments);var e=Jn(n);return iA(e).getTime()===Q2(e).getTime()}function aA(n,e){Fr(2,arguments);var t=Jn(n),r=Jn(e),i=dd(t,r),s=Math.abs(rA(t,r)),a;if(s<1)a=0;else{t.getMonth()===1&&t.getDate()>27&&t.setDate(30),t.setMonth(t.getMonth()-i*s);var o=dd(t,r)===-i;sA(Jn(n))&&s===1&&dd(n,r)===1&&(o=!1),a=i*(s-Number(o))}return a===0?0:a}function oA(n){Fr(1,arguments);var e=Jn(n);return e.setDate(1),e.setHours(0,0,0,0),e}function fd(n){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.width?String(e.width):n.defaultWidth,r=n.formats[t]||n.formats[n.defaultWidth];return r}}function Yo(n){return function(e,t){var r=t!=null&&t.context?String(t.context):"standalone",i;if(r==="formatting"&&n.formattingValues){var s=n.defaultFormattingWidth||n.defaultWidth,a=t!=null&&t.width?String(t.width):s;i=n.formattingValues[a]||n.formattingValues[s]}else{var o=n.defaultWidth,c=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[c]||n.values[o]}var u=n.argumentCallback?n.argumentCallback(e):e;return i[u]}}function Ko(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],s=e.match(i);if(!s)return null;var a=s[0],o=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],c=Array.isArray(o)?cA(o,function(p){return p.test(a)}):lA(o,function(p){return p.test(a)}),u;u=n.valueCallback?n.valueCallback(c):c,u=t.valueCallback?t.valueCallback(u):u;var f=e.slice(a.length);return{value:u,rest:f}}}function lA(n,e){for(var t in n)if(n.hasOwnProperty(t)&&e(n[t]))return t}function cA(n,e){for(var t=0;t<n.length;t++)if(e(n[t]))return t}function uA(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(n.matchPattern);if(!r)return null;var i=r[0],s=e.match(n.parsePattern);if(!s)return null;var a=n.valueCallback?n.valueCallback(s[0]):s[0];a=t.valueCallback?t.valueCallback(a):a;var o=e.slice(i.length);return{value:a,rest:o}}}function hA(n,e){Fr(2,arguments);var t=Jn(n),r=Jn(e);return t.getTime()<r.getTime()}function dA(n,e){var t;Fr(1,arguments);var r=K2((t=void 0)!==null&&t!==void 0?t:2);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof n=="string"||Object.prototype.toString.call(n)==="[object String]"))return new Date(NaN);var i=gA(n),s;if(i.date){var a=vA(i.date,r);s=yA(a.restDateString,a.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);var o=s.getTime(),c=0,u;if(i.time&&(c=_A(i.time),isNaN(c)))return new Date(NaN);if(i.timezone){if(u=bA(i.timezone),isNaN(u))return new Date(NaN)}else{var f=new Date(o+c),p=new Date(0);return p.setFullYear(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()),p.setHours(f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds(),f.getUTCMilliseconds()),p}return new Date(o+c+u)}var Rc={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},fA=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,pA=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,mA=/^([+-])(\d{2})(?::?(\d{2}))?$/;function gA(n){var e={},t=n.split(Rc.dateTimeDelimiter),r;if(t.length>2)return e;if(/:/.test(t[0])?r=t[0]:(e.date=t[0],r=t[1],Rc.timeZoneDelimiter.test(e.date)&&(e.date=n.split(Rc.timeZoneDelimiter)[0],r=n.substr(e.date.length,n.length))),r){var i=Rc.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function vA(n,e){var t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=n.match(t);if(!r)return{year:NaN,restDateString:""};var i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:n.slice((r[1]||r[2]).length)}}function yA(n,e){if(e===null)return new Date(NaN);var t=n.match(fA);if(!t)return new Date(NaN);var r=!!t[4],i=Xo(t[1]),s=Xo(t[2])-1,a=Xo(t[3]),o=Xo(t[4]),c=Xo(t[5])-1;if(r)return AA(e,o,c)?wA(e,o,c):new Date(NaN);var u=new Date(0);return!NA(e,s,a)||!SA(e,i)?new Date(NaN):(u.setUTCFullYear(e,s,Math.max(i,a)),u)}function Xo(n){return n?parseInt(n):1}function _A(n){var e=n.match(pA);if(!e)return NaN;var t=pd(e[1]),r=pd(e[2]),i=pd(e[3]);return kA(t,r,i)?t*J2+r*X2+i*1e3:NaN}function pd(n){return n&&parseFloat(n.replace(",","."))||0}function bA(n){if(n==="Z")return 0;var e=n.match(mA);if(!e)return 0;var t=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return CA(r,i)?t*(r*J2+i*X2):NaN}function wA(n,e,t){var r=new Date(0);r.setUTCFullYear(n,0,4);var i=r.getUTCDay()||7,s=(e-1)*7+t+1-i;return r.setUTCDate(r.getUTCDate()+s),r}var xA=[31,null,31,30,31,30,31,31,30,31,30,31];function Z2(n){return n%400===0||n%4===0&&n%100!==0}function NA(n,e,t){return e>=0&&e<=11&&t>=1&&t<=(xA[e]||(Z2(n)?29:28))}function SA(n,e){return e>=1&&e<=(Z2(n)?366:365)}function AA(n,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function kA(n,e,t){return n===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&n>=0&&n<25}function CA(n,e){return e>=0&&e<=59}const Zs={licencia:"Licencia",vacacional:"Salario Vacacional",aguinaldo:"Aguinaldo"},Ku="America/Montevideo";function Ti(n){try{if(!n)throw new Error("Invalid date");const e=typeof n=="string"?dA(n):n;if(isNaN(e.getTime()))throw new Error("Invalid date");return eA(e,Ku)}catch{return console.error("Invalid date:",n),new Date}}function EA(n){try{if(!n||isNaN(n.getTime()))throw new Error("Invalid date");return tA(n,Ku).toISOString()}catch{return console.error("Invalid date:",n),new Date().toISOString()}}function fs(n){const e=Ti(n);return oA(e)}function ev(n){const e=Ti(n);return Q2(e)}function Xu(n,e){const t=Ti(n);return nA(t,e)}function Ha(n,e){const t=Ti(n),r=Ti(e);return hA(t,r)}function tv(n,e){const t=Ti(n),r=Ti(e);return aA(t,r)}function wl(n,e="yyyy-MM"){try{if(!n)throw new Error("Invalid date");const t=Ti(n);if(isNaN(t.getTime()))throw new Error("Invalid date");return Y2(t,e,{timeZone:Ku})}catch{return console.error("Error formatting date:",n),""}}function IA(n){return wl(n,"MM/yyyy")}function nv(){return Ti(new Date)}function $s(n){return EA(n)}function TA({employee:n,onDelete:e}){return n?_.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[_.jsxs("div",{className:"p-6",children:[_.jsxs("div",{className:"flex justify-between items-start",children:[_.jsx(Cm,{to:`/employees/${n.id}`,className:"text-lg font-semibold text-gray-900 hover:text-gray-700",children:n.fullName}),_.jsx("button",{onClick:()=>e(n),className:"text-red-600 hover:text-red-800",title:"Eliminar empleado",children:_.jsx(Vp,{className:"w-5 h-5"})})]}),_.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["CI: ",n.ci]}),_.jsxs("div",{className:"mt-4 space-y-3",children:[_.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[_.jsx(Nu,{className:"w-4 h-4"}),_.jsxs("span",{children:["Ingreso: ",wl(n.startDate)]})]}),_.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[_.jsx(Gu,{className:"w-4 h-4"}),_.jsxs("span",{children:["Salario: $",or(n.currentSalary)]})]})]})]}),_.jsx("div",{className:"px-6 py-3 bg-gray-50",children:_.jsx(Cm,{to:`/employees/${n.id}`,className:"text-sm text-gray-600 hover:text-gray-900",children:"Ver detalles →"})})]}):null}function LA(){const[n,e]=ke.useState([]),[t,r]=ke.useState(!0);ke.useEffect(()=>{i()},[]);const i=async()=>{try{const a=await Un(xt(Nt,"employees"));if(a.exists()){const o=Object.values(a.val());e(o)}else e([])}catch(a){console.error("Error loading employees:",a),Lt.error("Error al cargar los empleados")}finally{r(!1)}},s=async a=>{if(confirm(`¿Está seguro que desea eliminar al empleado ${a.fullName}? Esta acción eliminará todos los datos asociados y no se puede deshacer.`))try{const o={[`employees/${a.id}`]:null,[`salaryHistory/${a.id}`]:null,[`movements/${a.id}`]:null};await jl(xt(Nt),o),Lt.success("Empleado eliminado exitosamente"),i()}catch(o){console.error("Error deleting employee:",o),Lt.error("Error al eliminar el empleado")}};return t?_.jsx("div",{className:"text-center py-6",children:_.jsx("p",{className:"text-gray-500",children:"Cargando empleados..."})}):_.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(a=>_.jsx(TA,{employee:a,onDelete:s},a.id))})}function cs(n){return typeof n=="string"||n instanceof String}function Q0(n){var e;return typeof n=="object"&&n!=null&&(n==null||(e=n.constructor)==null?void 0:e.name)==="Object"}function rv(n,e){return Array.isArray(e)?rv(n,(t,r)=>e.includes(r)):Object.entries(n).reduce((t,r)=>{let[i,s]=r;return e(s,i)&&(t[i]=s),t},{})}const qe={NONE:"NONE",LEFT:"LEFT",FORCE_LEFT:"FORCE_LEFT",RIGHT:"RIGHT",FORCE_RIGHT:"FORCE_RIGHT"};function PA(n){switch(n){case qe.LEFT:return qe.FORCE_LEFT;case qe.RIGHT:return qe.FORCE_RIGHT;default:return n}}function md(n){return n.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}function ku(n,e){if(e===n)return!0;const t=Array.isArray(e),r=Array.isArray(n);let i;if(t&&r){if(e.length!=n.length)return!1;for(i=0;i<e.length;i++)if(!ku(e[i],n[i]))return!1;return!0}if(t!=r)return!1;if(e&&n&&typeof e=="object"&&typeof n=="object"){const s=e instanceof Date,a=n instanceof Date;if(s&&a)return e.getTime()==n.getTime();if(s!=a)return!1;const o=e instanceof RegExp,c=n instanceof RegExp;if(o&&c)return e.toString()==n.toString();if(o!=c)return!1;const u=Object.keys(e);for(i=0;i<u.length;i++)if(!Object.prototype.hasOwnProperty.call(n,u[i]))return!1;for(i=0;i<u.length;i++)if(!ku(n[u[i]],e[u[i]]))return!1;return!0}else if(e&&n&&typeof e=="function"&&typeof n=="function")return e.toString()===n.toString();return!1}class DA{constructor(e){for(Object.assign(this,e);this.value.slice(0,this.startChangePos)!==this.oldValue.slice(0,this.startChangePos);)--this.oldSelection.start;if(this.insertedCount)for(;this.value.slice(this.cursorPos)!==this.oldValue.slice(this.oldSelection.end);)this.value.length-this.cursorPos<this.oldValue.length-this.oldSelection.end?++this.oldSelection.end:++this.cursorPos}get startChangePos(){return Math.min(this.cursorPos,this.oldSelection.start)}get insertedCount(){return this.cursorPos-this.startChangePos}get inserted(){return this.value.substr(this.startChangePos,this.insertedCount)}get removedCount(){return Math.max(this.oldSelection.end-this.startChangePos||this.oldValue.length-this.value.length,0)}get removed(){return this.oldValue.substr(this.startChangePos,this.removedCount)}get head(){return this.value.substring(0,this.startChangePos)}get tail(){return this.value.substring(this.startChangePos+this.insertedCount)}get removeDirection(){return!this.removedCount||this.insertedCount?qe.NONE:(this.oldSelection.end===this.cursorPos||this.oldSelection.start===this.cursorPos)&&this.oldSelection.end===this.oldSelection.start?qe.RIGHT:qe.LEFT}}function Ze(n,e){return new Ze.InputMask(n,e)}function iv(n){if(n==null)throw new Error("mask property should be defined");return n instanceof RegExp?Ze.MaskedRegExp:cs(n)?Ze.MaskedPattern:n===Date?Ze.MaskedDate:n===Number?Ze.MaskedNumber:Array.isArray(n)||n===Array?Ze.MaskedDynamic:Ze.Masked&&n.prototype instanceof Ze.Masked?n:Ze.Masked&&n instanceof Ze.Masked?n.constructor:n instanceof Function?Ze.MaskedFunction:(console.warn("Mask not found for mask",n),Ze.Masked)}function xl(n){if(!n)throw new Error("Options in not defined");if(Ze.Masked){if(n.prototype instanceof Ze.Masked)return{mask:n};const{mask:e=void 0,...t}=n instanceof Ze.Masked?{mask:n}:Q0(n)&&n.mask instanceof Ze.Masked?n:{};if(e){const r=e.mask;return{...rv(e,(i,s)=>!s.startsWith("_")),mask:e.constructor,_mask:r,...t}}}return Q0(n)?{...n}:{mask:n}}function Li(n){if(Ze.Masked&&n instanceof Ze.Masked)return n;const e=xl(n),t=iv(e.mask);if(!t)throw new Error("Masked class is not found for provided mask "+e.mask+", appropriate module needs to be imported manually before creating mask.");return e.mask===t&&delete e.mask,e._mask&&(e.mask=e._mask,delete e._mask),new t(e)}Ze.createMask=Li;class $p{get selectionStart(){let e;try{e=this._unsafeSelectionStart}catch{}return e??this.value.length}get selectionEnd(){let e;try{e=this._unsafeSelectionEnd}catch{}return e??this.value.length}select(e,t){if(!(e==null||t==null||e===this.selectionStart&&t===this.selectionEnd))try{this._unsafeSelect(e,t)}catch{}}get isActive(){return!1}}Ze.MaskElement=$p;const Z0=90,OA=89;class Ju extends $p{constructor(e){super(),this.input=e,this._onKeydown=this._onKeydown.bind(this),this._onInput=this._onInput.bind(this),this._onBeforeinput=this._onBeforeinput.bind(this),this._onCompositionEnd=this._onCompositionEnd.bind(this)}get rootElement(){var e,t,r;return(e=(t=(r=this.input).getRootNode)==null?void 0:t.call(r))!=null?e:document}get isActive(){return this.input===this.rootElement.activeElement}bindEvents(e){this.input.addEventListener("keydown",this._onKeydown),this.input.addEventListener("input",this._onInput),this.input.addEventListener("beforeinput",this._onBeforeinput),this.input.addEventListener("compositionend",this._onCompositionEnd),this.input.addEventListener("drop",e.drop),this.input.addEventListener("click",e.click),this.input.addEventListener("focus",e.focus),this.input.addEventListener("blur",e.commit),this._handlers=e}_onKeydown(e){if(this._handlers.redo&&(e.keyCode===Z0&&e.shiftKey&&(e.metaKey||e.ctrlKey)||e.keyCode===OA&&e.ctrlKey))return e.preventDefault(),this._handlers.redo(e);if(this._handlers.undo&&e.keyCode===Z0&&(e.metaKey||e.ctrlKey))return e.preventDefault(),this._handlers.undo(e);e.isComposing||this._handlers.selectionChange(e)}_onBeforeinput(e){if(e.inputType==="historyUndo"&&this._handlers.undo)return e.preventDefault(),this._handlers.undo(e);if(e.inputType==="historyRedo"&&this._handlers.redo)return e.preventDefault(),this._handlers.redo(e)}_onCompositionEnd(e){this._handlers.input(e)}_onInput(e){e.isComposing||this._handlers.input(e)}unbindEvents(){this.input.removeEventListener("keydown",this._onKeydown),this.input.removeEventListener("input",this._onInput),this.input.removeEventListener("beforeinput",this._onBeforeinput),this.input.removeEventListener("compositionend",this._onCompositionEnd),this.input.removeEventListener("drop",this._handlers.drop),this.input.removeEventListener("click",this._handlers.click),this.input.removeEventListener("focus",this._handlers.focus),this.input.removeEventListener("blur",this._handlers.commit),this._handlers={}}}Ze.HTMLMaskElement=Ju;class MA extends Ju{constructor(e){super(e),this.input=e}get _unsafeSelectionStart(){return this.input.selectionStart!=null?this.input.selectionStart:this.value.length}get _unsafeSelectionEnd(){return this.input.selectionEnd}_unsafeSelect(e,t){this.input.setSelectionRange(e,t)}get value(){return this.input.value}set value(e){this.input.value=e}}Ze.HTMLMaskElement=Ju;class sv extends Ju{get _unsafeSelectionStart(){const e=this.rootElement,t=e.getSelection&&e.getSelection(),r=t&&t.anchorOffset,i=t&&t.focusOffset;return i==null||r==null||r<i?r:i}get _unsafeSelectionEnd(){const e=this.rootElement,t=e.getSelection&&e.getSelection(),r=t&&t.anchorOffset,i=t&&t.focusOffset;return i==null||r==null||r>i?r:i}_unsafeSelect(e,t){if(!this.rootElement.createRange)return;const r=this.rootElement.createRange();r.setStart(this.input.firstChild||this.input,e),r.setEnd(this.input.lastChild||this.input,t);const i=this.rootElement,s=i.getSelection&&i.getSelection();s&&(s.removeAllRanges(),s.addRange(r))}get value(){return this.input.textContent||""}set value(e){this.input.textContent=e}}Ze.HTMLContenteditableMaskElement=sv;class Qu{constructor(){this.states=[],this.currentIndex=0}get currentState(){return this.states[this.currentIndex]}get isEmpty(){return this.states.length===0}push(e){this.currentIndex<this.states.length-1&&(this.states.length=this.currentIndex+1),this.states.push(e),this.states.length>Qu.MAX_LENGTH&&this.states.shift(),this.currentIndex=this.states.length-1}go(e){return this.currentIndex=Math.min(Math.max(this.currentIndex+e,0),this.states.length-1),this.currentState}undo(){return this.go(-1)}redo(){return this.go(1)}clear(){this.states.length=0,this.currentIndex=0}}Qu.MAX_LENGTH=100;class RA{constructor(e,t){this.el=e instanceof $p?e:e.isContentEditable&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"?new sv(e):new MA(e),this.masked=Li(t),this._listeners={},this._value="",this._unmaskedValue="",this._rawInputValue="",this.history=new Qu,this._saveSelection=this._saveSelection.bind(this),this._onInput=this._onInput.bind(this),this._onChange=this._onChange.bind(this),this._onDrop=this._onDrop.bind(this),this._onFocus=this._onFocus.bind(this),this._onClick=this._onClick.bind(this),this._onUndo=this._onUndo.bind(this),this._onRedo=this._onRedo.bind(this),this.alignCursor=this.alignCursor.bind(this),this.alignCursorFriendly=this.alignCursorFriendly.bind(this),this._bindEvents(),this.updateValue(),this._onChange()}maskEquals(e){var t;return e==null||((t=this.masked)==null?void 0:t.maskEquals(e))}get mask(){return this.masked.mask}set mask(e){if(this.maskEquals(e))return;if(!(e instanceof Ze.Masked)&&this.masked.constructor===iv(e)){this.masked.updateOptions({mask:e});return}const t=e instanceof Ze.Masked?e:Li({mask:e});t.unmaskedValue=this.masked.unmaskedValue,this.masked=t}get value(){return this._value}set value(e){this.value!==e&&(this.masked.value=e,this.updateControl("auto"))}get unmaskedValue(){return this._unmaskedValue}set unmaskedValue(e){this.unmaskedValue!==e&&(this.masked.unmaskedValue=e,this.updateControl("auto"))}get rawInputValue(){return this._rawInputValue}set rawInputValue(e){this.rawInputValue!==e&&(this.masked.rawInputValue=e,this.updateControl(),this.alignCursor())}get typedValue(){return this.masked.typedValue}set typedValue(e){this.masked.typedValueEquals(e)||(this.masked.typedValue=e,this.updateControl("auto"))}get displayValue(){return this.masked.displayValue}_bindEvents(){this.el.bindEvents({selectionChange:this._saveSelection,input:this._onInput,drop:this._onDrop,click:this._onClick,focus:this._onFocus,commit:this._onChange,undo:this._onUndo,redo:this._onRedo})}_unbindEvents(){this.el&&this.el.unbindEvents()}_fireEvent(e,t){const r=this._listeners[e];r&&r.forEach(i=>i(t))}get selectionStart(){return this._cursorChanging?this._changingCursorPos:this.el.selectionStart}get cursorPos(){return this._cursorChanging?this._changingCursorPos:this.el.selectionEnd}set cursorPos(e){!this.el||!this.el.isActive||(this.el.select(e,e),this._saveSelection())}_saveSelection(){this.displayValue!==this.el.value&&console.warn("Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly."),this._selection={start:this.selectionStart,end:this.cursorPos}}updateValue(){this.masked.value=this.el.value,this._value=this.masked.value,this._unmaskedValue=this.masked.unmaskedValue,this._rawInputValue=this.masked.rawInputValue}updateControl(e){const t=this.masked.unmaskedValue,r=this.masked.value,i=this.masked.rawInputValue,s=this.displayValue,a=this.unmaskedValue!==t||this.value!==r||this._rawInputValue!==i;this._unmaskedValue=t,this._value=r,this._rawInputValue=i,this.el.value!==s&&(this.el.value=s),e==="auto"?this.alignCursor():e!=null&&(this.cursorPos=e),a&&this._fireChangeEvents(),!this._historyChanging&&(a||this.history.isEmpty)&&this.history.push({unmaskedValue:t,selection:{start:this.selectionStart,end:this.cursorPos}})}updateOptions(e){const{mask:t,...r}=e,i=!this.maskEquals(t),s=this.masked.optionsIsChanged(r);i&&(this.mask=t),s&&this.masked.updateOptions(r),(i||s)&&this.updateControl()}updateCursor(e){e!=null&&(this.cursorPos=e,this._delayUpdateCursor(e))}_delayUpdateCursor(e){this._abortUpdateCursor(),this._changingCursorPos=e,this._cursorChanging=setTimeout(()=>{this.el&&(this.cursorPos=this._changingCursorPos,this._abortUpdateCursor())},10)}_fireChangeEvents(){this._fireEvent("accept",this._inputEvent),this.masked.isComplete&&this._fireEvent("complete",this._inputEvent)}_abortUpdateCursor(){this._cursorChanging&&(clearTimeout(this._cursorChanging),delete this._cursorChanging)}alignCursor(){this.cursorPos=this.masked.nearestInputPos(this.masked.nearestInputPos(this.cursorPos,qe.LEFT))}alignCursorFriendly(){this.selectionStart===this.cursorPos&&this.alignCursor()}on(e,t){return this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t),this}off(e,t){if(!this._listeners[e])return this;if(!t)return delete this._listeners[e],this;const r=this._listeners[e].indexOf(t);return r>=0&&this._listeners[e].splice(r,1),this}_onInput(e){this._inputEvent=e,this._abortUpdateCursor();const t=new DA({value:this.el.value,cursorPos:this.cursorPos,oldValue:this.displayValue,oldSelection:this._selection}),r=this.masked.rawInputValue,i=this.masked.splice(t.startChangePos,t.removed.length,t.inserted,t.removeDirection,{input:!0,raw:!0}).offset,s=r===this.masked.rawInputValue?t.removeDirection:qe.NONE;let a=this.masked.nearestInputPos(t.startChangePos+i,s);s!==qe.NONE&&(a=this.masked.nearestInputPos(a,qe.NONE)),this.updateControl(a),delete this._inputEvent}_onChange(){this.displayValue!==this.el.value&&this.updateValue(),this.masked.doCommit(),this.updateControl(),this._saveSelection()}_onDrop(e){e.preventDefault(),e.stopPropagation()}_onFocus(e){this.alignCursorFriendly()}_onClick(e){this.alignCursorFriendly()}_onUndo(){this._applyHistoryState(this.history.undo())}_onRedo(){this._applyHistoryState(this.history.redo())}_applyHistoryState(e){e&&(this._historyChanging=!0,this.unmaskedValue=e.unmaskedValue,this.el.select(e.selection.start,e.selection.end),this._saveSelection(),this._historyChanging=!1)}destroy(){this._unbindEvents(),this._listeners.length=0,delete this.el}}Ze.InputMask=RA;class lt{static normalize(e){return Array.isArray(e)?e:[e,new lt]}constructor(e){Object.assign(this,{inserted:"",rawInserted:"",tailShift:0,skip:!1},e)}aggregate(e){return this.inserted+=e.inserted,this.rawInserted+=e.rawInserted,this.tailShift+=e.tailShift,this.skip=this.skip||e.skip,this}get offset(){return this.tailShift+this.inserted.length}get consumed(){return!!this.rawInserted||this.skip}equals(e){return this.inserted===e.inserted&&this.tailShift===e.tailShift&&this.rawInserted===e.rawInserted&&this.skip===e.skip}}Ze.ChangeDetails=lt;class Jr{constructor(e,t,r){e===void 0&&(e=""),t===void 0&&(t=0),this.value=e,this.from=t,this.stop=r}toString(){return this.value}extend(e){this.value+=String(e)}appendTo(e){return e.append(this.toString(),{tail:!0}).aggregate(e._appendPlaceholder())}get state(){return{value:this.value,from:this.from,stop:this.stop}}set state(e){Object.assign(this,e)}unshift(e){if(!this.value.length||e!=null&&this.from>=e)return"";const t=this.value[0];return this.value=this.value.slice(1),t}shift(){if(!this.value.length)return"";const e=this.value[this.value.length-1];return this.value=this.value.slice(0,-1),e}}class Ln{constructor(e){this._value="",this._update({...Ln.DEFAULTS,...e}),this._initialized=!0}updateOptions(e){this.optionsIsChanged(e)&&this.withValueRefresh(this._update.bind(this,e))}_update(e){Object.assign(this,e)}get state(){return{_value:this.value,_rawInputValue:this.rawInputValue}}set state(e){this._value=e._value}reset(){this._value=""}get value(){return this._value}set value(e){this.resolve(e,{input:!0})}resolve(e,t){t===void 0&&(t={input:!0}),this.reset(),this.append(e,t,""),this.doCommit()}get unmaskedValue(){return this.value}set unmaskedValue(e){this.resolve(e,{})}get typedValue(){return this.parse?this.parse(this.value,this):this.unmaskedValue}set typedValue(e){this.format?this.value=this.format(e,this):this.unmaskedValue=String(e)}get rawInputValue(){return this.extractInput(0,this.displayValue.length,{raw:!0})}set rawInputValue(e){this.resolve(e,{raw:!0})}get displayValue(){return this.value}get isComplete(){return!0}get isFilled(){return this.isComplete}nearestInputPos(e,t){return e}totalInputPositions(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length),Math.min(this.displayValue.length,t-e)}extractInput(e,t,r){return e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length),this.displayValue.slice(e,t)}extractTail(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length),new Jr(this.extractInput(e,t),e)}appendTail(e){return cs(e)&&(e=new Jr(String(e))),e.appendTo(this)}_appendCharRaw(e,t){return e?(this._value+=e,new lt({inserted:e,rawInserted:e})):new lt}_appendChar(e,t,r){t===void 0&&(t={});const i=this.state;let s;if([e,s]=this.doPrepareChar(e,t),e&&(s=s.aggregate(this._appendCharRaw(e,t)),!s.rawInserted&&this.autofix==="pad")){const a=this.state;this.state=i;let o=this.pad(t);const c=this._appendCharRaw(e,t);o=o.aggregate(c),c.rawInserted||o.equals(s)?s=o:this.state=a}if(s.inserted){let a,o=this.doValidate(t)!==!1;if(o&&r!=null){const c=this.state;if(this.overwrite===!0){a=r.state;for(let f=0;f<s.rawInserted.length;++f)r.unshift(this.displayValue.length-s.tailShift)}let u=this.appendTail(r);if(o=u.rawInserted.length===r.toString().length,!(o&&u.inserted)&&this.overwrite==="shift"){this.state=c,a=r.state;for(let f=0;f<s.rawInserted.length;++f)r.shift();u=this.appendTail(r),o=u.rawInserted.length===r.toString().length}o&&u.inserted&&(this.state=c)}o||(s=new lt,this.state=i,r&&a&&(r.state=a))}return s}_appendPlaceholder(){return new lt}_appendEager(){return new lt}append(e,t,r){if(!cs(e))throw new Error("value should be string");const i=cs(r)?new Jr(String(r)):r;t!=null&&t.tail&&(t._beforeTailState=this.state);let s;[e,s]=this.doPrepare(e,t);for(let a=0;a<e.length;++a){const o=this._appendChar(e[a],t,i);if(!o.rawInserted&&!this.doSkipInvalid(e[a],t,i))break;s.aggregate(o)}return(this.eager===!0||this.eager==="append")&&t!=null&&t.input&&e&&s.aggregate(this._appendEager()),i!=null&&(s.tailShift+=this.appendTail(i).tailShift),s}remove(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length),this._value=this.displayValue.slice(0,e)+this.displayValue.slice(t),new lt}withValueRefresh(e){if(this._refreshing||!this._initialized)return e();this._refreshing=!0;const t=this.rawInputValue,r=this.value,i=e();return this.rawInputValue=t,this.value&&this.value!==r&&r.indexOf(this.value)===0&&(this.append(r.slice(this.displayValue.length),{},""),this.doCommit()),delete this._refreshing,i}runIsolated(e){if(this._isolated||!this._initialized)return e(this);this._isolated=!0;const t=this.state,r=e(this);return this.state=t,delete this._isolated,r}doSkipInvalid(e,t,r){return!!this.skipInvalid}doPrepare(e,t){return t===void 0&&(t={}),lt.normalize(this.prepare?this.prepare(e,this,t):e)}doPrepareChar(e,t){return t===void 0&&(t={}),lt.normalize(this.prepareChar?this.prepareChar(e,this,t):e)}doValidate(e){return(!this.validate||this.validate(this.value,this,e))&&(!this.parent||this.parent.doValidate(e))}doCommit(){this.commit&&this.commit(this.value,this)}splice(e,t,r,i,s){r===void 0&&(r=""),i===void 0&&(i=qe.NONE),s===void 0&&(s={input:!0});const a=e+t,o=this.extractTail(a),c=this.eager===!0||this.eager==="remove";let u;c&&(i=PA(i),u=this.extractInput(0,a,{raw:!0}));let f=e;const p=new lt;if(i!==qe.NONE&&(f=this.nearestInputPos(e,t>1&&e!==0&&!c?qe.NONE:i),p.tailShift=f-e),p.aggregate(this.remove(f)),c&&i!==qe.NONE&&u===this.rawInputValue)if(i===qe.FORCE_LEFT){let v;for(;u===this.rawInputValue&&(v=this.displayValue.length);)p.aggregate(new lt({tailShift:-1})).aggregate(this.remove(v-1))}else i===qe.FORCE_RIGHT&&o.unshift();return p.aggregate(this.append(r,s,o))}maskEquals(e){return this.mask===e}optionsIsChanged(e){return!ku(this,e)}typedValueEquals(e){const t=this.typedValue;return e===t||Ln.EMPTY_VALUES.includes(e)&&Ln.EMPTY_VALUES.includes(t)||(this.format?this.format(e,this)===this.format(this.typedValue,this):!1)}pad(e){return new lt}}Ln.DEFAULTS={skipInvalid:!0};Ln.EMPTY_VALUES=[void 0,null,""];Ze.Masked=Ln;class js{constructor(e,t){e===void 0&&(e=[]),t===void 0&&(t=0),this.chunks=e,this.from=t}toString(){return this.chunks.map(String).join("")}extend(e){if(!String(e))return;e=cs(e)?new Jr(String(e)):e;const t=this.chunks[this.chunks.length-1],r=t&&(t.stop===e.stop||e.stop==null)&&e.from===t.from+t.toString().length;if(e instanceof Jr)r?t.extend(e.toString()):this.chunks.push(e);else if(e instanceof js){if(e.stop==null){let i;for(;e.chunks.length&&e.chunks[0].stop==null;)i=e.chunks.shift(),i.from+=e.from,this.extend(i)}e.toString()&&(e.stop=e.blockIndex,this.chunks.push(e))}}appendTo(e){if(!(e instanceof Ze.MaskedPattern))return new Jr(this.toString()).appendTo(e);const t=new lt;for(let r=0;r<this.chunks.length;++r){const i=this.chunks[r],s=e._mapPosToBlock(e.displayValue.length),a=i.stop;let o;if(a!=null&&(!s||s.index<=a)&&((i instanceof js||e._stops.indexOf(a)>=0)&&t.aggregate(e._appendPlaceholder(a)),o=i instanceof js&&e._blocks[a]),o){const c=o.appendTail(i);t.aggregate(c);const u=i.toString().slice(c.rawInserted.length);u&&t.aggregate(e.append(u,{tail:!0}))}else t.aggregate(e.append(i.toString(),{tail:!0}))}return t}get state(){return{chunks:this.chunks.map(e=>e.state),from:this.from,stop:this.stop,blockIndex:this.blockIndex}}set state(e){const{chunks:t,...r}=e;Object.assign(this,r),this.chunks=t.map(i=>{const s="chunks"in i?new js:new Jr;return s.state=i,s})}unshift(e){if(!this.chunks.length||e!=null&&this.from>=e)return"";const t=e!=null?e-this.from:e;let r=0;for(;r<this.chunks.length;){const i=this.chunks[r],s=i.unshift(t);if(i.toString()){if(!s)break;++r}else this.chunks.splice(r,1);if(s)return s}return""}shift(){if(!this.chunks.length)return"";let e=this.chunks.length-1;for(;0<=e;){const t=this.chunks[e],r=t.shift();if(t.toString()){if(!r)break;--e}else this.chunks.splice(e,1);if(r)return r}return""}}class FA{constructor(e,t){this.masked=e,this._log=[];const{offset:r,index:i}=e._mapPosToBlock(t)||(t<0?{index:0,offset:0}:{index:this.masked._blocks.length,offset:0});this.offset=r,this.index=i,this.ok=!1}get block(){return this.masked._blocks[this.index]}get pos(){return this.masked._blockStartPos(this.index)+this.offset}get state(){return{index:this.index,offset:this.offset,ok:this.ok}}set state(e){Object.assign(this,e)}pushState(){this._log.push(this.state)}popState(){const e=this._log.pop();return e&&(this.state=e),e}bindBlock(){this.block||(this.index<0&&(this.index=0,this.offset=0),this.index>=this.masked._blocks.length&&(this.index=this.masked._blocks.length-1,this.offset=this.block.displayValue.length))}_pushLeft(e){for(this.pushState(),this.bindBlock();0<=this.index;--this.index,this.offset=((t=this.block)==null?void 0:t.displayValue.length)||0){var t;if(e())return this.ok=!0}return this.ok=!1}_pushRight(e){for(this.pushState(),this.bindBlock();this.index<this.masked._blocks.length;++this.index,this.offset=0)if(e())return this.ok=!0;return this.ok=!1}pushLeftBeforeFilled(){return this._pushLeft(()=>{if(!(this.block.isFixed||!this.block.value)&&(this.offset=this.block.nearestInputPos(this.offset,qe.FORCE_LEFT),this.offset!==0))return!0})}pushLeftBeforeInput(){return this._pushLeft(()=>{if(!this.block.isFixed)return this.offset=this.block.nearestInputPos(this.offset,qe.LEFT),!0})}pushLeftBeforeRequired(){return this._pushLeft(()=>{if(!(this.block.isFixed||this.block.isOptional&&!this.block.value))return this.offset=this.block.nearestInputPos(this.offset,qe.LEFT),!0})}pushRightBeforeFilled(){return this._pushRight(()=>{if(!(this.block.isFixed||!this.block.value)&&(this.offset=this.block.nearestInputPos(this.offset,qe.FORCE_RIGHT),this.offset!==this.block.value.length))return!0})}pushRightBeforeInput(){return this._pushRight(()=>{if(!this.block.isFixed)return this.offset=this.block.nearestInputPos(this.offset,qe.NONE),!0})}pushRightBeforeRequired(){return this._pushRight(()=>{if(!(this.block.isFixed||this.block.isOptional&&!this.block.value))return this.offset=this.block.nearestInputPos(this.offset,qe.NONE),!0})}}class av{constructor(e){Object.assign(this,e),this._value="",this.isFixed=!0}get value(){return this._value}get unmaskedValue(){return this.isUnmasking?this.value:""}get rawInputValue(){return this._isRawInput?this.value:""}get displayValue(){return this.value}reset(){this._isRawInput=!1,this._value=""}remove(e,t){return e===void 0&&(e=0),t===void 0&&(t=this._value.length),this._value=this._value.slice(0,e)+this._value.slice(t),this._value||(this._isRawInput=!1),new lt}nearestInputPos(e,t){t===void 0&&(t=qe.NONE);const r=0,i=this._value.length;switch(t){case qe.LEFT:case qe.FORCE_LEFT:return r;case qe.NONE:case qe.RIGHT:case qe.FORCE_RIGHT:default:return i}}totalInputPositions(e,t){return e===void 0&&(e=0),t===void 0&&(t=this._value.length),this._isRawInput?t-e:0}extractInput(e,t,r){return e===void 0&&(e=0),t===void 0&&(t=this._value.length),r===void 0&&(r={}),r.raw&&this._isRawInput&&this._value.slice(e,t)||""}get isComplete(){return!0}get isFilled(){return!!this._value}_appendChar(e,t){if(t===void 0&&(t={}),this.isFilled)return new lt;const r=this.eager===!0||this.eager==="append",s=this.char===e&&(this.isUnmasking||t.input||t.raw)&&(!t.raw||!r)&&!t.tail,a=new lt({inserted:this.char,rawInserted:s?this.char:""});return this._value=this.char,this._isRawInput=s&&(t.raw||t.input),a}_appendEager(){return this._appendChar(this.char,{tail:!0})}_appendPlaceholder(){const e=new lt;return this.isFilled||(this._value=e.inserted=this.char),e}extractTail(){return new Jr("")}appendTail(e){return cs(e)&&(e=new Jr(String(e))),e.appendTo(this)}append(e,t,r){const i=this._appendChar(e[0],t);return r!=null&&(i.tailShift+=this.appendTail(r).tailShift),i}doCommit(){}get state(){return{_value:this._value,_rawInputValue:this.rawInputValue}}set state(e){this._value=e._value,this._isRawInput=!!e._rawInputValue}pad(e){return this._appendPlaceholder()}}class Cu{constructor(e){const{parent:t,isOptional:r,placeholderChar:i,displayChar:s,lazy:a,eager:o,...c}=e;this.masked=Li(c),Object.assign(this,{parent:t,isOptional:r,placeholderChar:i,displayChar:s,lazy:a,eager:o})}reset(){this.isFilled=!1,this.masked.reset()}remove(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.value.length),e===0&&t>=1?(this.isFilled=!1,this.masked.remove(e,t)):new lt}get value(){return this.masked.value||(this.isFilled&&!this.isOptional?this.placeholderChar:"")}get unmaskedValue(){return this.masked.unmaskedValue}get rawInputValue(){return this.masked.rawInputValue}get displayValue(){return this.masked.value&&this.displayChar||this.value}get isComplete(){return!!this.masked.value||this.isOptional}_appendChar(e,t){if(t===void 0&&(t={}),this.isFilled)return new lt;const r=this.masked.state;let i=this.masked._appendChar(e,this.currentMaskFlags(t));return i.inserted&&this.doValidate(t)===!1&&(i=new lt,this.masked.state=r),!i.inserted&&!this.isOptional&&!this.lazy&&!t.input&&(i.inserted=this.placeholderChar),i.skip=!i.inserted&&!this.isOptional,this.isFilled=!!i.inserted,i}append(e,t,r){return this.masked.append(e,this.currentMaskFlags(t),r)}_appendPlaceholder(){return this.isFilled||this.isOptional?new lt:(this.isFilled=!0,new lt({inserted:this.placeholderChar}))}_appendEager(){return new lt}extractTail(e,t){return this.masked.extractTail(e,t)}appendTail(e){return this.masked.appendTail(e)}extractInput(e,t,r){return e===void 0&&(e=0),t===void 0&&(t=this.value.length),this.masked.extractInput(e,t,r)}nearestInputPos(e,t){t===void 0&&(t=qe.NONE);const r=0,i=this.value.length,s=Math.min(Math.max(e,r),i);switch(t){case qe.LEFT:case qe.FORCE_LEFT:return this.isComplete?s:r;case qe.RIGHT:case qe.FORCE_RIGHT:return this.isComplete?s:i;case qe.NONE:default:return s}}totalInputPositions(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.value.length),this.value.slice(e,t).length}doValidate(e){return this.masked.doValidate(this.currentMaskFlags(e))&&(!this.parent||this.parent.doValidate(this.currentMaskFlags(e)))}doCommit(){this.masked.doCommit()}get state(){return{_value:this.value,_rawInputValue:this.rawInputValue,masked:this.masked.state,isFilled:this.isFilled}}set state(e){this.masked.state=e.masked,this.isFilled=e.isFilled}currentMaskFlags(e){var t;return{...e,_beforeTailState:(e==null||(t=e._beforeTailState)==null?void 0:t.masked)||(e==null?void 0:e._beforeTailState)}}pad(e){return new lt}}Cu.DEFAULT_DEFINITIONS={0:/\d/,a:/[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,"*":/./};class jA extends Ln{updateOptions(e){super.updateOptions(e)}_update(e){const t=e.mask;t&&(e.validate=r=>r.search(t)>=0),super._update(e)}}Ze.MaskedRegExp=jA;class Pn extends Ln{constructor(e){super({...Pn.DEFAULTS,...e,definitions:Object.assign({},Cu.DEFAULT_DEFINITIONS,e==null?void 0:e.definitions)})}updateOptions(e){super.updateOptions(e)}_update(e){e.definitions=Object.assign({},this.definitions,e.definitions),super._update(e),this._rebuildMask()}_rebuildMask(){const e=this.definitions;this._blocks=[],this.exposeBlock=void 0,this._stops=[],this._maskedBlocks={};const t=this.mask;if(!t||!e)return;let r=!1,i=!1;for(let s=0;s<t.length;++s){if(this.blocks){const u=t.slice(s),f=Object.keys(this.blocks).filter(v=>u.indexOf(v)===0);f.sort((v,g)=>g.length-v.length);const p=f[0];if(p){const{expose:v,repeat:g,...N}=xl(this.blocks[p]),S={lazy:this.lazy,eager:this.eager,placeholderChar:this.placeholderChar,displayChar:this.displayChar,overwrite:this.overwrite,autofix:this.autofix,...N,repeat:g,parent:this},I=g!=null?new Ze.RepeatBlock(S):Li(S);I&&(this._blocks.push(I),v&&(this.exposeBlock=I),this._maskedBlocks[p]||(this._maskedBlocks[p]=[]),this._maskedBlocks[p].push(this._blocks.length-1)),s+=p.length-1;continue}}let a=t[s],o=a in e;if(a===Pn.STOP_CHAR){this._stops.push(this._blocks.length);continue}if(a==="{"||a==="}"){r=!r;continue}if(a==="["||a==="]"){i=!i;continue}if(a===Pn.ESCAPE_CHAR){if(++s,a=t[s],!a)break;o=!1}const c=o?new Cu({isOptional:i,lazy:this.lazy,eager:this.eager,placeholderChar:this.placeholderChar,displayChar:this.displayChar,...xl(e[a]),parent:this}):new av({char:a,eager:this.eager,isUnmasking:r});this._blocks.push(c)}}get state(){return{...super.state,_blocks:this._blocks.map(e=>e.state)}}set state(e){if(!e){this.reset();return}const{_blocks:t,...r}=e;this._blocks.forEach((i,s)=>i.state=t[s]),super.state=r}reset(){super.reset(),this._blocks.forEach(e=>e.reset())}get isComplete(){return this.exposeBlock?this.exposeBlock.isComplete:this._blocks.every(e=>e.isComplete)}get isFilled(){return this._blocks.every(e=>e.isFilled)}get isFixed(){return this._blocks.every(e=>e.isFixed)}get isOptional(){return this._blocks.every(e=>e.isOptional)}doCommit(){this._blocks.forEach(e=>e.doCommit()),super.doCommit()}get unmaskedValue(){return this.exposeBlock?this.exposeBlock.unmaskedValue:this._blocks.reduce((e,t)=>e+=t.unmaskedValue,"")}set unmaskedValue(e){if(this.exposeBlock){const t=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.unmaskedValue=e,this.appendTail(t),this.doCommit()}else super.unmaskedValue=e}get value(){return this.exposeBlock?this.exposeBlock.value:this._blocks.reduce((e,t)=>e+=t.value,"")}set value(e){if(this.exposeBlock){const t=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.value=e,this.appendTail(t),this.doCommit()}else super.value=e}get typedValue(){return this.exposeBlock?this.exposeBlock.typedValue:super.typedValue}set typedValue(e){if(this.exposeBlock){const t=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.typedValue=e,this.appendTail(t),this.doCommit()}else super.typedValue=e}get displayValue(){return this._blocks.reduce((e,t)=>e+=t.displayValue,"")}appendTail(e){return super.appendTail(e).aggregate(this._appendPlaceholder())}_appendEager(){var e;const t=new lt;let r=(e=this._mapPosToBlock(this.displayValue.length))==null?void 0:e.index;if(r==null)return t;this._blocks[r].isFilled&&++r;for(let i=r;i<this._blocks.length;++i){const s=this._blocks[i]._appendEager();if(!s.inserted)break;t.aggregate(s)}return t}_appendCharRaw(e,t){t===void 0&&(t={});const r=this._mapPosToBlock(this.displayValue.length),i=new lt;if(!r)return i;for(let a=r.index,o;o=this._blocks[a];++a){var s;const c=o._appendChar(e,{...t,_beforeTailState:(s=t._beforeTailState)==null||(s=s._blocks)==null?void 0:s[a]});if(i.aggregate(c),c.consumed)break}return i}extractTail(e,t){e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length);const r=new js;return e===t||this._forEachBlocksInRange(e,t,(i,s,a,o)=>{const c=i.extractTail(a,o);c.stop=this._findStopBefore(s),c.from=this._blockStartPos(s),c instanceof js&&(c.blockIndex=s),r.extend(c)}),r}extractInput(e,t,r){if(e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length),r===void 0&&(r={}),e===t)return"";let i="";return this._forEachBlocksInRange(e,t,(s,a,o,c)=>{i+=s.extractInput(o,c,r)}),i}_findStopBefore(e){let t;for(let r=0;r<this._stops.length;++r){const i=this._stops[r];if(i<=e)t=i;else break}return t}_appendPlaceholder(e){const t=new lt;if(this.lazy&&e==null)return t;const r=this._mapPosToBlock(this.displayValue.length);if(!r)return t;const i=r.index,s=e??this._blocks.length;return this._blocks.slice(i,s).forEach(a=>{if(!a.lazy||e!=null){var o;t.aggregate(a._appendPlaceholder((o=a._blocks)==null?void 0:o.length))}}),t}_mapPosToBlock(e){let t="";for(let r=0;r<this._blocks.length;++r){const i=this._blocks[r],s=t.length;if(t+=i.displayValue,e<=t.length)return{index:r,offset:e-s}}}_blockStartPos(e){return this._blocks.slice(0,e).reduce((t,r)=>t+=r.displayValue.length,0)}_forEachBlocksInRange(e,t,r){t===void 0&&(t=this.displayValue.length);const i=this._mapPosToBlock(e);if(i){const s=this._mapPosToBlock(t),a=s&&i.index===s.index,o=i.offset,c=s&&a?s.offset:this._blocks[i.index].displayValue.length;if(r(this._blocks[i.index],i.index,o,c),s&&!a){for(let u=i.index+1;u<s.index;++u)r(this._blocks[u],u,0,this._blocks[u].displayValue.length);r(this._blocks[s.index],s.index,0,s.offset)}}}remove(e,t){e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length);const r=super.remove(e,t);return this._forEachBlocksInRange(e,t,(i,s,a,o)=>{r.aggregate(i.remove(a,o))}),r}nearestInputPos(e,t){if(t===void 0&&(t=qe.NONE),!this._blocks.length)return 0;const r=new FA(this,e);if(t===qe.NONE)return r.pushRightBeforeInput()||(r.popState(),r.pushLeftBeforeInput())?r.pos:this.displayValue.length;if(t===qe.LEFT||t===qe.FORCE_LEFT){if(t===qe.LEFT){if(r.pushRightBeforeFilled(),r.ok&&r.pos===e)return e;r.popState()}if(r.pushLeftBeforeInput(),r.pushLeftBeforeRequired(),r.pushLeftBeforeFilled(),t===qe.LEFT){if(r.pushRightBeforeInput(),r.pushRightBeforeRequired(),r.ok&&r.pos<=e||(r.popState(),r.ok&&r.pos<=e))return r.pos;r.popState()}return r.ok?r.pos:t===qe.FORCE_LEFT?0:(r.popState(),r.ok||(r.popState(),r.ok)?r.pos:0)}return t===qe.RIGHT||t===qe.FORCE_RIGHT?(r.pushRightBeforeInput(),r.pushRightBeforeRequired(),r.pushRightBeforeFilled()?r.pos:t===qe.FORCE_RIGHT?this.displayValue.length:(r.popState(),r.ok||(r.popState(),r.ok)?r.pos:this.nearestInputPos(e,qe.LEFT))):e}totalInputPositions(e,t){e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length);let r=0;return this._forEachBlocksInRange(e,t,(i,s,a,o)=>{r+=i.totalInputPositions(a,o)}),r}maskedBlock(e){return this.maskedBlocks(e)[0]}maskedBlocks(e){const t=this._maskedBlocks[e];return t?t.map(r=>this._blocks[r]):[]}pad(e){const t=new lt;return this._forEachBlocksInRange(0,this.displayValue.length,r=>t.aggregate(r.pad(e))),t}}Pn.DEFAULTS={...Ln.DEFAULTS,lazy:!0,placeholderChar:"_"};Pn.STOP_CHAR="`";Pn.ESCAPE_CHAR="\\";Pn.InputDefinition=Cu;Pn.FixedDefinition=av;Ze.MaskedPattern=Pn;class Kc extends Pn{get _matchFrom(){return this.maxLength-String(this.from).length}constructor(e){super(e)}updateOptions(e){super.updateOptions(e)}_update(e){const{to:t=this.to||0,from:r=this.from||0,maxLength:i=this.maxLength||0,autofix:s=this.autofix,...a}=e;this.to=t,this.from=r,this.maxLength=Math.max(String(t).length,i),this.autofix=s;const o=String(this.from).padStart(this.maxLength,"0"),c=String(this.to).padStart(this.maxLength,"0");let u=0;for(;u<c.length&&c[u]===o[u];)++u;a.mask=c.slice(0,u).replace(/0/g,"\\0")+"0".repeat(this.maxLength-u),super._update(a)}get isComplete(){return super.isComplete&&!!this.value}boundaries(e){let t="",r="";const[,i,s]=e.match(/^(\D*)(\d*)(\D*)/)||[];return s&&(t="0".repeat(i.length)+s,r="9".repeat(i.length)+s),t=t.padEnd(this.maxLength,"0"),r=r.padEnd(this.maxLength,"9"),[t,r]}doPrepareChar(e,t){t===void 0&&(t={});let r;return[e,r]=super.doPrepareChar(e.replace(/\D/g,""),t),e||(r.skip=!this.isComplete),[e,r]}_appendCharRaw(e,t){if(t===void 0&&(t={}),!this.autofix||this.value.length+1>this.maxLength)return super._appendCharRaw(e,t);const r=String(this.from).padStart(this.maxLength,"0"),i=String(this.to).padStart(this.maxLength,"0"),[s,a]=this.boundaries(this.value+e);return Number(a)<this.from?super._appendCharRaw(r[this.value.length],t):Number(s)>this.to?!t.tail&&this.autofix==="pad"&&this.value.length+1<this.maxLength?super._appendCharRaw(r[this.value.length],t).aggregate(this._appendCharRaw(e,t)):super._appendCharRaw(i[this.value.length],t):super._appendCharRaw(e,t)}doValidate(e){const t=this.value;if(t.search(/[^0]/)===-1&&t.length<=this._matchFrom)return!0;const[i,s]=this.boundaries(t);return this.from<=Number(s)&&Number(i)<=this.to&&super.doValidate(e)}pad(e){const t=new lt;if(this.value.length===this.maxLength)return t;const r=this.value,i=this.maxLength-this.value.length;if(i){this.reset();for(let s=0;s<i;++s)t.aggregate(super._appendCharRaw("0",e));r.split("").forEach(s=>this._appendCharRaw(s))}return t}}Ze.MaskedRange=Kc;const BA="d{.}`m{.}`Y";class _i extends Pn{static extractPatternOptions(e){const{mask:t,pattern:r,...i}=e;return{...i,mask:cs(t)?t:r}}constructor(e){super(_i.extractPatternOptions({..._i.DEFAULTS,...e}))}updateOptions(e){super.updateOptions(e)}_update(e){const{mask:t,pattern:r,blocks:i,...s}={..._i.DEFAULTS,...e},a=Object.assign({},_i.GET_DEFAULT_BLOCKS());e.min&&(a.Y.from=e.min.getFullYear()),e.max&&(a.Y.to=e.max.getFullYear()),e.min&&e.max&&a.Y.from===a.Y.to&&(a.m.from=e.min.getMonth()+1,a.m.to=e.max.getMonth()+1,a.m.from===a.m.to&&(a.d.from=e.min.getDate(),a.d.to=e.max.getDate())),Object.assign(a,this.blocks,i),super._update({...s,mask:cs(t)?t:r,blocks:a})}doValidate(e){const t=this.date;return super.doValidate(e)&&(!this.isComplete||this.isDateExist(this.value)&&t!=null&&(this.min==null||this.min<=t)&&(this.max==null||t<=this.max))}isDateExist(e){return this.format(this.parse(e,this),this).indexOf(e)>=0}get date(){return this.typedValue}set date(e){this.typedValue=e}get typedValue(){return this.isComplete?super.typedValue:null}set typedValue(e){super.typedValue=e}maskEquals(e){return e===Date||super.maskEquals(e)}optionsIsChanged(e){return super.optionsIsChanged(_i.extractPatternOptions(e))}}_i.GET_DEFAULT_BLOCKS=()=>({d:{mask:Kc,from:1,to:31,maxLength:2},m:{mask:Kc,from:1,to:12,maxLength:2},Y:{mask:Kc,from:1900,to:9999}});_i.DEFAULTS={...Pn.DEFAULTS,mask:Date,pattern:BA,format:(n,e)=>{if(!n)return"";const t=String(n.getDate()).padStart(2,"0"),r=String(n.getMonth()+1).padStart(2,"0"),i=n.getFullYear();return[t,r,i].join(".")},parse:(n,e)=>{const[t,r,i]=n.split(".").map(Number);return new Date(i,r-1,t)}};Ze.MaskedDate=_i;class Zu extends Ln{constructor(e){super({...Zu.DEFAULTS,...e}),this.currentMask=void 0}updateOptions(e){super.updateOptions(e)}_update(e){super._update(e),"mask"in e&&(this.exposeMask=void 0,this.compiledMasks=Array.isArray(e.mask)?e.mask.map(t=>{const{expose:r,...i}=xl(t),s=Li({overwrite:this._overwrite,eager:this._eager,skipInvalid:this._skipInvalid,...i});return r&&(this.exposeMask=s),s}):[])}_appendCharRaw(e,t){t===void 0&&(t={});const r=this._applyDispatch(e,t);return this.currentMask&&r.aggregate(this.currentMask._appendChar(e,this.currentMaskFlags(t))),r}_applyDispatch(e,t,r){e===void 0&&(e=""),t===void 0&&(t={}),r===void 0&&(r="");const i=t.tail&&t._beforeTailState!=null?t._beforeTailState._value:this.value,s=this.rawInputValue,a=t.tail&&t._beforeTailState!=null?t._beforeTailState._rawInputValue:s,o=s.slice(a.length),c=this.currentMask,u=new lt,f=c==null?void 0:c.state;return this.currentMask=this.doDispatch(e,{...t},r),this.currentMask&&(this.currentMask!==c?(this.currentMask.reset(),a&&(this.currentMask.append(a,{raw:!0}),u.tailShift=this.currentMask.value.length-i.length),o&&(u.tailShift+=this.currentMask.append(o,{raw:!0,tail:!0}).tailShift)):f&&(this.currentMask.state=f)),u}_appendPlaceholder(){const e=this._applyDispatch();return this.currentMask&&e.aggregate(this.currentMask._appendPlaceholder()),e}_appendEager(){const e=this._applyDispatch();return this.currentMask&&e.aggregate(this.currentMask._appendEager()),e}appendTail(e){const t=new lt;return e&&t.aggregate(this._applyDispatch("",{},e)),t.aggregate(this.currentMask?this.currentMask.appendTail(e):super.appendTail(e))}currentMaskFlags(e){var t,r;return{...e,_beforeTailState:((t=e._beforeTailState)==null?void 0:t.currentMaskRef)===this.currentMask&&((r=e._beforeTailState)==null?void 0:r.currentMask)||e._beforeTailState}}doDispatch(e,t,r){return t===void 0&&(t={}),r===void 0&&(r=""),this.dispatch(e,this,t,r)}doValidate(e){return super.doValidate(e)&&(!this.currentMask||this.currentMask.doValidate(this.currentMaskFlags(e)))}doPrepare(e,t){t===void 0&&(t={});let[r,i]=super.doPrepare(e,t);if(this.currentMask){let s;[r,s]=super.doPrepare(r,this.currentMaskFlags(t)),i=i.aggregate(s)}return[r,i]}doPrepareChar(e,t){t===void 0&&(t={});let[r,i]=super.doPrepareChar(e,t);if(this.currentMask){let s;[r,s]=super.doPrepareChar(r,this.currentMaskFlags(t)),i=i.aggregate(s)}return[r,i]}reset(){var e;(e=this.currentMask)==null||e.reset(),this.compiledMasks.forEach(t=>t.reset())}get value(){return this.exposeMask?this.exposeMask.value:this.currentMask?this.currentMask.value:""}set value(e){this.exposeMask?(this.exposeMask.value=e,this.currentMask=this.exposeMask,this._applyDispatch()):super.value=e}get unmaskedValue(){return this.exposeMask?this.exposeMask.unmaskedValue:this.currentMask?this.currentMask.unmaskedValue:""}set unmaskedValue(e){this.exposeMask?(this.exposeMask.unmaskedValue=e,this.currentMask=this.exposeMask,this._applyDispatch()):super.unmaskedValue=e}get typedValue(){return this.exposeMask?this.exposeMask.typedValue:this.currentMask?this.currentMask.typedValue:""}set typedValue(e){if(this.exposeMask){this.exposeMask.typedValue=e,this.currentMask=this.exposeMask,this._applyDispatch();return}let t=String(e);this.currentMask&&(this.currentMask.typedValue=e,t=this.currentMask.unmaskedValue),this.unmaskedValue=t}get displayValue(){return this.currentMask?this.currentMask.displayValue:""}get isComplete(){var e;return!!((e=this.currentMask)!=null&&e.isComplete)}get isFilled(){var e;return!!((e=this.currentMask)!=null&&e.isFilled)}remove(e,t){const r=new lt;return this.currentMask&&r.aggregate(this.currentMask.remove(e,t)).aggregate(this._applyDispatch()),r}get state(){var e;return{...super.state,_rawInputValue:this.rawInputValue,compiledMasks:this.compiledMasks.map(t=>t.state),currentMaskRef:this.currentMask,currentMask:(e=this.currentMask)==null?void 0:e.state}}set state(e){const{compiledMasks:t,currentMaskRef:r,currentMask:i,...s}=e;t&&this.compiledMasks.forEach((a,o)=>a.state=t[o]),r!=null&&(this.currentMask=r,this.currentMask.state=i),super.state=s}extractInput(e,t,r){return this.currentMask?this.currentMask.extractInput(e,t,r):""}extractTail(e,t){return this.currentMask?this.currentMask.extractTail(e,t):super.extractTail(e,t)}doCommit(){this.currentMask&&this.currentMask.doCommit(),super.doCommit()}nearestInputPos(e,t){return this.currentMask?this.currentMask.nearestInputPos(e,t):super.nearestInputPos(e,t)}get overwrite(){return this.currentMask?this.currentMask.overwrite:this._overwrite}set overwrite(e){this._overwrite=e}get eager(){return this.currentMask?this.currentMask.eager:this._eager}set eager(e){this._eager=e}get skipInvalid(){return this.currentMask?this.currentMask.skipInvalid:this._skipInvalid}set skipInvalid(e){this._skipInvalid=e}get autofix(){return this.currentMask?this.currentMask.autofix:this._autofix}set autofix(e){this._autofix=e}maskEquals(e){return Array.isArray(e)?this.compiledMasks.every((t,r)=>{if(!e[r])return;const{mask:i,...s}=e[r];return ku(t,s)&&t.maskEquals(i)}):super.maskEquals(e)}typedValueEquals(e){var t;return!!((t=this.currentMask)!=null&&t.typedValueEquals(e))}}Zu.DEFAULTS={...Ln.DEFAULTS,dispatch:(n,e,t,r)=>{if(!e.compiledMasks.length)return;const i=e.rawInputValue,s=e.compiledMasks.map((a,o)=>{const c=e.currentMask===a,u=c?a.displayValue.length:a.nearestInputPos(a.displayValue.length,qe.FORCE_LEFT);return a.rawInputValue!==i?(a.reset(),a.append(i,{raw:!0})):c||a.remove(u),a.append(n,e.currentMaskFlags(t)),a.appendTail(r),{index:o,weight:a.rawInputValue.length,totalInputPositions:a.totalInputPositions(0,Math.max(u,a.nearestInputPos(a.displayValue.length,qe.FORCE_LEFT)))}});return s.sort((a,o)=>o.weight-a.weight||o.totalInputPositions-a.totalInputPositions),e.compiledMasks[s[0].index]}};Ze.MaskedDynamic=Zu;class eh extends Pn{constructor(e){super({...eh.DEFAULTS,...e})}updateOptions(e){super.updateOptions(e)}_update(e){const{enum:t,...r}=e;if(t){const i=t.map(o=>o.length),s=Math.min(...i),a=Math.max(...i)-s;r.mask="*".repeat(s),a&&(r.mask+="["+"*".repeat(a)+"]"),this.enum=t}super._update(r)}_appendCharRaw(e,t){t===void 0&&(t={});const r=Math.min(this.nearestInputPos(0,qe.FORCE_RIGHT),this.value.length),i=this.enum.filter(s=>this.matchValue(s,this.unmaskedValue+e,r));if(i.length){i.length===1&&this._forEachBlocksInRange(0,this.value.length,(a,o)=>{const c=i[0][o];o>=this.value.length||c===a.value||(a.reset(),a._appendChar(c,t))});const s=super._appendCharRaw(i[0][this.value.length],t);return i.length===1&&i[0].slice(this.unmaskedValue.length).split("").forEach(a=>s.aggregate(super._appendCharRaw(a))),s}return new lt({skip:!this.isComplete})}extractTail(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length),new Jr("",e)}remove(e,t){if(e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length),e===t)return new lt;const r=Math.min(super.nearestInputPos(0,qe.FORCE_RIGHT),this.value.length);let i;for(i=e;i>=0&&!(this.enum.filter(o=>this.matchValue(o,this.value.slice(r,i),r)).length>1);--i);const s=super.remove(i,t);return s.tailShift+=i-e,s}get isComplete(){return this.enum.indexOf(this.value)>=0}}eh.DEFAULTS={...Pn.DEFAULTS,matchValue:(n,e,t)=>n.indexOf(e,t)===t};Ze.MaskedEnum=eh;class UA extends Ln{updateOptions(e){super.updateOptions(e)}_update(e){super._update({...e,validate:e.mask})}}Ze.MaskedFunction=UA;var ov;class ir extends Ln{constructor(e){super({...ir.DEFAULTS,...e})}updateOptions(e){super.updateOptions(e)}_update(e){super._update(e),this._updateRegExps()}_updateRegExps(){const e="^"+(this.allowNegative?"[+|\\-]?":""),t="\\d*",r=(this.scale?"("+md(this.radix)+"\\d{0,"+this.scale+"})?":"")+"$";this._numberRegExp=new RegExp(e+t+r),this._mapToRadixRegExp=new RegExp("["+this.mapToRadix.map(md).join("")+"]","g"),this._thousandsSeparatorRegExp=new RegExp(md(this.thousandsSeparator),"g")}_removeThousandsSeparators(e){return e.replace(this._thousandsSeparatorRegExp,"")}_insertThousandsSeparators(e){const t=e.split(this.radix);return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,this.thousandsSeparator),t.join(this.radix)}doPrepareChar(e,t){t===void 0&&(t={});const[r,i]=super.doPrepareChar(this._removeThousandsSeparators(this.scale&&this.mapToRadix.length&&(t.input&&t.raw||!t.input&&!t.raw)?e.replace(this._mapToRadixRegExp,this.radix):e),t);return e&&!r&&(i.skip=!0),r&&!this.allowPositive&&!this.value&&r!=="-"&&i.aggregate(this._appendChar("-")),[r,i]}_separatorsCount(e,t){t===void 0&&(t=!1);let r=0;for(let i=0;i<e;++i)this._value.indexOf(this.thousandsSeparator,i)===i&&(++r,t&&(e+=this.thousandsSeparator.length));return r}_separatorsCountFromSlice(e){return e===void 0&&(e=this._value),this._separatorsCount(this._removeThousandsSeparators(e).length,!0)}extractInput(e,t,r){return e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length),[e,t]=this._adjustRangeWithSeparators(e,t),this._removeThousandsSeparators(super.extractInput(e,t,r))}_appendCharRaw(e,t){t===void 0&&(t={});const r=t.tail&&t._beforeTailState?t._beforeTailState._value:this._value,i=this._separatorsCountFromSlice(r);this._value=this._removeThousandsSeparators(this.value);const s=this._value;this._value+=e;const a=this.number;let o=!isNaN(a),c=!1;if(o){let v;this.min!=null&&this.min<0&&this.number<this.min&&(v=this.min),this.max!=null&&this.max>0&&this.number>this.max&&(v=this.max),v!=null&&(this.autofix?(this._value=this.format(v,this).replace(ir.UNMASKED_RADIX,this.radix),c||(c=s===this._value&&!t.tail)):o=!1),o&&(o=!!this._value.match(this._numberRegExp))}let u;o?u=new lt({inserted:this._value.slice(s.length),rawInserted:c?"":e,skip:c}):(this._value=s,u=new lt),this._value=this._insertThousandsSeparators(this._value);const f=t.tail&&t._beforeTailState?t._beforeTailState._value:this._value,p=this._separatorsCountFromSlice(f);return u.tailShift+=(p-i)*this.thousandsSeparator.length,u}_findSeparatorAround(e){if(this.thousandsSeparator){const t=e-this.thousandsSeparator.length+1,r=this.value.indexOf(this.thousandsSeparator,t);if(r<=e)return r}return-1}_adjustRangeWithSeparators(e,t){const r=this._findSeparatorAround(e);r>=0&&(e=r);const i=this._findSeparatorAround(t);return i>=0&&(t=i+this.thousandsSeparator.length),[e,t]}remove(e,t){e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length),[e,t]=this._adjustRangeWithSeparators(e,t);const r=this.value.slice(0,e),i=this.value.slice(t),s=this._separatorsCount(r.length);this._value=this._insertThousandsSeparators(this._removeThousandsSeparators(r+i));const a=this._separatorsCountFromSlice(r);return new lt({tailShift:(a-s)*this.thousandsSeparator.length})}nearestInputPos(e,t){if(!this.thousandsSeparator)return e;switch(t){case qe.NONE:case qe.LEFT:case qe.FORCE_LEFT:{const r=this._findSeparatorAround(e-1);if(r>=0){const i=r+this.thousandsSeparator.length;if(e<i||this.value.length<=i||t===qe.FORCE_LEFT)return r}break}case qe.RIGHT:case qe.FORCE_RIGHT:{const r=this._findSeparatorAround(e);if(r>=0)return r+this.thousandsSeparator.length}}return e}doCommit(){if(this.value){const e=this.number;let t=e;this.min!=null&&(t=Math.max(t,this.min)),this.max!=null&&(t=Math.min(t,this.max)),t!==e&&(this.unmaskedValue=this.format(t,this));let r=this.value;this.normalizeZeros&&(r=this._normalizeZeros(r)),this.padFractionalZeros&&this.scale>0&&(r=this._padFractionalZeros(r)),this._value=r}super.doCommit()}_normalizeZeros(e){const t=this._removeThousandsSeparators(e).split(this.radix);return t[0]=t[0].replace(/^(\D*)(0*)(\d*)/,(r,i,s,a)=>i+a),e.length&&!/\d$/.test(t[0])&&(t[0]=t[0]+"0"),t.length>1&&(t[1]=t[1].replace(/0*$/,""),t[1].length||(t.length=1)),this._insertThousandsSeparators(t.join(this.radix))}_padFractionalZeros(e){if(!e)return e;const t=e.split(this.radix);return t.length<2&&t.push(""),t[1]=t[1].padEnd(this.scale,"0"),t.join(this.radix)}doSkipInvalid(e,t,r){t===void 0&&(t={});const i=this.scale===0&&e!==this.thousandsSeparator&&(e===this.radix||e===ir.UNMASKED_RADIX||this.mapToRadix.includes(e));return super.doSkipInvalid(e,t,r)&&!i}get unmaskedValue(){return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix,ir.UNMASKED_RADIX)}set unmaskedValue(e){super.unmaskedValue=e}get typedValue(){return this.parse(this.unmaskedValue,this)}set typedValue(e){this.rawInputValue=this.format(e,this).replace(ir.UNMASKED_RADIX,this.radix)}get number(){return this.typedValue}set number(e){this.typedValue=e}get allowNegative(){return this.min!=null&&this.min<0||this.max!=null&&this.max<0}get allowPositive(){return this.min!=null&&this.min>0||this.max!=null&&this.max>0}typedValueEquals(e){return(super.typedValueEquals(e)||ir.EMPTY_VALUES.includes(e)&&ir.EMPTY_VALUES.includes(this.typedValue))&&!(e===0&&this.value==="")}}ov=ir;ir.UNMASKED_RADIX=".";ir.EMPTY_VALUES=[...Ln.EMPTY_VALUES,0];ir.DEFAULTS={...Ln.DEFAULTS,mask:Number,radix:",",thousandsSeparator:"",mapToRadix:[ov.UNMASKED_RADIX],min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,scale:2,normalizeZeros:!0,padFractionalZeros:!1,parse:Number,format:n=>n.toLocaleString("en-US",{useGrouping:!1,maximumFractionDigits:20})};Ze.MaskedNumber=ir;const Df={MASKED:"value",UNMASKED:"unmaskedValue",TYPED:"typedValue"};function lv(n,e,t){e===void 0&&(e=Df.MASKED),t===void 0&&(t=Df.MASKED);const r=Li(n);return i=>r.runIsolated(s=>(s[e]=i,s[t]))}function qA(n,e,t,r){return lv(e,t,r)(n)}Ze.PIPE_TYPE=Df;Ze.createPipe=lv;Ze.pipe=qA;class VA extends Pn{get repeatFrom(){var e;return(e=Array.isArray(this.repeat)?this.repeat[0]:this.repeat===1/0?0:this.repeat)!=null?e:0}get repeatTo(){var e;return(e=Array.isArray(this.repeat)?this.repeat[1]:this.repeat)!=null?e:1/0}constructor(e){super(e)}updateOptions(e){super.updateOptions(e)}_update(e){var t,r,i;const{repeat:s,...a}=xl(e);this._blockOpts=Object.assign({},this._blockOpts,a);const o=Li(this._blockOpts);this.repeat=(t=(r=s??o.repeat)!=null?r:this.repeat)!=null?t:1/0,super._update({mask:"m".repeat(Math.max(this.repeatTo===1/0&&((i=this._blocks)==null?void 0:i.length)||0,this.repeatFrom)),blocks:{m:o},eager:o.eager,overwrite:o.overwrite,skipInvalid:o.skipInvalid,lazy:o.lazy,placeholderChar:o.placeholderChar,displayChar:o.displayChar})}_allocateBlock(e){if(e<this._blocks.length)return this._blocks[e];if(this.repeatTo===1/0||this._blocks.length<this.repeatTo)return this._blocks.push(Li(this._blockOpts)),this.mask+="m",this._blocks[this._blocks.length-1]}_appendCharRaw(e,t){t===void 0&&(t={});const r=new lt;for(let c=(i=(s=this._mapPosToBlock(this.displayValue.length))==null?void 0:s.index)!=null?i:Math.max(this._blocks.length-1,0),u,f;u=(a=this._blocks[c])!=null?a:f=!f&&this._allocateBlock(c);++c){var i,s,a,o;const p=u._appendChar(e,{...t,_beforeTailState:(o=t._beforeTailState)==null||(o=o._blocks)==null?void 0:o[c]});if(p.skip&&f){this._blocks.pop(),this.mask=this.mask.slice(1);break}if(r.aggregate(p),p.consumed)break}return r}_trimEmptyTail(e,t){var r,i;e===void 0&&(e=0);const s=Math.max(((r=this._mapPosToBlock(e))==null?void 0:r.index)||0,this.repeatFrom,0);let a;t!=null&&(a=(i=this._mapPosToBlock(t))==null?void 0:i.index),a==null&&(a=this._blocks.length-1);let o=0;for(let c=a;s<=c&&!this._blocks[c].unmaskedValue;--c,++o);o&&(this._blocks.splice(a-o+1,o),this.mask=this.mask.slice(o))}reset(){super.reset(),this._trimEmptyTail()}remove(e,t){e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length);const r=super.remove(e,t);return this._trimEmptyTail(e,t),r}totalInputPositions(e,t){return e===void 0&&(e=0),t==null&&this.repeatTo===1/0?1/0:super.totalInputPositions(e,t)}get state(){return super.state}set state(e){this._blocks.length=e._blocks.length,this.mask=this.mask.slice(0,this._blocks.length),super.state=e}}Ze.RepeatBlock=VA;try{globalThis.IMask=Ze}catch{}var cv={exports:{}},WA="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",zA=WA,HA=zA;function uv(){}function hv(){}hv.resetWarningCache=uv;var $A=function(){function n(r,i,s,a,o,c){if(c!==HA){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:hv,resetWarningCache:uv};return t.PropTypes=t,t};cv.exports=$A();var GA=cv.exports;const Ue=Al(GA),dv={mask:Ue.oneOfType([Ue.array,Ue.func,Ue.string,Ue.instanceOf(RegExp),Ue.oneOf([Date,Number,Ze.Masked]),Ue.instanceOf(Ze.Masked)]),value:Ue.any,unmask:Ue.oneOfType([Ue.bool,Ue.oneOf(["typed"])]),prepare:Ue.func,prepareChar:Ue.func,validate:Ue.func,commit:Ue.func,overwrite:Ue.oneOfType([Ue.bool,Ue.oneOf(["shift"])]),eager:Ue.oneOfType([Ue.bool,Ue.oneOf(["append","remove"])]),skipInvalid:Ue.bool,onAccept:Ue.func,onComplete:Ue.func,placeholderChar:Ue.string,displayChar:Ue.string,lazy:Ue.bool,definitions:Ue.object,blocks:Ue.object,enum:Ue.arrayOf(Ue.string),maxLength:Ue.number,from:Ue.number,to:Ue.number,pattern:Ue.string,format:Ue.func,parse:Ue.func,autofix:Ue.oneOfType([Ue.bool,Ue.oneOf(["pad"])]),radix:Ue.string,thousandsSeparator:Ue.string,mapToRadix:Ue.arrayOf(Ue.string),scale:Ue.number,normalizeZeros:Ue.bool,padFractionalZeros:Ue.bool,min:Ue.oneOfType([Ue.number,Ue.instanceOf(Date)]),max:Ue.oneOfType([Ue.number,Ue.instanceOf(Date)]),dispatch:Ue.func,inputRef:Ue.oneOfType([Ue.func,Ue.shape({current:Ue.object})])},fv=Object.keys(dv).filter(n=>n!=="value"),YA=["value","unmask","onAccept","onComplete","inputRef"],KA=fv.filter(n=>YA.indexOf(n)<0);function XA(n){var e;const t=(e=class extends Rs.Component{constructor(s){super(s),this._inputRef=this._inputRef.bind(this)}componentDidMount(){this.props.mask&&this.initMask()}componentDidUpdate(){const s=this.props,a=this._extractMaskOptionsFromProps(s);if(a.mask)this.maskRef?(this.maskRef.updateOptions(a),"value"in s&&s.value!==void 0&&(this.maskValue=s.value)):this.initMask(a);else if(this.destroyMask(),"value"in s&&s.value!==void 0){var o;(o=this.element)!=null&&o.isContentEditable&&this.element.tagName!=="INPUT"&&this.element.tagName!=="TEXTAREA"?this.element.textContent=s.value:this.element.value=s.value}}componentWillUnmount(){this.destroyMask()}_inputRef(s){this.element=s,this.props.inputRef&&(Object.prototype.hasOwnProperty.call(this.props.inputRef,"current")?this.props.inputRef.current=s:this.props.inputRef(s))}initMask(s){s===void 0&&(s=this._extractMaskOptionsFromProps(this.props)),this.maskRef=Ze(this.element,s).on("accept",this._onAccept.bind(this)).on("complete",this._onComplete.bind(this)),"value"in this.props&&this.props.value!==void 0&&(this.maskValue=this.props.value)}destroyMask(){this.maskRef&&(this.maskRef.destroy(),delete this.maskRef)}_extractMaskOptionsFromProps(s){const{...a}=s;return Object.keys(a).filter(o=>KA.indexOf(o)<0).forEach(o=>{delete a[o]}),a}_extractNonMaskProps(s){const{...a}=s;return fv.forEach(o=>{o!=="maxLength"&&delete a[o]}),"defaultValue"in a||(a.defaultValue=s.mask?"":a.value),delete a.value,a}get maskValue(){return this.maskRef?this.props.unmask==="typed"?this.maskRef.typedValue:this.props.unmask?this.maskRef.unmaskedValue:this.maskRef.value:""}set maskValue(s){this.maskRef&&(s=s==null&&this.props.unmask!=="typed"?"":s,this.props.unmask==="typed"?this.maskRef.typedValue=s:this.props.unmask?this.maskRef.unmaskedValue=s:this.maskRef.value=s)}_onAccept(s){this.props.onAccept&&this.maskRef&&this.props.onAccept(this.maskValue,this.maskRef,s)}_onComplete(s){this.props.onComplete&&this.maskRef&&this.props.onComplete(this.maskValue,this.maskRef,s)}render(){return Rs.createElement(n,{...this._extractNonMaskProps(this.props),inputRef:this._inputRef})}},e.displayName=void 0,e.propTypes=void 0,e),r=n.displayName||n.name||"Component";return t.displayName="IMask("+r+")",t.propTypes=dv,Rs.forwardRef((i,s)=>Rs.createElement(t,{...i,ref:s}))}const JA=XA(n=>{let{inputRef:e,...t}=n;return Rs.createElement("input",{...t,ref:e})}),QA=(n,e)=>Rs.createElement(JA,{...n,ref:e}),ZA=Rs.forwardRef(QA);function Gp(n){return Math.round(n/30*100)/100}function pv(n){const e=Math.abs(tv(new Date,n))/12,t=20/12;if(e>5){const i=Math.floor((e-5)/4)/12;return Math.round((t+i)*100)/100}return 1.67}function mv(n){return Math.round(n*.2*100)/100}function gv(n){return Math.round(n/12*100)/100}async function ea(n,e){const t=xt(Nt,`accounts/${n}`),r=await Un(t);if(r.exists()){const a=r.val(),o=Object.values(a).find(c=>c.concept===e);if(o)return o}const i=ni(xt(Nt,`accounts/${n}`)),s={id:i.key,employeeId:n,concept:e,balance:0,lastMovementDate:null,status:"active",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return await Hs(i,s),s}async function Yp(n){const e=xt(Nt,`movements/${n}`),t=await Un(e);return t.exists()?Object.values(t.val()).sort((r,i)=>{const s=new Date(r.date),o=new Date(i.date).getTime()-s.getTime();if(o===0){const c=new Date(r.createdAt);return new Date(i.createdAt).getTime()-c.getTime()}return o}):[]}function Kp(n){return[...n].sort((t,r)=>{const i=new Date(t.date),a=new Date(r.date).getTime()-i.getTime();if(a===0){const o=new Date(t.createdAt);return new Date(r.createdAt).getTime()-o.getTime()}return a}).reduce((t,r)=>{const i=Math.round(r.amount*100)/100;return r.type==="credit"&&r.status!=="paid"?t+i:r.type==="debit"?t-i:t},0)}async function ek(n,e,t,r){const i=fs(t),s=nv();if(Ha(s,i))throw new Error("La fecha de ingreso no puede ser posterior a la fecha actual");let a=i;for(;!Ha(s,a);)r.licencia&&await vv(n,e,a,t),r.vacacional&&await yv(n,e,a),r.aguinaldo&&await _v(n,e,a),a=Xu(a,1)}async function vv(n,e,t,r){const i=await ea(n,"licencia"),s=pv(r),a=Gp(e),o=Math.round(s*a*100)/100,c={accountId:i.id,concept:"licencia",type:"credit",amount:o,date:$s(t),order:0,days:s,baseSalary:e,status:"pending",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},u=ni(xt(Nt,`movements/${i.id}`));await Hs(u,{...c,id:u.key})}async function yv(n,e,t){const r=await ea(n,"vacacional"),i=mv(e),s={accountId:r.id,concept:"vacacional",type:"credit",amount:Math.round(i*100)/100,date:$s(t),order:0,days:null,baseSalary:e,status:"pending",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},a=ni(xt(Nt,`movements/${r.id}`));await Hs(a,{...s,id:a.key})}async function _v(n,e,t){const r=await ea(n,"aguinaldo"),i=gv(e),s={accountId:r.id,concept:"aguinaldo",type:"credit",amount:Math.round(i*100)/100,date:$s(t),order:0,days:null,baseSalary:e,status:"pending",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},a=ni(xt(Nt,`movements/${r.id}`));await Hs(a,{...s,id:a.key})}async function tk(n,e,t){const r=fs(e.startDate),i=e.endDate?fs(e.endDate):nv();let s=r;for(;!Ha(i,s);)await Promise.all([vv(n,e.amount,s,t),yv(n,e.amount,s),_v(n,e.amount,s)]),s=Xu(s,1)}function nk({onClose:n,onSuccess:e}){const[t,r]=ke.useState({fullName:"",ci:"",startDate:"",currentSalary:""}),[i,s]=ke.useState({licencia:!0,vacacional:!0,aguinaldo:!0}),[a,o]=ke.useState(!1),c=f=>/^\d\.\d{3}\.\d{3}-\d$/.test(f),u=async f=>{if(f.preventDefault(),!c(t.ci)){Lt.error("El formato de la CI debe ser X.XXX.XXX-X");return}if(!Object.values(i).some(p=>p)){Lt.error("Debe seleccionar al menos una cuenta");return}try{o(!0);const p=ni(xt(Nt,"employees")).key,v=Math.round(parseFloat(t.currentSalary)),g=$s(fs(t.startDate)),N=ni(xt(Nt,`salaryHistory/${p}`));await Promise.all([Hs(xt(Nt,`employees/${p}`),{id:p,fullName:t.fullName,ci:t.ci,startDate:g,currentSalary:v,status:"active",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),Hs(N,{id:N.key,employeeId:p,amount:v,startDate:g,endDate:null,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})]),await ek(p,v,g,i),Lt.success("Empleado creado exitosamente"),e()}catch(p){console.error("Error creating employee:",p),Lt.error("Error al crear el empleado"),o(!1)}};return _.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:_.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[_.jsxs("div",{className:"flex justify-between items-center mb-4",children:[_.jsx("h2",{className:"text-xl font-semibold",children:"Nuevo Empleado"}),_.jsx("button",{onClick:n,disabled:a,className:"text-gray-500 hover:text-gray-700 disabled:opacity-50",children:_.jsx(Bl,{className:"w-5 h-5"})})]}),_.jsxs("form",{onSubmit:u,className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nombre Completo"}),_.jsx("input",{type:"text",required:!0,disabled:a,value:t.fullName,onChange:f=>r({...t,fullName:f.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-gray-500 focus:ring-gray-500 disabled:opacity-50"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cédula de Identidad"}),_.jsx(ZA,{mask:"0.000.000-0",definitions:{0:/[0-9]/},required:!0,disabled:a,value:t.ci,onAccept:f=>r({...t,ci:f}),placeholder:"X.XXX.XXX-X",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-gray-500 focus:ring-gray-500 disabled:opacity-50"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fecha de Ingreso"}),_.jsx("input",{type:"date",required:!0,disabled:a,value:t.startDate,onChange:f=>r({...t,startDate:f.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-gray-500 focus:ring-gray-500 disabled:opacity-50"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Salario Base"}),_.jsx("input",{type:"number",required:!0,disabled:a,min:"1",step:"1",value:t.currentSalary,onChange:f=>r({...t,currentSalary:f.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-gray-500 focus:ring-gray-500 disabled:opacity-50"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cuentas a Crear"}),_.jsx("div",{className:"space-y-2",children:Object.entries(Zs).map(([f,p])=>_.jsxs("label",{className:"flex items-center gap-2",children:[_.jsx("input",{type:"checkbox",disabled:a,checked:i[f],onChange:v=>s({...i,[f]:v.target.checked}),className:"rounded border-gray-300 text-gray-800 focus:ring-gray-500 disabled:opacity-50"}),_.jsx("span",{className:"text-sm text-gray-700",children:p})]},f))})]}),_.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[_.jsx("button",{type:"button",onClick:n,disabled:a,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 disabled:opacity-50",children:"Cancelar"}),_.jsx("button",{type:"submit",disabled:a,className:"px-4 py-2 text-sm font-medium text-white bg-gray-800 rounded-md hover:bg-gray-700 disabled:opacity-50 flex items-center gap-2",children:a?_.jsxs(_.Fragment,{children:[_.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[_.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),_.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Procesando..."]}):"Guardar"})]})]})]})})}function rk(){const[n,e]=ke.useState(!1);return _.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Empleados"}),_.jsxs("button",{onClick:()=>e(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-md hover:bg-gray-700",children:[_.jsx(j2,{className:"w-4 h-4"}),"Nuevo Empleado"]})]}),_.jsx(LA,{}),n&&_.jsx(nk,{onClose:()=>e(!1),onSuccess:()=>{e(!1),window.location.reload()}})]})}function ik(n){const[e,t]=ke.useState(null),[r,i]=ke.useState([]),[s,a]=ke.useState(!0),[o,c]=ke.useState(null),u=ke.useCallback(async()=>{if(!n){c(new Error("Employee ID is required")),a(!1);return}try{a(!0);const[p,v]=await Promise.all([Un(xt(Nt,`employees/${n}`)),Un(xt(Nt,`salaryHistory/${n}`))]);if(!p.exists()){c(new Error("Employee not found")),Lt.error("Empleado no encontrado");return}const g=p.val();if(t(g),v.exists()){const N=Object.values(v.val());i(N.sort((S,I)=>new Date(I.startDate).getTime()-new Date(S.startDate).getTime()))}else i([]);c(null)}catch(p){c(p),console.error("Error fetching employee:",p),Lt.error("Error al cargar los datos del empleado")}finally{a(!1)}},[n]);ke.useEffect(()=>{u()},[u]);const f=ke.useCallback(async()=>{await u()},[u]);return{employee:e,salaryHistory:r,loading:s,error:o,refresh:f}}function sk({employee:n,onUpdateSalary:e,onGeneratePayment:t}){return _.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:_.jsxs("div",{className:"flex justify-between items-start",children:[_.jsxs("div",{children:[_.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:n.fullName}),_.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["CI: ",n.ci]}),_.jsxs("p",{className:"text-sm text-gray-500",children:["Fecha de Ingreso: ",wl(n.startDate)]}),_.jsxs("p",{className:"text-sm text-gray-500",children:["Salario Actual: $",or(n.currentSalary)]})]}),_.jsxs("div",{className:"flex gap-3",children:[_.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-md hover:bg-gray-700",children:[_.jsx(Gu,{className:"w-4 h-4"}),"Actualizar Salario"]}),_.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-md hover:bg-gray-700",children:[_.jsx(j2,{className:"w-4 h-4"}),"Generar Pago"]})]})]})})}function ak(n){return Math.round(n/30*100)/100}function ok({provisions:n,totalProvisions:e,salary:t,licenseDays:r}){const i=ak(t),s=Math.floor(n.licencia/i);return _.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[_.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("div",{className:"bg-blue-500 p-3 rounded-lg text-white",children:_.jsx(Nu,{className:"w-6 h-6"})}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Licencia"}),_.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["$",or(n.licencia)]}),s>0&&_.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[s," días disponibles"]})]})]})}),_.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("div",{className:"bg-green-500 p-3 rounded-lg text-white",children:_.jsx(Nu,{className:"w-6 h-6"})}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Salario Vacacional"}),_.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["$",or(n.vacacional)]})]})]})}),_.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("div",{className:"bg-yellow-500 p-3 rounded-lg text-white",children:_.jsx(Gu,{className:"w-6 h-6"})}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Aguinaldo"}),_.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["$",or(n.aguinaldo)]})]})]})})]})}var lk={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},ck=function(e,t,r){var i,s=lk[e];return typeof s=="string"?i=s:t===1?i=s.one:i=s.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"en "+i:"hace "+i:i},uk={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},hk={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},dk={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},fk={date:fd({formats:uk,defaultWidth:"full"}),time:fd({formats:hk,defaultWidth:"full"}),dateTime:fd({formats:dk,defaultWidth:"full"})},pk={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},mk={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},gk=function(e,t,r,i){return t.getUTCHours()!==1?mk[e]:pk[e]},vk={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},yk={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},_k={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},bk={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},wk={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},xk={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},Nk=function(e,t){var r=Number(e);return r+"º"},Sk={ordinalNumber:Nk,era:Yo({values:vk,defaultWidth:"wide"}),quarter:Yo({values:yk,defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:Yo({values:_k,defaultWidth:"wide"}),day:Yo({values:bk,defaultWidth:"wide"}),dayPeriod:Yo({values:wk,defaultWidth:"wide",formattingValues:xk,defaultFormattingWidth:"wide"})},Ak=/^(\d+)(º)?/i,kk=/\d+/i,Ck={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},Ek={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},Ik={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},Tk={any:[/1/i,/2/i,/3/i,/4/i]},Lk={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},Pk={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},Dk={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},Ok={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},Mk={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},Rk={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},Fk={ordinalNumber:uA({matchPattern:Ak,parsePattern:kk,valueCallback:function(e){return parseInt(e,10)}}),era:Ko({matchPatterns:Ck,defaultMatchWidth:"wide",parsePatterns:Ek,defaultParseWidth:"any"}),quarter:Ko({matchPatterns:Ik,defaultMatchWidth:"wide",parsePatterns:Tk,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Ko({matchPatterns:Lk,defaultMatchWidth:"wide",parsePatterns:Pk,defaultParseWidth:"any"}),day:Ko({matchPatterns:Dk,defaultMatchWidth:"wide",parsePatterns:Ok,defaultParseWidth:"any"}),dayPeriod:Ko({matchPatterns:Mk,defaultMatchWidth:"any",parsePatterns:Rk,defaultParseWidth:"any"})},jk={code:"es",formatDistance:ck,formatLong:fk,formatRelative:gk,localize:Sk,match:Fk,options:{weekStartsOn:1,firstWeekContainsDate:1}};function Bk(n,e={showDay:!0,showMonth:!0,showYear:!0}){if(!n)return"";const t=typeof n=="string"?new Date(n):n;let r="";return e.showDay&&(r+="dd/"),e.showMonth&&(r+="MM/"),e.showYear&&(r+="yyyy"),e.showTime&&(r+=" HH:mm"),Y2(t,r,{timeZone:Ku,locale:jk})}function Nl(n){return Bk(n,{showDay:!1,showMonth:!0,showYear:!0})}function gr(n){return n==null?"0.00":new Intl.NumberFormat("es-UY",{minimumFractionDigits:2,maximumFractionDigits:2}).format(n)}function Uk({type:n}){return _.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${n==="credit"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:n==="credit"?"Crédito":"Débito"})}function qk({movement:n}){const[e,t]=ke.useState(!1),r=()=>{if(!n.baseSalary)return null;const o=Gp(n.baseSalary),c=Math.abs(tv(new Date,n.date))/12,u=c>5?20+Math.floor((c-5)/4):20,f=Math.round(u/12*100)/100,p=Math.round(o*f*100)/100;return _.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Base de Cálculo"}),_.jsxs("div",{className:"space-y-2",children:[_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("span",{className:"text-gray-600",children:"Salario base:"}),_.jsxs("span",{className:"font-medium",children:["$",gr(n.baseSalary)]})]}),_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("span",{className:"text-gray-600",children:"Jornal diario:"}),_.jsxs("span",{className:"font-medium",children:["$",gr(o)]})]}),_.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"(Salario base / 30 días)"})]})]}),_.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Cálculo"}),_.jsxs("div",{className:"space-y-2",children:[_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("span",{className:"text-gray-600",children:"Días acumulados al año:"}),_.jsxs("span",{className:"font-medium",children:[u," días"]})]}),_.jsx("div",{className:"text-sm text-gray-500",children:c<5?"(Antigüedad menor a 5 años = 20 días)":`(20 días base + ${u-20} días adicionales por antigüedad)`}),_.jsxs("div",{className:"flex justify-between items-center mt-2",children:[_.jsx("span",{className:"text-gray-600",children:"Días acumulados al mes:"}),_.jsxs("span",{className:"font-medium",children:[f.toFixed(2)," días"]})]}),_.jsx("div",{className:"text-sm text-gray-500",children:"(Días acumulados al año / 12)"}),_.jsxs("div",{className:"flex justify-between items-center mt-2",children:[_.jsx("span",{className:"text-gray-600",children:"Monto:"}),_.jsxs("span",{className:"font-medium",children:["$",gr(p)]})]}),_.jsx("div",{className:"text-sm text-gray-500",children:"(Jornal diario × Días acumulados al mes)"})]})]})]})},i=()=>{if(!n.baseSalary)return null;const o=n.concept==="vacacional"?Math.round(n.baseSalary*.2*100)/100:Math.round(n.baseSalary/12*100)/100;return _.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Base de Cálculo"}),_.jsx("div",{className:"space-y-2",children:_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("span",{className:"text-gray-600",children:"Salario base:"}),_.jsxs("span",{className:"font-medium",children:["$",gr(n.baseSalary)]})]})})]}),_.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Cálculo"}),_.jsxs("div",{className:"space-y-2",children:[_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsxs("span",{className:"text-gray-600",children:[n.concept==="vacacional"?"Porcentaje":"Proporción",":"]}),_.jsx("span",{className:"font-medium",children:n.concept==="vacacional"?"20%":"1/12"})]}),_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("span",{className:"text-gray-600",children:"Monto:"}),_.jsxs("span",{className:"font-medium",children:["$",gr(o)]})]}),_.jsx("div",{className:"text-sm text-gray-500 mt-1",children:n.concept==="vacacional"?"(Salario base × 20%)":"(Salario base / 12 meses)"})]})]})]})},a=(()=>{if(n.type==="credit")switch(n.concept){case"licencia":return r();case"vacacional":case"aguinaldo":return i();default:return null}return null})();return a?_.jsxs(_.Fragment,{children:[_.jsx("button",{onClick:()=>t(!0),className:"text-gray-500 hover:text-gray-700 focus:outline-none",title:"Ver detalles del cálculo",children:_.jsx(FN,{className:"w-5 h-5"})}),e&&_.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:_.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[_.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"}),_.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),_.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[_.jsxs("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[_.jsxs("div",{className:"flex justify-between items-center mb-6",children:[_.jsx("h3",{className:"text-lg font-semibold text-gray-900",id:"modal-title",children:"Detalles del Cálculo"}),_.jsx("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-gray-500",children:_.jsx(Bl,{className:"w-5 h-5"})})]}),_.jsx("div",{className:"mt-2",children:a})]}),_.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:_.jsx("button",{type:"button",onClick:()=>t(!1),className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-gray-800 text-base font-medium text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Cerrar"})})]})]})})]}):null}function Vk({movement:n}){return null}function Wk({movement:n,movements:e,index:t}){const r=Kp(e.slice(t)),i=n.type==="credit"?"+":"-",s=gr(n.amount),a=n.days!==null&&n.days!==void 0?` (${Number(n.days).toFixed(2)} días)`:"";return _.jsxs("tr",{className:"hover:bg-gray-50",children:[_.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Nl(n.date)}),_.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsx(Uk,{type:n.type})}),_.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsxs("span",{className:`text-sm font-medium ${n.type==="credit"?"text-green-600":"text-red-600"}`,children:[i," $",s,a]})}),_.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",gr(r)]}),_.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsxs("div",{className:"flex gap-2",children:[_.jsx(qk,{movement:n}),_.jsx(Vk,{movement:n})]})})]})}function zk({movements:n}){return _.jsx("div",{className:"overflow-x-auto",children:_.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[_.jsx("thead",{className:"bg-gray-50",children:_.jsxs("tr",{children:[_.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mes/Año"}),_.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),_.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Monto"}),_.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Saldo"}),_.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),_.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((e,t)=>_.jsx(Wk,{movement:e,movements:n,index:t},e.id))})]})})}function Hk({employeeId:n,concept:e,onMovementsUpdate:t}){const[r,i]=ke.useState(""),[s,a]=ke.useState([]),[o,c]=ke.useState(!0);return ke.useEffect(()=>{n&&e&&(async()=>{try{const f=await ea(n,e);i(f.id);const v=[...await Yp(f.id)].sort((g,N)=>{const S=new Date(g.date),b=new Date(N.date).getTime()-S.getTime();if(b===0){const A=new Date(g.createdAt);return new Date(N.createdAt).getTime()-A.getTime()}return b});a(v)}catch(f){console.error("Error loading movements:",f),Lt.error("Error al cargar los movimientos")}finally{c(!1)}})()},[n,e]),o?_.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:_.jsx("div",{className:"text-center",children:"Cargando movimientos..."})}):_.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[_.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:_.jsxs("h2",{className:"text-lg font-semibold",children:["Movimientos - ",Zs[e]]})}),s.length>0?_.jsx(zk,{movements:s}):_.jsx("div",{className:"p-6 text-center text-gray-500",children:"No hay movimientos registrados"})]})}function $k({employeeId:n,onMovementsUpdate:e}){const[t,r]=ke.useState("aguinaldo");return _.jsxs("div",{className:"space-y-4",children:[_.jsx("div",{className:"flex gap-2",children:Object.entries(Zs).map(([i,s])=>_.jsx("button",{onClick:()=>r(i),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${t===i?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:s},i))}),_.jsx(Hk,{employeeId:n,concept:t,onMovementsUpdate:e})]})}async function Gk(n,e,t,r){try{const i=[...t].sort((c,u)=>new Date(u.startDate).getTime()-new Date(c.startDate).getTime());if(e.id===i[i.length-1].id)return Lt.error("No se puede eliminar el salario inicial"),!1;if(e.id!==i[0].id)return Lt.error("Solo se puede eliminar el último salario registrado"),!1;const s=i[1];if(!s)return Lt.error("Error al encontrar el salario anterior"),!1;const a={};return a[`salaryHistory/${n}/${s.id}/endDate`]=null,a[`employees/${n}/currentSalary`]=s.amount,a[`salaryHistory/${n}/${e.id}`]=null,(await Yk(n,e.startDate,e.endDate)).forEach(c=>{a[`movements/${c.accountId}/${c.id}`]=null}),await jl(xt(Nt),a),await tk(n,s,r),Lt.success("Salario eliminado exitosamente"),!0}catch(i){return console.error("Error deleting salary:",i),Lt.error("Error al eliminar el salario"),!1}}async function Yk(n,e,t){const r=await Un(xt(Nt,`accounts/${n}`));if(!r.exists())return[];const i=[],s=fs(e).getTime(),a=t?ev(t).getTime():Date.now();for(const o of Object.values(r.val())){const c=await Un(xt(Nt,`movements/${o.id}`));if(c.exists()){const u=Object.values(c.val());i.push(...u.filter(f=>{const p=new Date(f.date).getTime();return p>=s&&p<=a&&f.type==="credit"&&f.status==="pending"}))}}return i}function Kk({employeeId:n,salaryHistory:e,employmentStartDate:t,onRefresh:r}){const[i,s]=ke.useState(!1),a=[...e].sort((u,f)=>new Date(f.startDate).getTime()-new Date(u.startDate).getTime()),o=u=>u===a[a.length-1].id,c=async u=>{if(confirm("¿Está seguro que desea eliminar este salario? Esta acción eliminará los movimientos asociados y no se puede deshacer."))try{s(!0),await Gk(n,u,e,t)&&await r()}finally{s(!1)}};return _.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[_.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:_.jsx("h2",{className:"text-lg font-semibold",children:"Historial de Salarios"})}),_.jsx("div",{className:"overflow-x-auto",children:_.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[_.jsx("thead",{className:"bg-gray-50",children:_.jsxs("tr",{children:[_.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mes/Año Inicio"}),_.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mes/Año Fin"}),_.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Monto"}),_.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),_.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(u=>_.jsxs("tr",{className:"hover:bg-gray-50",children:[_.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Nl(u.startDate)}),_.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:u.endDate?Nl(u.endDate):"Actual"}),_.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",gr(u.amount)]}),_.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsx("div",{className:"flex gap-2",children:!o(u.id)&&u.id===a[0].id&&_.jsx("button",{onClick:()=>c(u),className:"text-red-600 hover:text-red-900",disabled:i,title:"Eliminar salario",children:_.jsx(Vp,{className:`w-4 h-4 ${i?"opacity-50":""}`})})})})]},u.id))})]})})]})}const Xk="modulepreload",Jk=function(n,e){return new URL(n,e).href},eg={},Of=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){const a=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(t.map(u=>{if(u=Jk(u,r),u in eg)return;eg[u]=!0;const f=u.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(!!r)for(let N=a.length-1;N>=0;N--){const S=a[N];if(S.href===u&&(!f||S.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${p}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":Xk,f||(g.as="script"),g.crossOrigin="",g.href=u,c&&g.setAttribute("nonce",c),document.head.appendChild(g),f)return new Promise((N,S)=>{g.addEventListener("load",N),g.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};var Tn=Uint8Array,ar=Uint16Array,Xp=Int32Array,th=new Tn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),nh=new Tn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Mf=new Tn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),bv=function(n,e){for(var t=new ar(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new Xp(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return{b:t,r:i}},wv=bv(th,2),xv=wv.b,Rf=wv.r;xv[28]=258,Rf[258]=28;var Nv=bv(nh,0),Qk=Nv.b,tg=Nv.r,Ff=new ar(32768);for(var Ut=0;Ut<32768;++Ut){var Yi=(Ut&43690)>>1|(Ut&21845)<<1;Yi=(Yi&52428)>>2|(Yi&13107)<<2,Yi=(Yi&61680)>>4|(Yi&3855)<<4,Ff[Ut]=((Yi&65280)>>8|(Yi&255)<<8)>>1}var ti=function(n,e,t){for(var r=n.length,i=0,s=new ar(e);i<r;++i)n[i]&&++s[n[i]-1];var a=new ar(e);for(i=1;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var o;if(t){o=new ar(1<<e);var c=15-e;for(i=0;i<r;++i)if(n[i])for(var u=i<<4|n[i],f=e-n[i],p=a[n[i]-1]++<<f,v=p|(1<<f)-1;p<=v;++p)o[Ff[p]>>c]=u}else for(o=new ar(r),i=0;i<r;++i)n[i]&&(o[i]=Ff[a[n[i]-1]++]>>15-n[i]);return o},ps=new Tn(288);for(var Ut=0;Ut<144;++Ut)ps[Ut]=8;for(var Ut=144;Ut<256;++Ut)ps[Ut]=9;for(var Ut=256;Ut<280;++Ut)ps[Ut]=7;for(var Ut=280;Ut<288;++Ut)ps[Ut]=8;var Sl=new Tn(32);for(var Ut=0;Ut<32;++Ut)Sl[Ut]=5;var Zk=ti(ps,9,0),eC=ti(ps,9,1),tC=ti(Sl,5,0),nC=ti(Sl,5,1),gd=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Tr=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},vd=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Jp=function(n){return(n+7)/8|0},Sv=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Tn(n.subarray(e,t))},rC=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Pr=function(n,e,t){var r=new Error(e||rC[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,Pr),!t)throw r;return r},iC=function(n,e,t,r){var i=n.length,s=0;if(!i||e.f&&!e.l)return t||new Tn(0);var a=!t,o=a||e.i!=2,c=e.i;a&&(t=new Tn(i*3));var u=function(xe){var Le=t.length;if(xe>Le){var Ie=new Tn(Math.max(Le*2,xe));Ie.set(t),t=Ie}},f=e.f||0,p=e.p||0,v=e.b||0,g=e.l,N=e.d,S=e.m,I=e.n,b=i*8;do{if(!g){f=Tr(n,p,1);var A=Tr(n,p+1,3);if(p+=3,A)if(A==1)g=eC,N=nC,S=9,I=5;else if(A==2){var ie=Tr(n,p,31)+257,Q=Tr(n,p+10,15)+4,V=ie+Tr(n,p+5,31)+1;p+=14;for(var se=new Tn(V),me=new Tn(19),D=0;D<Q;++D)me[Mf[D]]=Tr(n,p+D*3,7);p+=Q*3;for(var O=gd(me),G=(1<<O)-1,q=ti(me,O,1),D=0;D<V;){var ce=q[Tr(n,p,G)];p+=ce&15;var P=ce>>4;if(P<16)se[D++]=P;else{var le=0,he=0;for(P==16?(he=3+Tr(n,p,3),p+=2,le=se[D-1]):P==17?(he=3+Tr(n,p,7),p+=3):P==18&&(he=11+Tr(n,p,127),p+=7);he--;)se[D++]=le}}var re=se.subarray(0,ie),de=se.subarray(ie);S=gd(re),I=gd(de),g=ti(re,S,1),N=ti(de,I,1)}else Pr(1);else{var P=Jp(p)+4,R=n[P-4]|n[P-3]<<8,W=P+R;if(W>i){c&&Pr(0);break}o&&u(v+R),t.set(n.subarray(P,W),v),e.b=v+=R,e.p=p=W*8,e.f=f;continue}if(p>b){c&&Pr(0);break}}o&&u(v+131072);for(var ge=(1<<S)-1,Te=(1<<I)-1,C=p;;C=p){var le=g[vd(n,p)&ge],F=le>>4;if(p+=le&15,p>b){c&&Pr(0);break}if(le||Pr(2),F<256)t[v++]=F;else if(F==256){C=p,g=null;break}else{var U=F-254;if(F>264){var D=F-257,H=th[D];U=Tr(n,p,(1<<H)-1)+xv[D],p+=H}var X=N[vd(n,p)&Te],ne=X>>4;X||Pr(3),p+=X&15;var de=Qk[ne];if(ne>3){var H=nh[ne];de+=vd(n,p)&(1<<H)-1,p+=H}if(p>b){c&&Pr(0);break}o&&u(v+131072);var ae=v+U;if(v<de){var oe=s-de,Se=Math.min(de,ae);for(oe+v<0&&Pr(3);v<Se;++v)t[v]=r[oe+v]}for(;v<ae;++v)t[v]=t[v-de]}}e.l=g,e.p=C,e.b=v,e.f=f,g&&(f=1,e.m=S,e.d=N,e.n=I)}while(!f);return v!=t.length&&a?Sv(t,0,v):t.subarray(0,v)},yi=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},Jo=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},yd=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,s=t.slice();if(!i)return{t:kv,l:0};if(i==1){var a=new Tn(t[0].s+1);return a[t[0].s]=1,{t:a,l:1}}t.sort(function(W,ie){return W.f-ie.f}),t.push({s:-1,f:25001});var o=t[0],c=t[1],u=0,f=1,p=2;for(t[0]={s:-1,f:o.f+c.f,l:o,r:c};f!=i-1;)o=t[t[u].f<t[p].f?u++:p++],c=t[u!=f&&t[u].f<t[p].f?u++:p++],t[f++]={s:-1,f:o.f+c.f,l:o,r:c};for(var v=s[0].s,r=1;r<i;++r)s[r].s>v&&(v=s[r].s);var g=new ar(v+1),N=jf(t[f-1],g,0);if(N>e){var r=0,S=0,I=N-e,b=1<<I;for(s.sort(function(ie,Q){return g[Q.s]-g[ie.s]||ie.f-Q.f});r<i;++r){var A=s[r].s;if(g[A]>e)S+=b-(1<<N-g[A]),g[A]=e;else break}for(S>>=I;S>0;){var P=s[r].s;g[P]<e?S-=1<<e-g[P]++-1:++r}for(;r>=0&&S;--r){var R=s[r].s;g[R]==e&&(--g[R],++S)}N=e}return{t:new Tn(g),l:N}},jf=function(n,e,t){return n.s==-1?Math.max(jf(n.l,e,t+1),jf(n.r,e,t+1)):e[n.s]=t},ng=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new ar(++e),r=0,i=n[0],s=1,a=function(c){t[r++]=c},o=1;o<=e;++o)if(n[o]==i&&o!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=n[o]}return{c:t.subarray(0,r),n:e}},Qo=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},Av=function(n,e,t){var r=t.length,i=Jp(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var s=0;s<r;++s)n[i+s+4]=t[s];return(i+4+r)*8},rg=function(n,e,t,r,i,s,a,o,c,u,f){yi(e,f++,t),++i[256];for(var p=yd(i,15),v=p.t,g=p.l,N=yd(s,15),S=N.t,I=N.l,b=ng(v),A=b.c,P=b.n,R=ng(S),W=R.c,ie=R.n,Q=new ar(19),V=0;V<A.length;++V)++Q[A[V]&31];for(var V=0;V<W.length;++V)++Q[W[V]&31];for(var se=yd(Q,7),me=se.t,D=se.l,O=19;O>4&&!me[Mf[O-1]];--O);var G=u+5<<3,q=Qo(i,ps)+Qo(s,Sl)+a,ce=Qo(i,v)+Qo(s,S)+a+14+3*O+Qo(Q,me)+2*Q[16]+3*Q[17]+7*Q[18];if(c>=0&&G<=q&&G<=ce)return Av(e,f,n.subarray(c,c+u));var le,he,re,de;if(yi(e,f,1+(ce<q)),f+=2,ce<q){le=ti(v,g,0),he=v,re=ti(S,I,0),de=S;var ge=ti(me,D,0);yi(e,f,P-257),yi(e,f+5,ie-1),yi(e,f+10,O-4),f+=14;for(var V=0;V<O;++V)yi(e,f+3*V,me[Mf[V]]);f+=3*O;for(var Te=[A,W],C=0;C<2;++C)for(var F=Te[C],V=0;V<F.length;++V){var U=F[V]&31;yi(e,f,ge[U]),f+=me[U],U>15&&(yi(e,f,F[V]>>5&127),f+=F[V]>>12)}}else le=Zk,he=ps,re=tC,de=Sl;for(var V=0;V<o;++V){var H=r[V];if(H>255){var U=H>>18&31;Jo(e,f,le[U+257]),f+=he[U+257],U>7&&(yi(e,f,H>>23&31),f+=th[U]);var X=H&31;Jo(e,f,re[X]),f+=de[X],X>3&&(Jo(e,f,H>>5&8191),f+=nh[X])}else Jo(e,f,le[H]),f+=he[H]}return Jo(e,f,le[256]),f+he[256]},sC=new Xp([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),kv=new Tn(0),aC=function(n,e,t,r,i,s){var a=s.z||n.length,o=new Tn(r+a+5*(1+Math.ceil(a/7e3))+i),c=o.subarray(r,o.length-i),u=s.l,f=(s.r||0)&7;if(e){f&&(c[0]=s.r>>3);for(var p=sC[e-1],v=p>>13,g=p&8191,N=(1<<t)-1,S=s.p||new ar(32768),I=s.h||new ar(N+1),b=Math.ceil(t/3),A=2*b,P=function($e){return(n[$e]^n[$e+1]<<b^n[$e+2]<<A)&N},R=new Xp(25e3),W=new ar(288),ie=new ar(32),Q=0,V=0,se=s.i||0,me=0,D=s.w||0,O=0;se+2<a;++se){var G=P(se),q=se&32767,ce=I[G];if(S[q]=ce,I[G]=q,D<=se){var le=a-se;if((Q>7e3||me>24576)&&(le>423||!u)){f=rg(n,c,0,R,W,ie,V,me,O,se-O,f),me=Q=V=0,O=se;for(var he=0;he<286;++he)W[he]=0;for(var he=0;he<30;++he)ie[he]=0}var re=2,de=0,ge=g,Te=q-ce&32767;if(le>2&&G==P(se-Te))for(var C=Math.min(v,le)-1,F=Math.min(32767,se),U=Math.min(258,le);Te<=F&&--ge&&q!=ce;){if(n[se+re]==n[se+re-Te]){for(var H=0;H<U&&n[se+H]==n[se+H-Te];++H);if(H>re){if(re=H,de=Te,H>C)break;for(var X=Math.min(Te,H-2),ne=0,he=0;he<X;++he){var ae=se-Te+he&32767,oe=S[ae],Se=ae-oe&32767;Se>ne&&(ne=Se,ce=ae)}}}q=ce,ce=S[q],Te+=q-ce&32767}if(de){R[me++]=268435456|Rf[re]<<18|tg[de];var xe=Rf[re]&31,Le=tg[de]&31;V+=th[xe]+nh[Le],++W[257+xe],++ie[Le],D=se+re,++Q}else R[me++]=n[se],++W[n[se]]}}for(se=Math.max(se,D);se<a;++se)R[me++]=n[se],++W[n[se]];f=rg(n,c,u,R,W,ie,V,me,O,se-O,f),u||(s.r=f&7|c[f/8|0]<<3,f-=7,s.h=I,s.p=S,s.i=se,s.w=D)}else{for(var se=s.w||0;se<a+u;se+=65535){var Ie=se+65535;Ie>=a&&(c[f/8|0]=u,Ie=a),f=Av(c,f+1,n.subarray(se,Ie))}s.i=a}return Sv(o,0,r+Jp(f)+i)},Cv=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,s=t.length|0,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=r+=t[a];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},oC=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),a=new Tn(s.length+n.length);a.set(s),a.set(n,s.length),n=a,i.w=s.length}return aC(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)},Ev=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},lC=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=Cv();i.p(e.dictionary),Ev(n,2,i.d())}},cC=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&Pr(6,"invalid zlib data"),(n[1]>>5&1)==+!e&&Pr(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function Bf(n,e){e||(e={});var t=Cv();t.p(n);var r=oC(n,e,e.dictionary?6:2,4);return lC(r,e),Ev(r,r.length-4,t.d()),r}function uC(n,e){return iC(n.subarray(cC(n,e),-4),{i:2},e,e)}var hC=typeof TextDecoder<"u"&&new TextDecoder,dC=0;try{hC.decode(kv,{stream:!0}),dC=1}catch{}var Ke=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function _d(){Ke.console&&typeof Ke.console.log=="function"&&Ke.console.log.apply(Ke.console,arguments)}var Mt={log:_d,warn:function(n){Ke.console&&(typeof Ke.console.warn=="function"?Ke.console.warn.apply(Ke.console,arguments):_d.call(null,arguments))},error:function(n){Ke.console&&(typeof Ke.console.error=="function"?Ke.console.error.apply(Ke.console,arguments):_d(n))}};function bd(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){Os(r.response,e,t)},r.onerror=function(){Mt.error("could not download file")},r.send()}function ig(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Fc(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var ol,Uf,Os=Ke.saveAs||((typeof window>"u"?"undefined":wt(window))!=="object"||window!==Ke?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=Ke.URL||Ke.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?ig(i.href)?bd(n,e,t):Fc(i,i.target="_blank"):Fc(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Fc(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(ig(n))bd(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){Fc(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:wt(s)!=="object"&&(Mt.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return bd(n,e,t);var i=n.type==="application/octet-stream",s=/constructor/i.test(Ke.HTMLElement)||Ke.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&(typeof FileReader>"u"?"undefined":wt(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var f=o.result;f=a?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=f:location=f,r=null},o.readAsDataURL(n)}else{var c=Ke.URL||Ke.webkitURL,u=c.createObjectURL(n);r?r.location=u:location.href=u,r=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Iv(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,s=t[r].process,a=i.exec(n);a&&(e=s(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+o+c+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function wd(n,e){var t=n[0],r=n[1],i=n[2],s=n[3];t=kn(t,r,i,s,e[0],7,-680876936),s=kn(s,t,r,i,e[1],12,-389564586),i=kn(i,s,t,r,e[2],17,606105819),r=kn(r,i,s,t,e[3],22,-1044525330),t=kn(t,r,i,s,e[4],7,-176418897),s=kn(s,t,r,i,e[5],12,1200080426),i=kn(i,s,t,r,e[6],17,-1473231341),r=kn(r,i,s,t,e[7],22,-45705983),t=kn(t,r,i,s,e[8],7,1770035416),s=kn(s,t,r,i,e[9],12,-1958414417),i=kn(i,s,t,r,e[10],17,-42063),r=kn(r,i,s,t,e[11],22,-1990404162),t=kn(t,r,i,s,e[12],7,1804603682),s=kn(s,t,r,i,e[13],12,-40341101),i=kn(i,s,t,r,e[14],17,-1502002290),t=Cn(t,r=kn(r,i,s,t,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Cn(s,t,r,i,e[6],9,-1069501632),i=Cn(i,s,t,r,e[11],14,643717713),r=Cn(r,i,s,t,e[0],20,-373897302),t=Cn(t,r,i,s,e[5],5,-701558691),s=Cn(s,t,r,i,e[10],9,38016083),i=Cn(i,s,t,r,e[15],14,-660478335),r=Cn(r,i,s,t,e[4],20,-405537848),t=Cn(t,r,i,s,e[9],5,568446438),s=Cn(s,t,r,i,e[14],9,-1019803690),i=Cn(i,s,t,r,e[3],14,-187363961),r=Cn(r,i,s,t,e[8],20,1163531501),t=Cn(t,r,i,s,e[13],5,-1444681467),s=Cn(s,t,r,i,e[2],9,-51403784),i=Cn(i,s,t,r,e[7],14,1735328473),t=En(t,r=Cn(r,i,s,t,e[12],20,-1926607734),i,s,e[5],4,-378558),s=En(s,t,r,i,e[8],11,-2022574463),i=En(i,s,t,r,e[11],16,1839030562),r=En(r,i,s,t,e[14],23,-35309556),t=En(t,r,i,s,e[1],4,-1530992060),s=En(s,t,r,i,e[4],11,1272893353),i=En(i,s,t,r,e[7],16,-155497632),r=En(r,i,s,t,e[10],23,-1094730640),t=En(t,r,i,s,e[13],4,681279174),s=En(s,t,r,i,e[0],11,-358537222),i=En(i,s,t,r,e[3],16,-722521979),r=En(r,i,s,t,e[6],23,76029189),t=En(t,r,i,s,e[9],4,-640364487),s=En(s,t,r,i,e[12],11,-421815835),i=En(i,s,t,r,e[15],16,530742520),t=In(t,r=En(r,i,s,t,e[2],23,-995338651),i,s,e[0],6,-198630844),s=In(s,t,r,i,e[7],10,1126891415),i=In(i,s,t,r,e[14],15,-1416354905),r=In(r,i,s,t,e[5],21,-57434055),t=In(t,r,i,s,e[12],6,1700485571),s=In(s,t,r,i,e[3],10,-1894986606),i=In(i,s,t,r,e[10],15,-1051523),r=In(r,i,s,t,e[1],21,-2054922799),t=In(t,r,i,s,e[8],6,1873313359),s=In(s,t,r,i,e[15],10,-30611744),i=In(i,s,t,r,e[6],15,-1560198380),r=In(r,i,s,t,e[13],21,1309151649),t=In(t,r,i,s,e[4],6,-145523070),s=In(s,t,r,i,e[11],10,-1120210379),i=In(i,s,t,r,e[2],15,718787259),r=In(r,i,s,t,e[9],21,-343485551),n[0]=ns(t,n[0]),n[1]=ns(r,n[1]),n[2]=ns(i,n[2]),n[3]=ns(s,n[3])}function rh(n,e,t,r,i,s){return e=ns(ns(e,n),ns(r,s)),ns(e<<i|e>>>32-i,t)}function kn(n,e,t,r,i,s,a){return rh(e&t|~e&r,n,e,i,s,a)}function Cn(n,e,t,r,i,s,a){return rh(e&r|t&~r,n,e,i,s,a)}function En(n,e,t,r,i,s,a){return rh(e^t^r,n,e,i,s,a)}function In(n,e,t,r,i,s,a){return rh(t^(e|~r),n,e,i,s,a)}function Tv(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)wd(r,fC(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(wd(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,wd(r,i),r}function fC(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}ol=Ke.atob.bind(Ke),Uf=Ke.btoa.bind(Ke);var sg="0123456789abcdef".split("");function pC(n){for(var e="",t=0;t<4;t++)e+=sg[n>>8*t+4&15]+sg[n>>8*t&15];return e}function mC(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function qf(n){return Tv(n).map(mC).join("")}var gC=function(n){for(var e=0;e<n.length;e++)n[e]=pC(n[e]);return n.join("")}(Tv("hello"))!="5d41402abc4b2a76b9719d911017c592";function ns(n,e){if(gC){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Vf(n,e){var t,r,i,s;if(n!==t){for(var a=(i=n,s=1+(256/n.length>>0),new Array(s+1).join(i)),o=[],c=0;c<256;c++)o[c]=c;var u=0;for(c=0;c<256;c++){var f=o[c];u=(u+f+a.charCodeAt(c))%256,o[c]=o[u],o[u]=f}t=n,r=o}else o=r;var p=e.length,v=0,g=0,N="";for(c=0;c<p;c++)g=(g+(f=o[v=(v+1)%256]))%256,o[v]=o[g],o[g]=f,a=o[(o[v]+o[g])%256],N+=String.fromCharCode(e.charCodeAt(c)^a);return N}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var ag={print:4,modify:8,copy:16,"annot-forms":32};function Ma(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(o){if(ag.perm!==void 0)throw new Error("Invalid permission: "+o);i+=ag[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(e+this.padding).substr(0,32),a=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=qf(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Vf(this.encryptionKey,this.padding)}function Ra(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=n[r]}return e}function og(n){if(wt(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[r,!!i],s},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[t]){var a=e[t][s];try{a[0].apply(n,r)}catch(o){Ke.console&&Mt.error("jsPDF PubSub Error",o.message,o)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Eu(n){if(!(this instanceof Eu))return new Eu(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function Lv(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Ms(n,e,t,r,i){if(!(this instanceof Ms))return new Ms(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,Lv.call(this,r,i)}function Ba(n,e,t,r,i){if(!(this instanceof Ba))return new Ba(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,Lv.call(this,r,i)}function Ye(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],a=[],o=1,c=16,u="S",f=null;wt(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,s=n.compress||n.compressPdf||s,(f=n.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),o=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(c=n.floatPrecision),u=n.defaultPathOperation||"S"),a=n.filters||(s===!0?["FlateEncode"]:a),r=r||"mm",t=(""+(t||"P")).toLowerCase();var p=n.putOnlyUsedFonts||!1,v={},g={internal:{},__private__:{}};g.__private__.PubSub=og;var N="1.3",S=g.__private__.getPdfVersion=function(){return N};g.__private__.setPdfVersion=function(d){N=d};var I={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return I};var b=g.__private__.getPageFormat=function(d){return I[d]};i=i||"a4";var A={COMPAT:"compat",ADVANCED:"advanced"},P=A.COMPAT;function R(){this.saveGraphicsState(),B(new Ge(Me,0,0,-Me,0,Mi()*Me).toString()+" cm"),this.setFontSize(this.getFontSize()/Me),u="n",P=A.ADVANCED}function W(){this.restoreGraphicsState(),u="S",P=A.COMPAT}var ie=g.__private__.combineFontStyleAndFontWeight=function(d,x){if(d=="bold"&&x=="normal"||d=="bold"&&x==400||d=="normal"&&x=="italic"||d=="bold"&&x=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return x&&(d=x==400||x==="normal"?d==="italic"?"italic":"normal":x!=700&&x!=="bold"||d!=="normal"?(x==700?"bold":x)+""+d:"bold"),d};g.advancedAPI=function(d){var x=P===A.COMPAT;return x&&R.call(this),typeof d!="function"||(d(this),x&&W.call(this)),this},g.compatAPI=function(d){var x=P===A.ADVANCED;return x&&W.call(this),typeof d!="function"||(d(this),x&&R.call(this)),this},g.isAdvancedAPI=function(){return P===A.ADVANCED};var Q,V=function(d){if(P!==A.ADVANCED)throw new Error(d+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},se=g.roundToPrecision=g.__private__.roundToPrecision=function(d,x){var j=e||x;if(isNaN(d)||isNaN(j))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return d.toFixed(j).replace(/0+$/,"")};Q=g.hpf=g.__private__.hpf=typeof c=="number"?function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.hpf");return se(d,c)}:c==="smart"?function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.hpf");return se(d,d>-1&&d<1?16:5)}:function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.hpf");return se(d,16)};var me=g.f2=g.__private__.f2=function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.f2");return se(d,2)},D=g.__private__.f3=function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.f3");return se(d,3)},O=g.scale=g.__private__.scale=function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.scale");return P===A.COMPAT?d*Me:P===A.ADVANCED?d:void 0},G=function(d){return P===A.COMPAT?Mi()-d:P===A.ADVANCED?d:void 0},q=function(d){return O(G(d))};g.__private__.setPrecision=g.setPrecision=function(d){typeof parseInt(d,10)=="number"&&(e=parseInt(d,10))};var ce,le="00000000000000000000000000000000",he=g.__private__.getFileId=function(){return le},re=g.__private__.setFileId=function(d){return le=d!==void 0&&/^[a-fA-F0-9]{32}$/.test(d)?d.toUpperCase():le.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(Sn=new Ma(f.userPermissions,f.userPassword,f.ownerPassword,le)),le};g.setFileId=function(d){return re(d),this},g.getFileId=function(){return he()};var de=g.__private__.convertDateToPDFDate=function(d){var x=d.getTimezoneOffset(),j=x<0?"+":"-",z=Math.floor(Math.abs(x/60)),Z=Math.abs(x%60),fe=[j,U(z),"'",U(Z),"'"].join("");return["D:",d.getFullYear(),U(d.getMonth()+1),U(d.getDate()),U(d.getHours()),U(d.getMinutes()),U(d.getSeconds()),fe].join("")},ge=g.__private__.convertPDFDateToDate=function(d){var x=parseInt(d.substr(2,4),10),j=parseInt(d.substr(6,2),10)-1,z=parseInt(d.substr(8,2),10),Z=parseInt(d.substr(10,2),10),fe=parseInt(d.substr(12,2),10),we=parseInt(d.substr(14,2),10);return new Date(x,j,z,Z,fe,we,0)},Te=g.__private__.setCreationDate=function(d){var x;if(d===void 0&&(d=new Date),d instanceof Date)x=de(d);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(d))throw new Error("Invalid argument passed to jsPDF.setCreationDate");x=d}return ce=x},C=g.__private__.getCreationDate=function(d){var x=ce;return d==="jsDate"&&(x=ge(ce)),x};g.setCreationDate=function(d){return Te(d),this},g.getCreationDate=function(d){return C(d)};var F,U=g.__private__.padd2=function(d){return("0"+parseInt(d)).slice(-2)},H=g.__private__.padd2Hex=function(d){return("00"+(d=d.toString())).substr(d.length)},X=0,ne=[],ae=[],oe=0,Se=[],xe=[],Le=!1,Ie=ae,$e=function(){X=0,oe=0,ae=[],ne=[],Se=[],oi=rn(),xr=rn()};g.__private__.setCustomOutputDestination=function(d){Le=!0,Ie=d};var pe=function(d){Le||(Ie=d)};g.__private__.resetCustomOutputDestination=function(){Le=!1,Ie=ae};var B=g.__private__.out=function(d){return d=d.toString(),oe+=d.length+1,Ie.push(d),Ie},ze=g.__private__.write=function(d){return B(arguments.length===1?d.toString():Array.prototype.join.call(arguments," "))},je=g.__private__.getArrayBuffer=function(d){for(var x=d.length,j=new ArrayBuffer(x),z=new Uint8Array(j);x--;)z[x]=d.charCodeAt(x);return j},Ne=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return Ne};var Ce=n.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(d){return Ce=P===A.ADVANCED?d/Me:d,this};var Oe,De=g.__private__.getFontSize=g.getFontSize=function(){return P===A.COMPAT?Ce:Ce*Me},Ve=n.R2L||!1;g.__private__.setR2L=g.setR2L=function(d){return Ve=d,this},g.__private__.getR2L=g.getR2L=function(){return Ve};var tt,ot=g.__private__.setZoomMode=function(d){var x=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(d))Oe=d;else if(isNaN(d)){if(x.indexOf(d)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+d+'" is not recognized.');Oe=d}else Oe=parseInt(d,10)};g.__private__.getZoomMode=function(){return Oe};var ct,gt=g.__private__.setPageMode=function(d){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(d)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+d+'" is not recognized.');tt=d};g.__private__.getPageMode=function(){return tt};var Et=g.__private__.setLayoutMode=function(d){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(d)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+d+'" is not recognized.');ct=d};g.__private__.getLayoutMode=function(){return ct},g.__private__.setDisplayMode=g.setDisplayMode=function(d,x,j){return ot(d),Et(x),gt(j),this};var Qe={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(d){if(Object.keys(Qe).indexOf(d)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Qe[d]},g.__private__.getDocumentProperties=function(){return Qe},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(d){for(var x in Qe)Qe.hasOwnProperty(x)&&d[x]&&(Qe[x]=d[x]);return this},g.__private__.setDocumentProperty=function(d,x){if(Object.keys(Qe).indexOf(d)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Qe[d]=x};var ht,Me,Nn,yt,_r,Dt={},qt={},Ur=[],St={},_s={},zt={},br={},ai=null,Ht=0,nt=[],At=new og(g),bs=n.hotfixes||[],yn={},qr={},Vr=[],Ge=function d(x,j,z,Z,fe,we){if(!(this instanceof d))return new d(x,j,z,Z,fe,we);isNaN(x)&&(x=1),isNaN(j)&&(j=0),isNaN(z)&&(z=0),isNaN(Z)&&(Z=1),isNaN(fe)&&(fe=0),isNaN(we)&&(we=0),this._matrix=[x,j,z,Z,fe,we]};Object.defineProperty(Ge.prototype,"sx",{get:function(){return this._matrix[0]},set:function(d){this._matrix[0]=d}}),Object.defineProperty(Ge.prototype,"shy",{get:function(){return this._matrix[1]},set:function(d){this._matrix[1]=d}}),Object.defineProperty(Ge.prototype,"shx",{get:function(){return this._matrix[2]},set:function(d){this._matrix[2]=d}}),Object.defineProperty(Ge.prototype,"sy",{get:function(){return this._matrix[3]},set:function(d){this._matrix[3]=d}}),Object.defineProperty(Ge.prototype,"tx",{get:function(){return this._matrix[4]},set:function(d){this._matrix[4]=d}}),Object.defineProperty(Ge.prototype,"ty",{get:function(){return this._matrix[5]},set:function(d){this._matrix[5]=d}}),Object.defineProperty(Ge.prototype,"a",{get:function(){return this._matrix[0]},set:function(d){this._matrix[0]=d}}),Object.defineProperty(Ge.prototype,"b",{get:function(){return this._matrix[1]},set:function(d){this._matrix[1]=d}}),Object.defineProperty(Ge.prototype,"c",{get:function(){return this._matrix[2]},set:function(d){this._matrix[2]=d}}),Object.defineProperty(Ge.prototype,"d",{get:function(){return this._matrix[3]},set:function(d){this._matrix[3]=d}}),Object.defineProperty(Ge.prototype,"e",{get:function(){return this._matrix[4]},set:function(d){this._matrix[4]=d}}),Object.defineProperty(Ge.prototype,"f",{get:function(){return this._matrix[5]},set:function(d){this._matrix[5]=d}}),Object.defineProperty(Ge.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ge.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ge.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ge.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ge.prototype.join=function(d){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Q).join(d)},Ge.prototype.multiply=function(d){var x=d.sx*this.sx+d.shy*this.shx,j=d.sx*this.shy+d.shy*this.sy,z=d.shx*this.sx+d.sy*this.shx,Z=d.shx*this.shy+d.sy*this.sy,fe=d.tx*this.sx+d.ty*this.shx+this.tx,we=d.tx*this.shy+d.ty*this.sy+this.ty;return new Ge(x,j,z,Z,fe,we)},Ge.prototype.decompose=function(){var d=this.sx,x=this.shy,j=this.shx,z=this.sy,Z=this.tx,fe=this.ty,we=Math.sqrt(d*d+x*x),Re=(d/=we)*j+(x/=we)*z;j-=d*Re,z-=x*Re;var We=Math.sqrt(j*j+z*z);return Re/=We,d*(z/=We)<x*(j/=We)&&(d=-d,x=-x,Re=-Re,we=-we),{scale:new Ge(we,0,0,We,0,0),translate:new Ge(1,0,0,1,Z,fe),rotate:new Ge(d,x,-x,d,0,0),skew:new Ge(1,0,Re,1,0,0)}},Ge.prototype.toString=function(d){return this.join(" ")},Ge.prototype.inversed=function(){var d=this.sx,x=this.shy,j=this.shx,z=this.sy,Z=this.tx,fe=this.ty,we=1/(d*z-x*j),Re=z*we,We=-x*we,st=-j*we,rt=d*we;return new Ge(Re,We,st,rt,-Re*Z-st*fe,-We*Z-rt*fe)},Ge.prototype.applyToPoint=function(d){var x=d.x*this.sx+d.y*this.shx+this.tx,j=d.x*this.shy+d.y*this.sy+this.ty;return new ma(x,j)},Ge.prototype.applyToRectangle=function(d){var x=this.applyToPoint(d),j=this.applyToPoint(new ma(d.x+d.w,d.y+d.h));return new No(x.x,x.y,j.x-x.x,j.y-x.y)},Ge.prototype.clone=function(){var d=this.sx,x=this.shy,j=this.shx,z=this.sy,Z=this.tx,fe=this.ty;return new Ge(d,x,j,z,Z,fe)},g.Matrix=Ge;var wr=g.matrixMult=function(d,x){return x.multiply(d)},Wr=new Ge(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=Wr;var zn=function(d,x){if(!_s[d]){var j=(x instanceof Ms?"Sh":"P")+(Object.keys(St).length+1).toString(10);x.id=j,_s[d]=j,St[j]=x,At.publish("addPattern",x)}};g.ShadingPattern=Ms,g.TilingPattern=Ba,g.addShadingPattern=function(d,x){return V("addShadingPattern()"),zn(d,x),this},g.beginTilingPattern=function(d){V("beginTilingPattern()"),sc(d.boundingBox[0],d.boundingBox[1],d.boundingBox[2]-d.boundingBox[0],d.boundingBox[3]-d.boundingBox[1],d.matrix)},g.endTilingPattern=function(d,x){V("endTilingPattern()"),x.stream=xe[F].join(`
`),zn(d,x),At.publish("endTilingPattern",x),Vr.pop().restore()};var ln=g.__private__.newObject=function(){var d=rn();return Zn(d,!0),d},rn=g.__private__.newObjectDeferred=function(){return X++,ne[X]=function(){return oe},X},Zn=function(d,x){return x=typeof x=="boolean"&&x,ne[d]=oe,x&&B(d+" 0 obj"),d},na=g.__private__.newAdditionalObject=function(){var d={objId:rn(),content:""};return Se.push(d),d},oi=rn(),xr=rn(),Nr=g.__private__.decodeColorString=function(d){var x=d.split(" ");if(x.length!==2||x[1]!=="g"&&x[1]!=="G")x.length===5&&(x[4]==="k"||x[4]==="K")&&(x=[(1-x[0])*(1-x[3]),(1-x[1])*(1-x[3]),(1-x[2])*(1-x[3]),"r"]);else{var j=parseFloat(x[0]);x=[j,j,j,"r"]}for(var z="#",Z=0;Z<3;Z++)z+=("0"+Math.floor(255*parseFloat(x[Z])).toString(16)).slice(-2);return z},Sr=g.__private__.encodeColorString=function(d){var x;typeof d=="string"&&(d={ch1:d});var j=d.ch1,z=d.ch2,Z=d.ch3,fe=d.ch4,we=d.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof j=="string"&&j.charAt(0)!=="#"){var Re=new Iv(j);if(Re.ok)j=Re.toHex();else if(!/^\d*\.?\d*$/.test(j))throw new Error('Invalid color "'+j+'" passed to jsPDF.encodeColorString.')}if(typeof j=="string"&&/^#[0-9A-Fa-f]{3}$/.test(j)&&(j="#"+j[1]+j[1]+j[2]+j[2]+j[3]+j[3]),typeof j=="string"&&/^#[0-9A-Fa-f]{6}$/.test(j)){var We=parseInt(j.substr(1),16);j=We>>16&255,z=We>>8&255,Z=255&We}if(z===void 0||fe===void 0&&j===z&&z===Z)if(typeof j=="string")x=j+" "+we[0];else switch(d.precision){case 2:x=me(j/255)+" "+we[0];break;case 3:default:x=D(j/255)+" "+we[0]}else if(fe===void 0||wt(fe)==="object"){if(fe&&!isNaN(fe.a)&&fe.a===0)return x=["1.","1.","1.",we[1]].join(" ");if(typeof j=="string")x=[j,z,Z,we[1]].join(" ");else switch(d.precision){case 2:x=[me(j/255),me(z/255),me(Z/255),we[1]].join(" ");break;default:case 3:x=[D(j/255),D(z/255),D(Z/255),we[1]].join(" ")}}else if(typeof j=="string")x=[j,z,Z,fe,we[2]].join(" ");else switch(d.precision){case 2:x=[me(j),me(z),me(Z),me(fe),we[2]].join(" ");break;case 3:default:x=[D(j),D(z),D(Z),D(fe),we[2]].join(" ")}return x},zr=g.__private__.getFilters=function(){return a},lr=g.__private__.putStream=function(d){var x=(d=d||{}).data||"",j=d.filters||zr(),z=d.alreadyAppliedFilters||[],Z=d.addLength1||!1,fe=x.length,we=d.objectId,Re=function(An){return An};if(f!==null&&we===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(Re=Sn.encryptor(we,0));var We={};j===!0&&(j=["FlateEncode"]);var st=d.additionalKeyValues||[],rt=(We=Ye.API.processDataByFilters!==void 0?Ye.API.processDataByFilters(x,j):{data:x,reverseChain:[]}).reverseChain+(Array.isArray(z)?z.join(" "):z.toString());if(We.data.length!==0&&(st.push({key:"Length",value:We.data.length}),Z===!0&&st.push({key:"Length1",value:fe})),rt.length!=0)if(rt.split("/").length-1==1)st.push({key:"Filter",value:rt});else{st.push({key:"Filter",value:"["+rt+"]"});for(var mt=0;mt<st.length;mt+=1)if(st[mt].key==="DecodeParms"){for(var Vt=[],$t=0;$t<We.reverseChain.split("/").length-1;$t+=1)Vt.push("null");Vt.push(st[mt].value),st[mt].value="["+Vt.join(" ")+"]"}}B("<<");for(var sn=0;sn<st.length;sn++)B("/"+st[sn].key+" "+st[sn].value);B(">>"),We.data.length!==0&&(B("stream"),B(Re(We.data)),B("endstream"))},Hr=g.__private__.putPage=function(d){var x=d.number,j=d.data,z=d.objId,Z=d.contentsObjId;Zn(z,!0),B("<</Type /Page"),B("/Parent "+d.rootDictionaryObjId+" 0 R"),B("/Resources "+d.resourceDictionaryObjId+" 0 R"),B("/MediaBox ["+parseFloat(Q(d.mediaBox.bottomLeftX))+" "+parseFloat(Q(d.mediaBox.bottomLeftY))+" "+Q(d.mediaBox.topRightX)+" "+Q(d.mediaBox.topRightY)+"]"),d.cropBox!==null&&B("/CropBox ["+Q(d.cropBox.bottomLeftX)+" "+Q(d.cropBox.bottomLeftY)+" "+Q(d.cropBox.topRightX)+" "+Q(d.cropBox.topRightY)+"]"),d.bleedBox!==null&&B("/BleedBox ["+Q(d.bleedBox.bottomLeftX)+" "+Q(d.bleedBox.bottomLeftY)+" "+Q(d.bleedBox.topRightX)+" "+Q(d.bleedBox.topRightY)+"]"),d.trimBox!==null&&B("/TrimBox ["+Q(d.trimBox.bottomLeftX)+" "+Q(d.trimBox.bottomLeftY)+" "+Q(d.trimBox.topRightX)+" "+Q(d.trimBox.topRightY)+"]"),d.artBox!==null&&B("/ArtBox ["+Q(d.artBox.bottomLeftX)+" "+Q(d.artBox.bottomLeftY)+" "+Q(d.artBox.topRightX)+" "+Q(d.artBox.topRightY)+"]"),typeof d.userUnit=="number"&&d.userUnit!==1&&B("/UserUnit "+d.userUnit),At.publish("putPage",{objId:z,pageContext:nt[x],pageNumber:x,page:j}),B("/Contents "+Z+" 0 R"),B(">>"),B("endobj");var fe=j.join(`
`);return P===A.ADVANCED&&(fe+=`
Q`),Zn(Z,!0),lr({data:fe,filters:zr(),objectId:Z}),B("endobj"),z},ws=g.__private__.putPages=function(){var d,x,j=[];for(d=1;d<=Ht;d++)nt[d].objId=rn(),nt[d].contentsObjId=rn();for(d=1;d<=Ht;d++)j.push(Hr({number:d,data:xe[d],objId:nt[d].objId,contentsObjId:nt[d].contentsObjId,mediaBox:nt[d].mediaBox,cropBox:nt[d].cropBox,bleedBox:nt[d].bleedBox,trimBox:nt[d].trimBox,artBox:nt[d].artBox,userUnit:nt[d].userUnit,rootDictionaryObjId:oi,resourceDictionaryObjId:xr}));Zn(oi,!0),B("<</Type /Pages");var z="/Kids [";for(x=0;x<Ht;x++)z+=j[x]+" 0 R ";B(z+"]"),B("/Count "+Ht),B(">>"),B("endobj"),At.publish("postPutPages")},ra=function(d){At.publish("putFont",{font:d,out:B,newObject:ln,putStream:lr}),d.isAlreadyPutted!==!0&&(d.objectNumber=ln(),B("<<"),B("/Type /Font"),B("/BaseFont /"+Ra(d.postScriptName)),B("/Subtype /Type1"),typeof d.encoding=="string"&&B("/Encoding /"+d.encoding),B("/FirstChar 32"),B("/LastChar 255"),B(">>"),B("endobj"))},ia=function(){for(var d in Dt)Dt.hasOwnProperty(d)&&(p===!1||p===!0&&v.hasOwnProperty(d))&&ra(Dt[d])},sa=function(d){d.objectNumber=ln();var x=[];x.push({key:"Type",value:"/XObject"}),x.push({key:"Subtype",value:"/Form"}),x.push({key:"BBox",value:"["+[Q(d.x),Q(d.y),Q(d.x+d.width),Q(d.y+d.height)].join(" ")+"]"}),x.push({key:"Matrix",value:"["+d.matrix.toString()+"]"});var j=d.pages[1].join(`
`);lr({data:j,additionalKeyValues:x,objectId:d.objectNumber}),B("endobj")},aa=function(){for(var d in yn)yn.hasOwnProperty(d)&&sa(yn[d])},ql=function(d,x){var j,z=[],Z=1/(x-1);for(j=0;j<1;j+=Z)z.push(j);if(z.push(1),d[0].offset!=0){var fe={offset:0,color:d[0].color};d.unshift(fe)}if(d[d.length-1].offset!=1){var we={offset:1,color:d[d.length-1].color};d.push(we)}for(var Re="",We=0,st=0;st<z.length;st++){for(j=z[st];j>d[We+1].offset;)We++;var rt=d[We].offset,mt=(j-rt)/(d[We+1].offset-rt),Vt=d[We].color,$t=d[We+1].color;Re+=H(Math.round((1-mt)*Vt[0]+mt*$t[0]).toString(16))+H(Math.round((1-mt)*Vt[1]+mt*$t[1]).toString(16))+H(Math.round((1-mt)*Vt[2]+mt*$t[2]).toString(16))}return Re.trim()},ih=function(d,x){x||(x=21);var j=ln(),z=ql(d.colors,x),Z=[];Z.push({key:"FunctionType",value:"0"}),Z.push({key:"Domain",value:"[0.0 1.0]"}),Z.push({key:"Size",value:"["+x+"]"}),Z.push({key:"BitsPerSample",value:"8"}),Z.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Z.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),lr({data:z,additionalKeyValues:Z,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:j}),B("endobj"),d.objectNumber=ln(),B("<< /ShadingType "+d.type),B("/ColorSpace /DeviceRGB");var fe="/Coords ["+Q(parseFloat(d.coords[0]))+" "+Q(parseFloat(d.coords[1]))+" ";d.type===2?fe+=Q(parseFloat(d.coords[2]))+" "+Q(parseFloat(d.coords[3])):fe+=Q(parseFloat(d.coords[2]))+" "+Q(parseFloat(d.coords[3]))+" "+Q(parseFloat(d.coords[4]))+" "+Q(parseFloat(d.coords[5])),B(fe+="]"),d.matrix&&B("/Matrix ["+d.matrix.toString()+"]"),B("/Function "+j+" 0 R"),B("/Extend [true true]"),B(">>"),B("endobj")},sh=function(d,x){var j=rn(),z=ln();x.push({resourcesOid:j,objectOid:z}),d.objectNumber=z;var Z=[];Z.push({key:"Type",value:"/Pattern"}),Z.push({key:"PatternType",value:"1"}),Z.push({key:"PaintType",value:"1"}),Z.push({key:"TilingType",value:"1"}),Z.push({key:"BBox",value:"["+d.boundingBox.map(Q).join(" ")+"]"}),Z.push({key:"XStep",value:Q(d.xStep)}),Z.push({key:"YStep",value:Q(d.yStep)}),Z.push({key:"Resources",value:j+" 0 R"}),d.matrix&&Z.push({key:"Matrix",value:"["+d.matrix.toString()+"]"}),lr({data:d.stream,additionalKeyValues:Z,objectId:d.objectNumber}),B("endobj")},oa=function(d){var x;for(x in St)St.hasOwnProperty(x)&&(St[x]instanceof Ms?ih(St[x]):St[x]instanceof Ba&&sh(St[x],d))},Vl=function(d){for(var x in d.objectNumber=ln(),B("<<"),d)switch(x){case"opacity":B("/ca "+me(d[x]));break;case"stroke-opacity":B("/CA "+me(d[x]))}B(">>"),B("endobj")},ah=function(){var d;for(d in zt)zt.hasOwnProperty(d)&&Vl(zt[d])},fo=function(){for(var d in B("/XObject <<"),yn)yn.hasOwnProperty(d)&&yn[d].objectNumber>=0&&B("/"+d+" "+yn[d].objectNumber+" 0 R");At.publish("putXobjectDict"),B(">>")},oh=function(){Sn.oid=ln(),B("<<"),B("/Filter /Standard"),B("/V "+Sn.v),B("/R "+Sn.r),B("/U <"+Sn.toHexString(Sn.U)+">"),B("/O <"+Sn.toHexString(Sn.O)+">"),B("/P "+Sn.P),B(">>"),B("endobj")},Wl=function(){for(var d in B("/Font <<"),Dt)Dt.hasOwnProperty(d)&&(p===!1||p===!0&&v.hasOwnProperty(d))&&B("/"+d+" "+Dt[d].objectNumber+" 0 R");B(">>")},lh=function(){if(Object.keys(St).length>0){for(var d in B("/Shading <<"),St)St.hasOwnProperty(d)&&St[d]instanceof Ms&&St[d].objectNumber>=0&&B("/"+d+" "+St[d].objectNumber+" 0 R");At.publish("putShadingPatternDict"),B(">>")}},la=function(d){if(Object.keys(St).length>0){for(var x in B("/Pattern <<"),St)St.hasOwnProperty(x)&&St[x]instanceof g.TilingPattern&&St[x].objectNumber>=0&&St[x].objectNumber<d&&B("/"+x+" "+St[x].objectNumber+" 0 R");At.publish("putTilingPatternDict"),B(">>")}},ch=function(){if(Object.keys(zt).length>0){var d;for(d in B("/ExtGState <<"),zt)zt.hasOwnProperty(d)&&zt[d].objectNumber>=0&&B("/"+d+" "+zt[d].objectNumber+" 0 R");At.publish("putGStateDict"),B(">>")}},Jt=function(d){Zn(d.resourcesOid,!0),B("<<"),B("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Wl(),lh(),la(d.objectOid),ch(),fo(),B(">>"),B("endobj")},zl=function(){var d=[];ia(),ah(),aa(),oa(d),At.publish("putResources"),d.forEach(Jt),Jt({resourcesOid:xr,objectOid:Number.MAX_SAFE_INTEGER}),At.publish("postPutResources")},Hl=function(){At.publish("putAdditionalObjects");for(var d=0;d<Se.length;d++){var x=Se[d];Zn(x.objId,!0),B(x.content),B("endobj")}At.publish("postPutAdditionalObjects")},$l=function(d){qt[d.fontName]=qt[d.fontName]||{},qt[d.fontName][d.fontStyle]=d.id},po=function(d,x,j,z,Z){var fe={id:"F"+(Object.keys(Dt).length+1).toString(10),postScriptName:d,fontName:x,fontStyle:j,encoding:z,isStandardFont:Z||!1,metadata:{}};return At.publish("addFont",{font:fe,instance:this}),Dt[fe.id]=fe,$l(fe),fe.id},uh=function(d){for(var x=0,j=Ne.length;x<j;x++){var z=po.call(this,d[x][0],d[x][1],d[x][2],Ne[x][3],!0);p===!1&&(v[z]=!0);var Z=d[x][0].split("-");$l({id:z,fontName:Z[0],fontStyle:Z[1]||""})}At.publish("addFonts",{fonts:Dt,dictionary:qt})},Ar=function(d){return d.foo=function(){try{return d.apply(this,arguments)}catch(z){var x=z.stack||"";~x.indexOf(" at ")&&(x=x.split(" at ")[1]);var j="Error in function "+x.split(`
`)[0].split("<")[0]+": "+z.message;if(!Ke.console)throw new Error(j);Ke.console.error(j,z),Ke.alert&&alert(j)}},d.foo.bar=d,d.foo},ca=function(d,x){var j,z,Z,fe,we,Re,We,st,rt;if(Z=(x=x||{}).sourceEncoding||"Unicode",we=x.outputEncoding,(x.autoencode||we)&&Dt[ht].metadata&&Dt[ht].metadata[Z]&&Dt[ht].metadata[Z].encoding&&(fe=Dt[ht].metadata[Z].encoding,!we&&Dt[ht].encoding&&(we=Dt[ht].encoding),!we&&fe.codePages&&(we=fe.codePages[0]),typeof we=="string"&&(we=fe[we]),we)){for(We=!1,Re=[],j=0,z=d.length;j<z;j++)(st=we[d.charCodeAt(j)])?Re.push(String.fromCharCode(st)):Re.push(d[j]),Re[j].charCodeAt(0)>>8&&(We=!0);d=Re.join("")}for(j=d.length;We===void 0&&j!==0;)d.charCodeAt(j-1)>>8&&(We=!0),j--;if(!We)return d;for(Re=x.noBOM?[]:[254,255],j=0,z=d.length;j<z;j++){if((rt=(st=d.charCodeAt(j))>>8)>>8)throw new Error("Character at position "+j+" of string '"+d+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Re.push(rt),Re.push(st-(rt<<8))}return String.fromCharCode.apply(void 0,Re)},Hn=g.__private__.pdfEscape=g.pdfEscape=function(d,x){return ca(d,x).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},mo=g.__private__.beginPage=function(d){xe[++Ht]=[],nt[Ht]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(d[0]),topRightY:Number(d[1])}},Yl(Ht),pe(xe[F])},Gl=function(d,x){var j,z,Z;switch(t=x||t,typeof d=="string"&&(j=b(d.toLowerCase()),Array.isArray(j)&&(z=j[0],Z=j[1])),Array.isArray(d)&&(z=d[0]*Me,Z=d[1]*Me),isNaN(z)&&(z=i[0],Z=i[1]),(z>14400||Z>14400)&&(Mt.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),z=Math.min(14400,z),Z=Math.min(14400,Z)),i=[z,Z],t.substr(0,1)){case"l":Z>z&&(i=[Z,z]);break;case"p":z>Z&&(i=[Z,z])}mo(i),ec(_o),B(kr),wo!==0&&B(wo+" J"),xo!==0&&B(xo+" j"),At.publish("addPage",{pageNumber:Ht})},hh=function(d){d>0&&d<=Ht&&(xe.splice(d,1),nt.splice(d,1),Ht--,F>Ht&&(F=Ht),this.setPage(F))},Yl=function(d){d>0&&d<=Ht&&(F=d)},dh=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return xe.length-1},Kl=function(d,x,j){var z,Z=void 0;return j=j||{},d=d!==void 0?d:Dt[ht].fontName,x=x!==void 0?x:Dt[ht].fontStyle,z=d.toLowerCase(),qt[z]!==void 0&&qt[z][x]!==void 0?Z=qt[z][x]:qt[d]!==void 0&&qt[d][x]!==void 0?Z=qt[d][x]:j.disableWarning===!1&&Mt.warn("Unable to look up font label for font '"+d+"', '"+x+"'. Refer to getFontList() for available fonts."),Z||j.noFallback||(Z=qt.times[x])==null&&(Z=qt.times.normal),Z},fh=g.__private__.putInfo=function(){var d=ln(),x=function(z){return z};for(var j in f!==null&&(x=Sn.encryptor(d,0)),B("<<"),B("/Producer ("+Hn(x("jsPDF "+Ye.version))+")"),Qe)Qe.hasOwnProperty(j)&&Qe[j]&&B("/"+j.substr(0,1).toUpperCase()+j.substr(1)+" ("+Hn(x(Qe[j]))+")");B("/CreationDate ("+Hn(x(ce))+")"),B(">>"),B("endobj")},go=g.__private__.putCatalog=function(d){var x=(d=d||{}).rootDictionaryObjId||oi;switch(ln(),B("<<"),B("/Type /Catalog"),B("/Pages "+x+" 0 R"),Oe||(Oe="fullwidth"),Oe){case"fullwidth":B("/OpenAction [3 0 R /FitH null]");break;case"fullheight":B("/OpenAction [3 0 R /FitV null]");break;case"fullpage":B("/OpenAction [3 0 R /Fit]");break;case"original":B("/OpenAction [3 0 R /XYZ null null 1]");break;default:var j=""+Oe;j.substr(j.length-1)==="%"&&(Oe=parseInt(Oe)/100),typeof Oe=="number"&&B("/OpenAction [3 0 R /XYZ null null "+me(Oe)+"]")}switch(ct||(ct="continuous"),ct){case"continuous":B("/PageLayout /OneColumn");break;case"single":B("/PageLayout /SinglePage");break;case"two":case"twoleft":B("/PageLayout /TwoColumnLeft");break;case"tworight":B("/PageLayout /TwoColumnRight")}tt&&B("/PageMode /"+tt),At.publish("putCatalog"),B(">>"),B("endobj")},ph=g.__private__.putTrailer=function(){B("trailer"),B("<<"),B("/Size "+(X+1)),B("/Root "+X+" 0 R"),B("/Info "+(X-1)+" 0 R"),f!==null&&B("/Encrypt "+Sn.oid+" 0 R"),B("/ID [ <"+le+"> <"+le+"> ]"),B(">>")},mh=g.__private__.putHeader=function(){B("%PDF-"+N),B("%ºß¬à")},gh=g.__private__.putXRef=function(){var d="0000000000";B("xref"),B("0 "+(X+1)),B("0000000000 65535 f ");for(var x=1;x<=X;x++)typeof ne[x]=="function"?B((d+ne[x]()).slice(-10)+" 00000 n "):ne[x]!==void 0?B((d+ne[x]).slice(-10)+" 00000 n "):B("0000000000 00000 n ")},li=g.__private__.buildDocument=function(){$e(),pe(ae),At.publish("buildDocument"),mh(),ws(),Hl(),zl(),f!==null&&oh(),fh(),go();var d=oe;return gh(),ph(),B("startxref"),B(""+d),B("%%EOF"),pe(xe[F]),ae.join(`
`)},ua=g.__private__.getBlob=function(d){return new Blob([je(d)],{type:"application/pdf"})},ha=g.output=g.__private__.output=Ar(function(d,x){switch(typeof(x=x||{})=="string"?x={filename:x}:x.filename=x.filename||"generated.pdf",d){case void 0:return li();case"save":g.save(x.filename);break;case"arraybuffer":return je(li());case"blob":return ua(li());case"bloburi":case"bloburl":if(Ke.URL!==void 0&&typeof Ke.URL.createObjectURL=="function")return Ke.URL&&Ke.URL.createObjectURL(ua(li()))||void 0;Mt.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var j="",z=li();try{j=Uf(z)}catch{j=Uf(unescape(encodeURIComponent(z)))}return"data:application/pdf;filename="+x.filename+";base64,"+j;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Ke)==="[object Window]"){var Z="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",fe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';x.pdfObjectUrl&&(Z=x.pdfObjectUrl,fe="");var we='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Z+'"'+fe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(x)+");<\/script></body></html>",Re=Ke.open();return Re!==null&&Re.document.write(we),Re}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Ke)==="[object Window]"){var We='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(x.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+x.filename+'" width="500px" height="400px" /></body></html>',st=Ke.open();if(st!==null){st.document.write(We);var rt=this;st.document.documentElement.querySelector("#pdfViewer").onload=function(){st.document.title=x.filename,st.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(rt.output("bloburl"))}}return st}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Ke)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var mt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",x)+'"></iframe></body></html>',Vt=Ke.open();if(Vt!==null&&(Vt.document.write(mt),Vt.document.title=x.filename),Vt||typeof safari>"u")return Vt;break;case"datauri":case"dataurl":return Ke.document.location.href=this.output("datauristring",x);default:return null}}),Xl=function(d){return Array.isArray(bs)===!0&&bs.indexOf(d)>-1};switch(r){case"pt":Me=1;break;case"mm":Me=72/25.4;break;case"cm":Me=72/2.54;break;case"in":Me=72;break;case"px":Me=Xl("px_scaling")==1?.75:96/72;break;case"pc":case"em":Me=12;break;case"ex":Me=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Me=r}var Sn=null;Te(),re();var vh=function(d){return f!==null?Sn.encryptor(d,0):function(x){return x}},Jl=g.__private__.getPageInfo=g.getPageInfo=function(d){if(isNaN(d)||d%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:nt[d].objId,pageNumber:d,pageContext:nt[d]}},et=g.__private__.getPageInfoByObjId=function(d){if(isNaN(d)||d%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var x in nt)if(nt[x].objId===d)break;return Jl(x)},yh=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:nt[F].objId,pageNumber:F,pageContext:nt[F]}};g.addPage=function(){return Gl.apply(this,arguments),this},g.setPage=function(){return Yl.apply(this,arguments),pe.call(this,xe[F]),this},g.insertPage=function(d){return this.addPage(),this.movePage(F,d),this},g.movePage=function(d,x){var j,z;if(d>x){j=xe[d],z=nt[d];for(var Z=d;Z>x;Z--)xe[Z]=xe[Z-1],nt[Z]=nt[Z-1];xe[x]=j,nt[x]=z,this.setPage(x)}else if(d<x){j=xe[d],z=nt[d];for(var fe=d;fe<x;fe++)xe[fe]=xe[fe+1],nt[fe]=nt[fe+1];xe[x]=j,nt[x]=z,this.setPage(x)}return this},g.deletePage=function(){return hh.apply(this,arguments),this},g.__private__.text=g.text=function(d,x,j,z,Z){var fe,we,Re,We,st,rt,mt,Vt,$t,sn=(z=z||{}).scope||this;if(typeof d=="number"&&typeof x=="number"&&(typeof j=="string"||Array.isArray(j))){var An=j;j=x,x=d,d=An}if(arguments[3]instanceof Ge?(V("The transform parameter of text() with a Matrix value"),$t=Z):(Re=arguments[4],We=arguments[5],wt(mt=arguments[3])==="object"&&mt!==null||(typeof Re=="string"&&(We=Re,Re=null),typeof mt=="string"&&(We=mt,mt=null),typeof mt=="number"&&(Re=mt,mt=null),z={flags:mt,angle:Re,align:We})),isNaN(x)||isNaN(j)||d==null)throw new Error("Invalid arguments passed to jsPDF.text");if(d.length===0)return sn;var dn="",Cr=!1,er=typeof z.lineHeightFactor=="number"?z.lineHeightFactor:Ns,Yr=sn.internal.scaleFactor;function ac(Rt){return Rt=Rt.split("	").join(Array(z.TabLen||9).join(" ")),Hn(Rt,mt)}function Co(Rt){for(var Ft,Zt=Rt.concat(),cn=[],fi=Zt.length;fi--;)typeof(Ft=Zt.shift())=="string"?cn.push(Ft):Array.isArray(Rt)&&(Ft.length===1||Ft[1]===void 0&&Ft[2]===void 0)?cn.push(Ft[0]):cn.push([Ft[0],Ft[1],Ft[2]]);return cn}function Eo(Rt,Ft){var Zt;if(typeof Rt=="string")Zt=Ft(Rt)[0];else if(Array.isArray(Rt)){for(var cn,fi,Ro=Rt.concat(),ka=[],hc=Ro.length;hc--;)typeof(cn=Ro.shift())=="string"?ka.push(Ft(cn)[0]):Array.isArray(cn)&&typeof cn[0]=="string"&&(fi=Ft(cn[0],cn[1],cn[2]),ka.push([fi[0],fi[1],fi[2]]));Zt=ka}return Zt}var va=!1,Io=!0;if(typeof d=="string")va=!0;else if(Array.isArray(d)){var To=d.concat();we=[];for(var ya,_n=To.length;_n--;)(typeof(ya=To.shift())!="string"||Array.isArray(ya)&&typeof ya[0]!="string")&&(Io=!1);va=Io}if(va===!1)throw new Error('Type of text must be string or Array. "'+d+'" is not recognized.');typeof d=="string"&&(d=d.match(/[\r?\n]/)?d.split(/\r\n|\r|\n/g):[d]);var _a=Ce/sn.internal.scaleFactor,ba=_a*(er-1);switch(z.baseline){case"bottom":j-=ba;break;case"top":j+=_a-ba;break;case"hanging":j+=_a-2*ba;break;case"middle":j+=_a/2-ba}if((rt=z.maxWidth||0)>0&&(typeof d=="string"?d=sn.splitTextToSize(d,rt):Object.prototype.toString.call(d)==="[object Array]"&&(d=d.reduce(function(Rt,Ft){return Rt.concat(sn.splitTextToSize(Ft,rt))},[]))),fe={text:d,x,y:j,options:z,mutex:{pdfEscape:Hn,activeFontKey:ht,fonts:Dt,activeFontSize:Ce}},At.publish("preProcessText",fe),d=fe.text,Re=(z=fe.options).angle,!($t instanceof Ge)&&Re&&typeof Re=="number"){Re*=Math.PI/180,z.rotationDirection===0&&(Re=-Re),P===A.ADVANCED&&(Re=-Re);var wa=Math.cos(Re),Lo=Math.sin(Re);$t=new Ge(wa,Lo,-Lo,wa,0,0)}else Re&&Re instanceof Ge&&($t=Re);P!==A.ADVANCED||$t||($t=Wr),(st=z.charSpace||pa)!==void 0&&(dn+=Q(O(st))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Vt=z.horizontalScale)!==void 0&&(dn+=Q(100*Vt)+` Tz
`),z.lang;var $n=-1,Eh=z.renderingMode!==void 0?z.renderingMode:z.stroke,Po=sn.internal.getCurrentPageInfo().pageContext;switch(Eh){case 0:case!1:case"fill":$n=0;break;case 1:case!0:case"stroke":$n=1;break;case 2:case"fillThenStroke":$n=2;break;case 3:case"invisible":$n=3;break;case 4:case"fillAndAddForClipping":$n=4;break;case 5:case"strokeAndAddPathForClipping":$n=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":$n=6;break;case 7:case"addToPathForClipping":$n=7}var oc=Po.usedRenderingMode!==void 0?Po.usedRenderingMode:-1;$n!==-1?dn+=$n+` Tr
`:oc!==-1&&(dn+=`0 Tr
`),$n!==-1&&(Po.usedRenderingMode=$n),We=z.align||"left";var cr,xa=Ce*er,lc=sn.internal.pageSize.getWidth(),cc=Dt[ht];st=z.charSpace||pa,rt=z.maxWidth||0,mt=Object.assign({autoencode:!0,noBOM:!0},z.flags);var Ri=[],ks=function(Rt){return sn.getStringUnitWidth(Rt,{font:cc,charSpace:st,fontSize:Ce,doKerning:!1})*Ce/Yr};if(Object.prototype.toString.call(d)==="[object Array]"){var Gn;we=Co(d),We!=="left"&&(cr=we.map(ks));var On,Fi=0;if(We==="right"){x-=cr[0],d=[],_n=we.length;for(var ui=0;ui<_n;ui++)ui===0?(On=Gr(x),Gn=ci(j)):(On=O(Fi-cr[ui]),Gn=-xa),d.push([we[ui],On,Gn]),Fi=cr[ui]}else if(We==="center"){x-=cr[0]/2,d=[],_n=we.length;for(var hi=0;hi<_n;hi++)hi===0?(On=Gr(x),Gn=ci(j)):(On=O((Fi-cr[hi])/2),Gn=-xa),d.push([we[hi],On,Gn]),Fi=cr[hi]}else if(We==="left"){d=[],_n=we.length;for(var Na=0;Na<_n;Na++)d.push(we[Na])}else if(We==="justify"&&cc.encoding==="Identity-H"){d=[],_n=we.length,rt=rt!==0?rt:lc;for(var di=0,Qt=0;Qt<_n;Qt++)if(Gn=Qt===0?ci(j):-xa,On=Qt===0?Gr(x):di,Qt<_n-1){var Do=O((rt-cr[Qt])/(we[Qt].split(" ").length-1)),Mn=we[Qt].split(" ");d.push([Mn[0]+" ",On,Gn]),di=0;for(var ur=1;ur<Mn.length;ur++){var Sa=(ks(Mn[ur-1]+" "+Mn[ur])-ks(Mn[ur]))*Yr+Do;ur==Mn.length-1?d.push([Mn[ur],Sa,0]):d.push([Mn[ur]+" ",Sa,0]),di-=Sa}}else d.push([we[Qt],On,Gn]);d.push(["",di,0])}else{if(We!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(d=[],_n=we.length,rt=rt!==0?rt:lc,Qt=0;Qt<_n;Qt++)Gn=Qt===0?ci(j):-xa,On=Qt===0?Gr(x):0,Qt<_n-1?Ri.push(Q(O((rt-cr[Qt])/(we[Qt].split(" ").length-1)))):Ri.push(0),d.push([we[Qt],On,Gn])}}var uc=typeof z.R2L=="boolean"?z.R2L:Ve;uc===!0&&(d=Eo(d,function(Rt,Ft,Zt){return[Rt.split("").reverse().join(""),Ft,Zt]})),fe={text:d,x,y:j,options:z,mutex:{pdfEscape:Hn,activeFontKey:ht,fonts:Dt,activeFontSize:Ce}},At.publish("postProcessText",fe),d=fe.text,Cr=fe.mutex.isHex||!1;var Oo=Dt[ht].encoding;Oo!=="WinAnsiEncoding"&&Oo!=="StandardEncoding"||(d=Eo(d,function(Rt,Ft,Zt){return[ac(Rt),Ft,Zt]})),we=Co(d),d=[];for(var Cs,Es,ji,Is=0,Aa=1,Ts=Array.isArray(we[0])?Aa:Is,Bi="",Mo=function(Rt,Ft,Zt){var cn="";return Zt instanceof Ge?(Zt=typeof z.angle=="number"?wr(Zt,new Ge(1,0,0,1,Rt,Ft)):wr(new Ge(1,0,0,1,Rt,Ft),Zt),P===A.ADVANCED&&(Zt=wr(new Ge(1,0,0,-1,0,0),Zt)),cn=Zt.join(" ")+` Tm
`):cn=Q(Rt)+" "+Q(Ft)+` Td
`,cn},hr=0;hr<we.length;hr++){switch(Bi="",Ts){case Aa:ji=(Cr?"<":"(")+we[hr][0]+(Cr?">":")"),Cs=parseFloat(we[hr][1]),Es=parseFloat(we[hr][2]);break;case Is:ji=(Cr?"<":"(")+we[hr]+(Cr?">":")"),Cs=Gr(x),Es=ci(j)}Ri!==void 0&&Ri[hr]!==void 0&&(Bi=Ri[hr]+` Tw
`),hr===0?d.push(Bi+Mo(Cs,Es,$t)+ji):Ts===Is?d.push(Bi+ji):Ts===Aa&&d.push(Bi+Mo(Cs,Es,$t)+ji)}d=Ts===Is?d.join(` Tj
T* `):d.join(` Tj
`),d+=` Tj
`;var dr=`BT
/`;return dr+=ht+" "+Ce+` Tf
`,dr+=Q(Ce*er)+` TL
`,dr+=Ss+`
`,dr+=dn,dr+=d,B(dr+="ET"),v[ht]=!0,sn};var _h=g.__private__.clip=g.clip=function(d){return B(d==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return _h("evenodd")},g.__private__.discardPath=g.discardPath=function(){return B("n"),this};var $r=g.__private__.isValidStyle=function(d){var x=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(d)!==-1&&(x=!0),x};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(d){return $r(d)&&(u=d),this};var Ql=g.__private__.getStyle=g.getStyle=function(d){var x=u;switch(d){case"D":case"S":x="S";break;case"F":x="f";break;case"FD":case"DF":x="B";break;case"f":case"f*":case"B":case"B*":x=d}return x},Zl=g.close=function(){return B("h"),this};g.stroke=function(){return B("S"),this},g.fill=function(d){return da("f",d),this},g.fillEvenOdd=function(d){return da("f*",d),this},g.fillStroke=function(d){return da("B",d),this},g.fillStrokeEvenOdd=function(d){return da("B*",d),this};var da=function(d,x){wt(x)==="object"?wh(x,d):B(d)},vo=function(d){d===null||P===A.ADVANCED&&d===void 0||(d=Ql(d),B(d))};function bh(d,x,j,z,Z){var fe=new Ba(x||this.boundingBox,j||this.xStep,z||this.yStep,this.gState,Z||this.matrix);fe.stream=this.stream;var we=d+"$$"+this.cloneIndex+++"$$";return zn(we,fe),fe}var wh=function(d,x){var j=_s[d.key],z=St[j];if(z instanceof Ms)B("q"),B(xh(x)),z.gState&&g.setGState(z.gState),B(d.matrix.toString()+" cm"),B("/"+j+" sh"),B("Q");else if(z instanceof Ba){var Z=new Ge(1,0,0,-1,0,Mi());d.matrix&&(Z=Z.multiply(d.matrix||Wr),j=bh.call(z,d.key,d.boundingBox,d.xStep,d.yStep,Z).id),B("q"),B("/Pattern cs"),B("/"+j+" scn"),z.gState&&g.setGState(z.gState),B(x),B("Q")}},xh=function(d){switch(d){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},yo=g.moveTo=function(d,x){return B(Q(O(d))+" "+Q(q(x))+" m"),this},xs=g.lineTo=function(d,x){return B(Q(O(d))+" "+Q(q(x))+" l"),this},Di=g.curveTo=function(d,x,j,z,Z,fe){return B([Q(O(d)),Q(q(x)),Q(O(j)),Q(q(z)),Q(O(Z)),Q(q(fe)),"c"].join(" ")),this};g.__private__.line=g.line=function(d,x,j,z,Z){if(isNaN(d)||isNaN(x)||isNaN(j)||isNaN(z)||!$r(Z))throw new Error("Invalid arguments passed to jsPDF.line");return P===A.COMPAT?this.lines([[j-d,z-x]],d,x,[1,1],Z||"S"):this.lines([[j-d,z-x]],d,x,[1,1]).stroke()},g.__private__.lines=g.lines=function(d,x,j,z,Z,fe){var we,Re,We,st,rt,mt,Vt,$t,sn,An,dn,Cr;if(typeof d=="number"&&(Cr=j,j=x,x=d,d=Cr),z=z||[1,1],fe=fe||!1,isNaN(x)||isNaN(j)||!Array.isArray(d)||!Array.isArray(z)||!$r(Z)||typeof fe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(yo(x,j),we=z[0],Re=z[1],st=d.length,An=x,dn=j,We=0;We<st;We++)(rt=d[We]).length===2?(An=rt[0]*we+An,dn=rt[1]*Re+dn,xs(An,dn)):(mt=rt[0]*we+An,Vt=rt[1]*Re+dn,$t=rt[2]*we+An,sn=rt[3]*Re+dn,An=rt[4]*we+An,dn=rt[5]*Re+dn,Di(mt,Vt,$t,sn,An,dn));return fe&&Zl(),vo(Z),this},g.path=function(d){for(var x=0;x<d.length;x++){var j=d[x],z=j.c;switch(j.op){case"m":yo(z[0],z[1]);break;case"l":xs(z[0],z[1]);break;case"c":Di.apply(this,z);break;case"h":Zl()}}return this},g.__private__.rect=g.rect=function(d,x,j,z,Z){if(isNaN(d)||isNaN(x)||isNaN(j)||isNaN(z)||!$r(Z))throw new Error("Invalid arguments passed to jsPDF.rect");return P===A.COMPAT&&(z=-z),B([Q(O(d)),Q(q(x)),Q(O(j)),Q(O(z)),"re"].join(" ")),vo(Z),this},g.__private__.triangle=g.triangle=function(d,x,j,z,Z,fe,we){if(isNaN(d)||isNaN(x)||isNaN(j)||isNaN(z)||isNaN(Z)||isNaN(fe)||!$r(we))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[j-d,z-x],[Z-j,fe-z],[d-Z,x-fe]],d,x,[1,1],we,!0),this},g.__private__.roundedRect=g.roundedRect=function(d,x,j,z,Z,fe,we){if(isNaN(d)||isNaN(x)||isNaN(j)||isNaN(z)||isNaN(Z)||isNaN(fe)||!$r(we))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Re=4/3*(Math.SQRT2-1);return Z=Math.min(Z,.5*j),fe=Math.min(fe,.5*z),this.lines([[j-2*Z,0],[Z*Re,0,Z,fe-fe*Re,Z,fe],[0,z-2*fe],[0,fe*Re,-Z*Re,fe,-Z,fe],[2*Z-j,0],[-Z*Re,0,-Z,-fe*Re,-Z,-fe],[0,2*fe-z],[0,-fe*Re,Z*Re,-fe,Z,-fe]],d+Z,x,[1,1],we,!0),this},g.__private__.ellipse=g.ellipse=function(d,x,j,z,Z){if(isNaN(d)||isNaN(x)||isNaN(j)||isNaN(z)||!$r(Z))throw new Error("Invalid arguments passed to jsPDF.ellipse");var fe=4/3*(Math.SQRT2-1)*j,we=4/3*(Math.SQRT2-1)*z;return yo(d+j,x),Di(d+j,x-we,d+fe,x-z,d,x-z),Di(d-fe,x-z,d-j,x-we,d-j,x),Di(d-j,x+we,d-fe,x+z,d,x+z),Di(d+fe,x+z,d+j,x+we,d+j,x),vo(Z),this},g.__private__.circle=g.circle=function(d,x,j,z){if(isNaN(d)||isNaN(x)||isNaN(j)||!$r(z))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(d,x,j,j,z)},g.setFont=function(d,x,j){return j&&(x=ie(x,j)),ht=Kl(d,x,{disableWarning:!1}),this};var Nh=g.__private__.getFont=g.getFont=function(){return Dt[Kl.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var d,x,j={};for(d in qt)if(qt.hasOwnProperty(d))for(x in j[d]=[],qt[d])qt[d].hasOwnProperty(x)&&j[d].push(x);return j},g.addFont=function(d,x,j,z,Z){var fe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&fe.indexOf(arguments[3])!==-1?Z=arguments[3]:arguments[3]&&fe.indexOf(arguments[3])==-1&&(j=ie(j,z)),Z=Z||"Identity-H",po.call(this,d,x,j,Z)};var Ns,_o=n.lineWidth||.200025,fa=g.__private__.getLineWidth=g.getLineWidth=function(){return _o},ec=g.__private__.setLineWidth=g.setLineWidth=function(d){return _o=d,B(Q(O(d))+" w"),this};g.__private__.setLineDash=Ye.API.setLineDash=Ye.API.setLineDashPattern=function(d,x){if(d=d||[],x=x||0,isNaN(x)||!Array.isArray(d))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return d=d.map(function(j){return Q(O(j))}).join(" "),x=Q(O(x)),B("["+d+"] "+x+" d"),this};var tc=g.__private__.getLineHeight=g.getLineHeight=function(){return Ce*Ns};g.__private__.getLineHeight=g.getLineHeight=function(){return Ce*Ns};var nc=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(d){return typeof(d=d||1.15)=="number"&&(Ns=d),this},rc=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return Ns};nc(n.lineHeight);var Gr=g.__private__.getHorizontalCoordinate=function(d){return O(d)},ci=g.__private__.getVerticalCoordinate=function(d){return P===A.ADVANCED?d:nt[F].mediaBox.topRightY-nt[F].mediaBox.bottomLeftY-O(d)},Sh=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(d){return Q(Gr(d))},Oi=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(d){return Q(ci(d))},kr=n.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return Nr(kr)},g.__private__.setStrokeColor=g.setDrawColor=function(d,x,j,z){return kr=Sr({ch1:d,ch2:x,ch3:j,ch4:z,pdfColorType:"draw",precision:2}),B(kr),this};var bo=n.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return Nr(bo)},g.__private__.setFillColor=g.setFillColor=function(d,x,j,z){return bo=Sr({ch1:d,ch2:x,ch3:j,ch4:z,pdfColorType:"fill",precision:2}),B(bo),this};var Ss=n.textColor||"0 g",Ah=g.__private__.getTextColor=g.getTextColor=function(){return Nr(Ss)};g.__private__.setTextColor=g.setTextColor=function(d,x,j,z){return Ss=Sr({ch1:d,ch2:x,ch3:j,ch4:z,pdfColorType:"text",precision:3}),this};var pa=n.charSpace,kh=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(pa||0)};g.__private__.setCharSpace=g.setCharSpace=function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return pa=d,this};var wo=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(d){var x=g.CapJoinStyles[d];if(x===void 0)throw new Error("Line cap style of '"+d+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return wo=x,B(x+" J"),this};var xo=0;g.__private__.setLineJoin=g.setLineJoin=function(d){var x=g.CapJoinStyles[d];if(x===void 0)throw new Error("Line join style of '"+d+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return xo=x,B(x+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(d){if(d=d||0,isNaN(d))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return B(Q(O(d))+" M"),this},g.GState=Eu,g.setGState=function(d){(d=typeof d=="string"?zt[br[d]]:ic(null,d)).equals(ai)||(B("/"+d.id+" gs"),ai=d)};var ic=function(d,x){if(!d||!br[d]){var j=!1;for(var z in zt)if(zt.hasOwnProperty(z)&&zt[z].equals(x)){j=!0;break}if(j)x=zt[z];else{var Z="GS"+(Object.keys(zt).length+1).toString(10);zt[Z]=x,x.id=Z}return d&&(br[d]=x.id),At.publish("addGState",x),x}};g.addGState=function(d,x){return ic(d,x),this},g.saveGraphicsState=function(){return B("q"),Ur.push({key:ht,size:Ce,color:Ss}),this},g.restoreGraphicsState=function(){B("Q");var d=Ur.pop();return ht=d.key,Ce=d.size,Ss=d.color,ai=null,this},g.setCurrentTransformationMatrix=function(d){return B(d.toString()+" cm"),this},g.comment=function(d){return B("#"+d),this};var ma=function(d,x){var j=d||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return j},set:function(fe){isNaN(fe)||(j=parseFloat(fe))}});var z=x||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return z},set:function(fe){isNaN(fe)||(z=parseFloat(fe))}});var Z="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Z},set:function(fe){Z=fe.toString()}}),this},No=function(d,x,j,z){ma.call(this,d,x),this.type="rect";var Z=j||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Z},set:function(we){isNaN(we)||(Z=parseFloat(we))}});var fe=z||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return fe},set:function(we){isNaN(we)||(fe=parseFloat(we))}}),this},So=function(){this.page=Ht,this.currentPage=F,this.pages=xe.slice(0),this.pagesContext=nt.slice(0),this.x=Nn,this.y=yt,this.matrix=_r,this.width=As(F),this.height=Mi(F),this.outputDestination=Ie,this.id="",this.objectNumber=-1};So.prototype.restore=function(){Ht=this.page,F=this.currentPage,nt=this.pagesContext,xe=this.pages,Nn=this.x,yt=this.y,_r=this.matrix,Ao(F,this.width),ko(F,this.height),Ie=this.outputDestination};var sc=function(d,x,j,z,Z){Vr.push(new So),Ht=F=0,xe=[],Nn=d,yt=x,_r=Z,mo([j,z])},Ch=function(d){if(qr[d])Vr.pop().restore();else{var x=new So,j="Xo"+(Object.keys(yn).length+1).toString(10);x.id=j,qr[d]=j,yn[j]=x,At.publish("addFormObject",x),Vr.pop().restore()}};for(var ga in g.beginFormObject=function(d,x,j,z,Z){return sc(d,x,j,z,Z),this},g.endFormObject=function(d){return Ch(d),this},g.doFormObject=function(d,x){var j=yn[qr[d]];return B("q"),B(x.toString()+" cm"),B("/"+j.id+" Do"),B("Q"),this},g.getFormObject=function(d){var x=yn[qr[d]];return{x:x.x,y:x.y,width:x.width,height:x.height,matrix:x.matrix}},g.save=function(d,x){return d=d||"generated.pdf",(x=x||{}).returnPromise=x.returnPromise||!1,x.returnPromise===!1?(Os(ua(li()),d),typeof Os.unload=="function"&&Ke.setTimeout&&setTimeout(Os.unload,911),this):new Promise(function(j,z){try{var Z=Os(ua(li()),d);typeof Os.unload=="function"&&Ke.setTimeout&&setTimeout(Os.unload,911),j(Z)}catch(fe){z(fe.message)}})},Ye.API)Ye.API.hasOwnProperty(ga)&&(ga==="events"&&Ye.API.events.length?function(d,x){var j,z,Z;for(Z=x.length-1;Z!==-1;Z--)j=x[Z][0],z=x[Z][1],d.subscribe.apply(d,[j].concat(typeof z=="function"?[z]:z))}(At,Ye.API.events):g[ga]=Ye.API[ga]);var As=g.getPageWidth=function(d){return(nt[d=d||F].mediaBox.topRightX-nt[d].mediaBox.bottomLeftX)/Me},Ao=g.setPageWidth=function(d,x){nt[d].mediaBox.topRightX=x*Me+nt[d].mediaBox.bottomLeftX},Mi=g.getPageHeight=function(d){return(nt[d=d||F].mediaBox.topRightY-nt[d].mediaBox.bottomLeftY)/Me},ko=g.setPageHeight=function(d,x){nt[d].mediaBox.topRightY=x*Me+nt[d].mediaBox.bottomLeftY};return g.internal={pdfEscape:Hn,getStyle:Ql,getFont:Nh,getFontSize:De,getCharSpace:kh,getTextColor:Ah,getLineHeight:tc,getLineHeightFactor:rc,getLineWidth:fa,write:ze,getHorizontalCoordinate:Gr,getVerticalCoordinate:ci,getCoordinateString:Sh,getVerticalCoordinateString:Oi,collections:{},newObject:ln,newAdditionalObject:na,newObjectDeferred:rn,newObjectDeferredBegin:Zn,getFilters:zr,putStream:lr,events:At,scaleFactor:Me,pageSize:{getWidth:function(){return As(F)},setWidth:function(d){Ao(F,d)},getHeight:function(){return Mi(F)},setHeight:function(d){ko(F,d)}},encryptionOptions:f,encryption:Sn,getEncryptor:vh,output:ha,getNumberOfPages:dh,pages:xe,out:B,f2:me,f3:D,getPageInfo:Jl,getPageInfoByObjId:et,getCurrentPageInfo:yh,getPDFVersion:S,Point:ma,Rectangle:No,Matrix:Ge,hasHotfix:Xl},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return As(F)},set:function(d){Ao(F,d)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return Mi(F)},set:function(d){ko(F,d)},enumerable:!0,configurable:!0}),uh.call(g,Ne),ht="F1",Gl(i,t),At.publish("initialized"),g}Ma.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},Ma.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ma.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},Ma.prototype.processOwnerPassword=function(n,e){return Vf(qf(e).substr(0,5),n)},Ma.prototype.encryptor=function(n,e){var t=qf(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Vf(t,r)}},Eu.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||wt(n)!==wt(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},Ye.API={events:[]},Ye.version="2.5.2";var Yt=Ye.API,Qp=1,ta=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Pa=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},it=function(n){return n.toFixed(2)},Ki=function(n){return n.toFixed(5)};Yt.__acroform__={};var Qn=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},lg=function(n){return n*Qp},Xr=function(n){var e=new Dv,t=Be.internal.getHeight(n)||0,r=Be.internal.getWidth(n)||0;return e.BBox=[0,0,Number(it(r)),Number(it(t))],e},vC=Yt.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},yC=Yt.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},_C=Yt.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},en=Yt.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return _C(n,e-1)},tn=Yt.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return vC(n,e-1)},nn=Yt.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return yC(n,e-1)},bC=Yt.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],s=n[1],a=n[2],o=n[3],c={};return c.lowerLeft_X=t(i)||0,c.lowerLeft_Y=r(s+o)||0,c.upperRight_X=t(i+a)||0,c.upperRight_Y=r(s)||0,[Number(it(c.lowerLeft_X)),Number(it(c.lowerLeft_Y)),Number(it(c.upperRight_X)),Number(it(c.upperRight_Y))]},wC=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=Wf(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+it(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Xr(n);return s.scope=n.scope,s.stream=e.join(`
`),s}},Wf=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(D){return D.split(`
`)}):i.map(function(D){return[D]});var s=t,a=Be.internal.getHeight(n)||0;a=a<0?-a:a;var o=Be.internal.getWidth(n)||0;o=o<0?-o:o;var c=function(D,O,G){if(D+1<i.length){var q=O+" "+i[D+1][0];return jc(q,n,G).width<=o-4}return!1};s++;e:for(;s>0;){e="",s--;var u,f,p=jc("3",n,s).height,v=n.multiline?a-s:(a-p)/2,g=v+=2,N=0,S=0,I=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+jc(e,n,s=12).width+", FieldWidth:"+o+`
`;break}for(var b="",A=0,P=0;P<i.length;P++)if(i.hasOwnProperty(P)){var R=!1;if(i[P].length!==1&&I!==i[P].length-1){if((p+2)*(A+2)+2>a)continue e;b+=i[P][I],R=!0,S=P,P--}else{b=(b+=i[P][I]+" ").substr(b.length-1)==" "?b.substr(0,b.length-1):b;var W=parseInt(P),ie=c(W,b,s),Q=P>=i.length-1;if(ie&&!Q){b+=" ",I=0;continue}if(ie||Q){if(Q)S=W;else if(n.multiline&&(p+2)*(A+2)+2>a)continue e}else{if(!n.multiline||(p+2)*(A+2)+2>a)continue e;S=W}}for(var V="",se=N;se<=S;se++){var me=i[se];if(n.multiline){if(se===S){V+=me[I]+" ",I=(I+1)%me.length;continue}if(se===N){V+=me[me.length-1]+" ";continue}}V+=me[0]+" "}switch(V=V.substr(V.length-1)==" "?V.substr(0,V.length-1):V,f=jc(V,n,s).width,n.textAlign){case"right":u=o-f-2;break;case"center":u=(o-f)/2;break;case"left":default:u=2}e+=it(u)+" "+it(g)+` Td
`,e+="("+ta(V)+`) Tj
`,e+=-it(u)+` 0 Td
`,g=-(s+2),f=0,N=R?S:S+1,A++,b=""}break}return r.text=e,r.fontSize=s,r},jc=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},xC={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},NC=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},SC=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,i=n[t];e.internal.newObjectDeferredBegin(i.objId,!0),wt(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete n[r]}},AC=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(jr.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(xC)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Qp=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new Ov,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&NC(s,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var s=!r;for(var a in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var o=r[a],c=[],u=o.Rect;if(o.Rect&&(o.Rect=bC(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Be.createDefaultAppearanceStream(o),wt(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(c=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var f=wC(o);c.push({key:"AP",value:"<</N "+f+">>"}),i.internal.acroformPlugin.xForms.push(f)}if(o.appearanceStreamContent){var p="";for(var v in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(v)){var g=o.appearanceStreamContent[v];if(p+="/"+v+" ",p+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var a in g)if(g.hasOwnProperty(a)){var N=g[a];typeof N=="function"&&(N=N.call(i,o)),p+="/"+a+" "+N+" ",i.internal.acroformPlugin.xForms.indexOf(N)>=0||i.internal.acroformPlugin.xForms.push(N)}}else typeof(N=g)=="function"&&(N=N.call(i,o)),p+="/"+a+" "+N,i.internal.acroformPlugin.xForms.indexOf(N)>=0||i.internal.acroformPlugin.xForms.push(N);p+=">>"}c.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:o.objId}),i.internal.out("endobj")}s&&SC(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},Pv=Yt.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(a){return a};if(Array.isArray(n)){for(var i="[",s=0;s<n.length;s++)switch(s!==0&&(i+=" "),wt(n[s])){case"boolean":case"number":case"object":i+=n[s].toString();break;case"string":n[s].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+ta(r(n[s].toString()))+")"):i+=n[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},xd=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+ta(r(n))+")"},Qr=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Qr.prototype.toString=function(){return this.objId+" 0 R"},Qr.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Qr.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:Pv(i,this.objId,this.scope)}):i instanceof Qr?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var Dv=function(){Qr.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Qn(Dv,Qr);var Ov=function(){Qr.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+ta(t(n))+")"}},set:function(t){n=t}})};Qn(Ov,Qr);var jr=function n(){Qr.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute F supplied.');e=b}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!en(e,3)},set:function(b){b?this.F=tn(e,3):this.F=nn(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute Ff supplied.');t=b}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(b){r=b!==void 0?b:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(b){r[0]=b}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(b){r[1]=b}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(b){r[2]=b}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(b){r[3]=b}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(b){switch(b){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=b;break;default:throw new Error('Invalid value "'+b+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Iu)return;s="FieldObject"+n.FieldNum++}var b=function(A){return A};return this.scope&&(b=this.scope.internal.getEncryptor(this.objId)),"("+ta(b(s))+")"},set:function(b){s=b.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(b){s=b}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(b){a=b}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(b){o=b}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(b){c=b}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/Qp:u},set:function(b){u=b}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(b){f=b}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof Iu||this instanceof Bs))return xd(p,this.objId,this.scope)},set:function(b){b=b.toString(),p=b}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof vn?v:xd(v,this.objId,this.scope)},set:function(b){b=b.toString(),v=this instanceof vn?b:b.substr(0,1)==="("?Pa(b.substr(1,b.length-2)):Pa(b)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof vn?Pa(v.substr(1,v.length-1)):v},set:function(b){b=b.toString(),v=this instanceof vn?"/"+b:b}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(b){this.V=b}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof vn?g:xd(g,this.objId,this.scope)},set:function(b){b=b.toString(),g=this instanceof vn?b:b.substr(0,1)==="("?Pa(b.substr(1,b.length-2)):Pa(b)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof vn?Pa(g.substr(1,g.length-1)):g},set:function(b){b=b.toString(),g=this instanceof vn?"/"+b:b}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var N,S=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return S},set:function(b){b=!!b,S=b}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(N)return N},set:function(b){N=b}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,1)},set:function(b){b?this.Ff=tn(this.Ff,1):this.Ff=nn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,2)},set:function(b){b?this.Ff=tn(this.Ff,2):this.Ff=nn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,3)},set:function(b){b?this.Ff=tn(this.Ff,3):this.Ff=nn(this.Ff,3)}});var I=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(I!==null)return I},set:function(b){if([0,1,2].indexOf(b)===-1)throw new Error('Invalid value "'+b+'" for attribute Q supplied.');I=b}}),Object.defineProperty(this,"textAlign",{get:function(){var b;switch(I){case 0:default:b="left";break;case 1:b="center";break;case 2:b="right"}return b},configurable:!0,enumerable:!0,set:function(b){switch(b){case"right":case 2:I=2;break;case"center":case 1:I=1;break;case"left":case 0:default:I=0}}})};Qn(jr,Qr);var $a=function(){jr.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Pv(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=function(s,a,o){o||(o=1);for(var c,u=[];c=a.exec(s);)u.push(c[o]);return u}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,18)},set:function(t){t?this.Ff=tn(this.Ff,18):this.Ff=nn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=tn(this.Ff,19):this.Ff=nn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,20)},set:function(t){t?(this.Ff=tn(this.Ff,20),e.sort()):this.Ff=nn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,22)},set:function(t){t?this.Ff=tn(this.Ff,22):this.Ff=nn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,23)},set:function(t){t?this.Ff=tn(this.Ff,23):this.Ff=nn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,27)},set:function(t){t?this.Ff=tn(this.Ff,27):this.Ff=nn(this.Ff,27)}}),this.hasAppearanceStream=!1};Qn($a,jr);var Ga=function(){$a.call(this),this.fontName="helvetica",this.combo=!1};Qn(Ga,$a);var Ya=function(){Ga.call(this),this.combo=!0};Qn(Ya,Ga);var Xc=function(){Ya.call(this),this.edit=!0};Qn(Xc,Ya);var vn=function(){jr.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,15)},set:function(t){t?this.Ff=tn(this.Ff,15):this.Ff=nn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,16)},set:function(t){t?this.Ff=tn(this.Ff,16):this.Ff=nn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,17)},set:function(t){t?this.Ff=tn(this.Ff,17):this.Ff=nn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,26)},set:function(t){t?this.Ff=tn(this.Ff,26):this.Ff=nn(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+ta(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){wt(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Qn(vn,jr);var Jc=function(){vn.call(this),this.pushButton=!0};Qn(Jc,vn);var Ka=function(){vn.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};Qn(Ka,vn);var Iu=function(){var n,e;jr.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),r)a.push("/"+s+" ("+ta(i(r[s]))+")");return a.push(">>"),a.join(`
`)},set:function(i){wt(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Be.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Qn(Iu,jr),Ka.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Ka.prototype.createOption=function(n){var e=new Iu;return e.Parent=this,e.optionName=n,this.Kids.push(e),kC.call(this.scope,e),e};var Qc=function(){vn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Be.CheckBox.createAppearanceStream()};Qn(Qc,vn);var Bs=function(){jr.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,13)},set:function(e){e?this.Ff=tn(this.Ff,13):this.Ff=nn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,21)},set:function(e){e?this.Ff=tn(this.Ff,21):this.Ff=nn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,23)},set:function(e){e?this.Ff=tn(this.Ff,23):this.Ff=nn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,24)},set:function(e){e?this.Ff=tn(this.Ff,24):this.Ff=nn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,25)},set:function(e){e?this.Ff=tn(this.Ff,25):this.Ff=nn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,26)},set:function(e){e?this.Ff=tn(this.Ff,26):this.Ff=nn(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Qn(Bs,jr);var Zc=function(){Bs.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,14)},set:function(n){n?this.Ff=tn(this.Ff,14):this.Ff=nn(this.Ff,14)}}),this.password=!0};Qn(Zc,Bs);var Be={CheckBox:{createAppearanceStream:function(){return{N:{On:Be.CheckBox.YesNormal},D:{On:Be.CheckBox.YesPushDown,Off:Be.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Xr(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),s=Wf(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+it(Be.internal.getWidth(n))+" "+it(Be.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+it(s.fontSize)+" Tf "+i),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Xr(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],s=Be.internal.getHeight(n),a=Be.internal.getWidth(n),o=Wf(n,n.caption);return i.push("1 g"),i.push("0 0 "+it(a)+" "+it(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+it(a-1)+" "+it(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+it(o.fontSize)+" Tf "+r),i.push(o.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=Xr(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+it(Be.internal.getWidth(n))+" "+it(Be.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:Be.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=Be.RadioButton.Circle.YesNormal,e.D[n]=Be.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Xr(n);e.scope=n.scope;var t=[],r=Be.internal.getWidth(n)<=Be.internal.getHeight(n)?Be.internal.getWidth(n)/4:Be.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Be.internal.Bezier_C,s=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Ki(Be.internal.getWidth(n)/2)+" "+Ki(Be.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Xr(n);e.scope=n.scope;var t=[],r=Be.internal.getWidth(n)<=Be.internal.getHeight(n)?Be.internal.getWidth(n)/4:Be.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Be.internal.Bezier_C).toFixed(5)),a=Number((r*Be.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ki(Be.internal.getWidth(n)/2)+" "+Ki(Be.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Ki(Be.internal.getWidth(n)/2)+" "+Ki(Be.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),t.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),t.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),t.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Xr(n);e.scope=n.scope;var t=[],r=Be.internal.getWidth(n)<=Be.internal.getHeight(n)?Be.internal.getWidth(n)/4:Be.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Be.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ki(Be.internal.getWidth(n)/2)+" "+Ki(Be.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:Be.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=Be.RadioButton.Cross.YesNormal,e.D[n]=Be.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Xr(n);e.scope=n.scope;var t=[],r=Be.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+it(Be.internal.getWidth(n)-2)+" "+it(Be.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(it(r.x1.x)+" "+it(r.x1.y)+" m"),t.push(it(r.x2.x)+" "+it(r.x2.y)+" l"),t.push(it(r.x4.x)+" "+it(r.x4.y)+" m"),t.push(it(r.x3.x)+" "+it(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Xr(n);e.scope=n.scope;var t=Be.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+it(Be.internal.getWidth(n))+" "+it(Be.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+it(Be.internal.getWidth(n)-2)+" "+it(Be.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(it(t.x1.x)+" "+it(t.x1.y)+" m"),r.push(it(t.x2.x)+" "+it(t.x2.y)+" l"),r.push(it(t.x4.x)+" "+it(t.x4.y)+" m"),r.push(it(t.x3.x)+" "+it(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=Xr(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+it(Be.internal.getWidth(n))+" "+it(Be.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};Be.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=Be.internal.getWidth(n),t=Be.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},Be.internal.getWidth=function(n){var e=0;return wt(n)==="object"&&(e=lg(n.Rect[2])),e},Be.internal.getHeight=function(n){var e=0;return wt(n)==="object"&&(e=lg(n.Rect[3])),e};var kC=Yt.addField=function(n){if(AC(this,n),!(n instanceof jr))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Yt.AcroFormChoiceField=$a,Yt.AcroFormListBox=Ga,Yt.AcroFormComboBox=Ya,Yt.AcroFormEditBox=Xc,Yt.AcroFormButton=vn,Yt.AcroFormPushButton=Jc,Yt.AcroFormRadioButton=Ka,Yt.AcroFormCheckBox=Qc,Yt.AcroFormTextField=Bs,Yt.AcroFormPasswordField=Zc,Yt.AcroFormAppearance=Be,Yt.AcroForm={ChoiceField:$a,ListBox:Ga,ComboBox:Ya,EditBox:Xc,Button:vn,PushButton:Jc,RadioButton:Ka,CheckBox:Qc,TextField:Bs,PasswordField:Zc,Appearance:Be},Ye.AcroForm={ChoiceField:$a,ListBox:Ga,ComboBox:Ya,EditBox:Xc,Button:vn,PushButton:Jc,RadioButton:Ka,CheckBox:Qc,TextField:Bs,PasswordField:Zc,Appearance:Be};function Mv(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(D,O){var G,q,ce,le,he,re=e;if((O=O||e)==="RGBA"||D.data!==void 0&&D.data instanceof Uint8ClampedArray&&"height"in D&&"width"in D)return"RGBA";if(ie(D))for(he in t)for(ce=t[he],G=0;G<ce.length;G+=1){for(le=!0,q=0;q<ce[G].length;q+=1)if(ce[G][q]!==void 0&&ce[G][q]!==D[q]){le=!1;break}if(le===!0){re=he;break}}else for(he in t)for(ce=t[he],G=0;G<ce.length;G+=1){for(le=!0,q=0;q<ce[G].length;q+=1)if(ce[G][q]!==void 0&&ce[G][q]!==D.charCodeAt(q)){le=!1;break}if(le===!0){re=he;break}}return re===e&&O!==e&&(re=O),re},i=function D(O){for(var G=this.internal.write,q=this.internal.putStream,ce=(0,this.internal.getFilters)();ce.indexOf("FlateEncode")!==-1;)ce.splice(ce.indexOf("FlateEncode"),1);O.objectId=this.internal.newObject();var le=[];if(le.push({key:"Type",value:"/XObject"}),le.push({key:"Subtype",value:"/Image"}),le.push({key:"Width",value:O.width}),le.push({key:"Height",value:O.height}),O.colorSpace===I.INDEXED?le.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(O.palette.length/3-1)+" "+("sMask"in O&&O.sMask!==void 0?O.objectId+2:O.objectId+1)+" 0 R]"}):(le.push({key:"ColorSpace",value:"/"+O.colorSpace}),O.colorSpace===I.DEVICE_CMYK&&le.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),le.push({key:"BitsPerComponent",value:O.bitsPerComponent}),"decodeParameters"in O&&O.decodeParameters!==void 0&&le.push({key:"DecodeParms",value:"<<"+O.decodeParameters+">>"}),"transparency"in O&&Array.isArray(O.transparency)){for(var he="",re=0,de=O.transparency.length;re<de;re++)he+=O.transparency[re]+" "+O.transparency[re]+" ";le.push({key:"Mask",value:"["+he+"]"})}O.sMask!==void 0&&le.push({key:"SMask",value:O.objectId+1+" 0 R"});var ge=O.filter!==void 0?["/"+O.filter]:void 0;if(q({data:O.data,additionalKeyValues:le,alreadyAppliedFilters:ge,objectId:O.objectId}),G("endobj"),"sMask"in O&&O.sMask!==void 0){var Te="/Predictor "+O.predictor+" /Colors 1 /BitsPerComponent "+O.bitsPerComponent+" /Columns "+O.width,C={width:O.width,height:O.height,colorSpace:"DeviceGray",bitsPerComponent:O.bitsPerComponent,decodeParameters:Te,data:O.sMask};"filter"in O&&(C.filter=O.filter),D.call(this,C)}if(O.colorSpace===I.INDEXED){var F=this.internal.newObject();q({data:V(new Uint8Array(O.palette)),objectId:F}),G("endobj")}},s=function(){var D=this.internal.collections.addImage_images;for(var O in D)i.call(this,D[O])},a=function(){var D,O=this.internal.collections.addImage_images,G=this.internal.write;for(var q in O)G("/I"+(D=O[q]).index,D.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},c=function(){var D=this.internal.collections.addImage_images;return o.call(this),D},u=function(){return Object.keys(this.internal.collections.addImage_images).length},f=function(D){return typeof n["process"+D.toUpperCase()]=="function"},p=function(D){return wt(D)==="object"&&D.nodeType===1},v=function(D,O){if(D.nodeName==="IMG"&&D.hasAttribute("src")){var G=""+D.getAttribute("src");if(G.indexOf("data:image/")===0)return ol(unescape(G).split("base64,").pop());var q=n.loadFile(G,!0);if(q!==void 0)return q}if(D.nodeName==="CANVAS"){if(D.width===0||D.height===0)throw new Error("Given canvas must have data. Canvas width: "+D.width+", height: "+D.height);var ce;switch(O){case"PNG":ce="image/png";break;case"WEBP":ce="image/webp";break;case"JPEG":case"JPG":default:ce="image/jpeg"}return ol(D.toDataURL(ce,1).split("base64,").pop())}},g=function(D){var O=this.internal.collections.addImage_images;if(O){for(var G in O)if(D===O[G].alias)return O[G]}},N=function(D,O,G){return D||O||(D=-96,O=-96),D<0&&(D=-1*G.width*72/D/this.internal.scaleFactor),O<0&&(O=-1*G.height*72/O/this.internal.scaleFactor),D===0&&(D=O*G.width/G.height),O===0&&(O=D*G.height/G.width),[D,O]},S=function(D,O,G,q,ce,le){var he=N.call(this,G,q,ce),re=this.internal.getCoordinateString,de=this.internal.getVerticalCoordinateString,ge=c.call(this);if(G=he[0],q=he[1],ge[ce.index]=ce,le){le*=Math.PI/180;var Te=Math.cos(le),C=Math.sin(le),F=function(H){return H.toFixed(4)},U=[F(Te),F(C),F(-1*C),F(Te),0,0,"cm"]}this.internal.write("q"),le?(this.internal.write([1,"0","0",1,re(D),de(O+q),"cm"].join(" ")),this.internal.write(U.join(" ")),this.internal.write([re(G),"0","0",re(q),"0","0","cm"].join(" "))):this.internal.write([re(G),"0","0",re(q),re(D),de(O+q),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ce.index+" Do"),this.internal.write("Q")},I=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},A=n.__addimage__.sHashCode=function(D){var O,G,q=0;if(typeof D=="string")for(G=D.length,O=0;O<G;O++)q=(q<<5)-q+D.charCodeAt(O),q|=0;else if(ie(D))for(G=D.byteLength/2,O=0;O<G;O++)q=(q<<5)-q+D[O],q|=0;return q},P=n.__addimage__.validateStringAsBase64=function(D){(D=D||"").toString().trim();var O=!0;return D.length===0&&(O=!1),D.length%4!=0&&(O=!1),/^[A-Za-z0-9+/]+$/.test(D.substr(0,D.length-2))===!1&&(O=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(D.substr(-2))===!1&&(O=!1),O},R=n.__addimage__.extractImageFromDataUrl=function(D){var O=(D=D||"").split("base64,"),G=null;if(O.length===2){var q=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(O[0]);Array.isArray(q)&&(G={mimeType:q[1],charset:q[2],data:O[1]})}return G},W=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(D){return W()&&D instanceof ArrayBuffer};var ie=n.__addimage__.isArrayBufferView=function(D){return W()&&typeof Uint32Array<"u"&&(D instanceof Int8Array||D instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&D instanceof Uint8ClampedArray||D instanceof Int16Array||D instanceof Uint16Array||D instanceof Int32Array||D instanceof Uint32Array||D instanceof Float32Array||D instanceof Float64Array)},Q=n.__addimage__.binaryStringToUint8Array=function(D){for(var O=D.length,G=new Uint8Array(O),q=0;q<O;q++)G[q]=D.charCodeAt(q);return G},V=n.__addimage__.arrayBufferToBinaryString=function(D){for(var O="",G=ie(D)?D:new Uint8Array(D),q=0;q<G.length;q+=8192)O+=String.fromCharCode.apply(null,G.subarray(q,q+8192));return O};n.addImage=function(){var D,O,G,q,ce,le,he,re,de;if(typeof arguments[1]=="number"?(O=e,G=arguments[1],q=arguments[2],ce=arguments[3],le=arguments[4],he=arguments[5],re=arguments[6],de=arguments[7]):(O=arguments[1],G=arguments[2],q=arguments[3],ce=arguments[4],le=arguments[5],he=arguments[6],re=arguments[7],de=arguments[8]),wt(D=arguments[0])==="object"&&!p(D)&&"imageData"in D){var ge=D;D=ge.imageData,O=ge.format||O||e,G=ge.x||G||0,q=ge.y||q||0,ce=ge.w||ge.width||ce,le=ge.h||ge.height||le,he=ge.alias||he,re=ge.compression||re,de=ge.rotation||ge.angle||de}var Te=this.internal.getFilters();if(re===void 0&&Te.indexOf("FlateEncode")!==-1&&(re="SLOW"),isNaN(G)||isNaN(q))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var C=se.call(this,D,O,he,re);return S.call(this,G,q,ce,le,C,de),this};var se=function(D,O,G,q){var ce,le,he;if(typeof D=="string"&&r(D)===e){D=unescape(D);var re=me(D,!1);(re!==""||(re=n.loadFile(D,!0))!==void 0)&&(D=re)}if(p(D)&&(D=v(D,O)),O=r(D,O),!f(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(((he=G)==null||he.length===0)&&(G=function(de){return typeof de=="string"||ie(de)?A(de):ie(de.data)?A(de.data):null}(D)),(ce=g.call(this,G))||(W()&&(D instanceof Uint8Array||O==="RGBA"||(le=D,D=Q(D))),ce=this["process"+O.toUpperCase()](D,u.call(this),G,function(de){return de&&typeof de=="string"&&(de=de.toUpperCase()),de in n.image_compression?de:b.NONE}(q),le)),!ce)throw new Error("An unknown error occurred whilst processing the image.");return ce},me=n.__addimage__.convertBase64ToBinaryString=function(D,O){var G;O=typeof O!="boolean"||O;var q,ce="";if(typeof D=="string"){q=(G=R(D))!==null?G.data:D;try{ce=ol(q)}catch(le){if(O)throw P(q)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+le.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ce};n.getImageProperties=function(D){var O,G,q="";if(p(D)&&(D=v(D)),typeof D=="string"&&r(D)===e&&((q=me(D,!1))===""&&(q=n.loadFile(D)||""),D=q),G=r(D),!f(G))throw new Error("addImage does not support files of type '"+G+"', please ensure that a plugin for '"+G+"' support is added.");if(!W()||D instanceof Uint8Array||(D=Q(D)),!(O=this["process"+G.toUpperCase()](D)))throw new Error("An unknown error occurred whilst processing the image");return O.fileType=G,O}})(Ye.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Ye.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,s,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(t.objId),u=t.pageContext.annotations,f=!1,p=0;p<u.length&&!f;p++)switch((r=u[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var v=0;v<u.length;v++){r=u[v];var g=this.internal.pdfEscape,N=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var S=this.internal.newAdditionalObject(),I=this.internal.newAdditionalObject(),b=this.internal.getEncryptor(S.objId),A=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(r.bounds.x)+" "+o(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y)+"] ")+"/Contents ("+g(b(r.contents))+")",s+=" /Popup "+I.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+g(b(A))+") >>",S.content=s;var P=S.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(r.bounds.x+30)+" "+o(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+o(r.bounds.y)+"] ")+" /Parent "+P,r.open&&(s+=" /Open true"),s+=" >>",I.content=s,this.internal.write(S.objId,"0 R",I.objId,"0 R");break;case"freetext":i="/Rect ["+a(r.bounds.x)+" "+o(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y+r.bounds.h)+"] ";var R=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+g(N(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+R+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var W=this.annotations._nameMap[r.options.name];r.options.pageNumber=W.page,r.options.top=W.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+g(N(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var ie=o(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+ie+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,s,a){var o=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:c(t),y:u(r),w:c(t+i),h:u(r+s)},options:a,type:"link"})},n.textWithLink=function(t,r,i,s){var a,o,c=this.getTextWidth(t),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var f=this.splitTextToSize(t,o).length;a=Math.ceil(u*f)}else o=c,a=u;return this.text(t,r,i,s),i+=.2*u,s.align==="center"&&(r-=c/2),s.align==="right"&&(r-=c),this.link(r,i-u,o,a,s),c},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(Ye.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(S){return e[S.charCodeAt(0)]!==void 0},a=n.__arabicParser__.isArabicLetter=function(S){return typeof S=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(S)},o=n.__arabicParser__.isArabicEndLetter=function(S){return a(S)&&s(S)&&e[S.charCodeAt(0)].length<=2},c=n.__arabicParser__.isArabicAlfLetter=function(S){return a(S)&&i.indexOf(S.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(S){return a(S)&&s(S)&&e[S.charCodeAt(0)].length>=1};var u=n.__arabicParser__.arabicLetterHasFinalForm=function(S){return a(S)&&s(S)&&e[S.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(S){return a(S)&&s(S)&&e[S.charCodeAt(0)].length>=3};var f=n.__arabicParser__.arabicLetterHasMedialForm=function(S){return a(S)&&s(S)&&e[S.charCodeAt(0)].length==4},p=n.__arabicParser__.resolveLigatures=function(S){var I=0,b=t,A="",P=0;for(I=0;I<S.length;I+=1)b[S.charCodeAt(I)]!==void 0?(P++,typeof(b=b[S.charCodeAt(I)])=="number"&&(A+=String.fromCharCode(b),b=t,P=0),I===S.length-1&&(b=t,A+=S.charAt(I-(P-1)),I-=P-1,P=0)):(b=t,A+=S.charAt(I-P),I-=P,P=0);return A};n.__arabicParser__.isArabicDiacritic=function(S){return S!==void 0&&r[S.charCodeAt(0)]!==void 0};var v=n.__arabicParser__.getCorrectForm=function(S,I,b){return a(S)?s(S)===!1?-1:!u(S)||!a(I)&&!a(b)||!a(b)&&o(I)||o(S)&&!a(I)||o(S)&&c(I)||o(S)&&o(I)?0:f(S)&&a(I)&&!o(I)&&a(b)&&u(b)?3:o(S)||!a(b)?1:2:-1},g=function(S){var I=0,b=0,A=0,P="",R="",W="",ie=(S=S||"").split("\\s+"),Q=[];for(I=0;I<ie.length;I+=1){for(Q.push(""),b=0;b<ie[I].length;b+=1)P=ie[I][b],R=ie[I][b-1],W=ie[I][b+1],a(P)?(A=v(P,R,W),Q[I]+=A!==-1?String.fromCharCode(e[P.charCodeAt(0)][A]):P):Q[I]+=P;Q[I]=p(Q[I])}return Q.join(" ")},N=n.__arabicParser__.processArabic=n.processArabic=function(){var S,I=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,b=[];if(Array.isArray(I)){var A=0;for(b=[],A=0;A<I.length;A+=1)Array.isArray(I[A])?b.push([g(I[A][0]),I[A][1],I[A][2]]):b.push([g(I[A])]);S=b}else S=g(I);return typeof arguments[0]=="string"?S:(arguments[0].text=S,arguments[0])};n.events.push(["preProcessText",N])}(Ye.API),Ye.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(o){t=o}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Ye.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(S){c=S}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(S){u=S}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(S){f=S}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(S){p=S}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(S){v=S}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(S){g=S}});var N=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return N},set:function(S){N=S}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},n.getTextDimensions=function(c,u){r.call(this);var f=(u=u||{}).fontSize||this.getFontSize(),p=u.font||this.getFont(),v=u.scaleFactor||this.internal.scaleFactor,g=0,N=0,S=0,I=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var b=u.maxWidth;b>0?typeof c=="string"?c=this.splitTextToSize(c,b):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(P,R){return P.concat(I.splitTextToSize(R,b))},[])):c=Array.isArray(c)?c:[c];for(var A=0;A<c.length;A++)g<(S=this.getStringUnitWidth(c[A],{font:p})*f)&&(g=S);return g!==0&&(N=c.length),{w:g/=v,h:Math.max((N*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/v,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=n.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,v=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=p.top,g&&v&&(this.printHeaderRow(c.lineNumber,!0),c.y+=v[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,t===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-f,c.y+f,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+f,{align:"center",baseline:"top",maxWidth:c.width-f-f}):this.text(c.text,c.x+f,c.y+f,{align:"left",baseline:"top",maxWidth:c.width-f-f})),this.internal.__cell__.lastCell=c,this};n.table=function(c,u,f,p,v){if(r.call(this),!f)throw new Error("No data for PDF table.");var g,N,S,I,b=[],A=[],P=[],R={},W={},ie=[],Q=[],V=(v=v||{}).autoSize||!1,se=v.printHeaders!==!1,me=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,D=v.margins||Object.assign({width:this.getPageWidth()},e),O=typeof v.padding=="number"?v.padding:3,G=v.headerBackgroundColor||"#c8c8c8",q=v.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=se,this.internal.__cell__.margins=D,this.internal.__cell__.table_font_size=me,this.internal.__cell__.padding=O,this.internal.__cell__.headerBackgroundColor=G,this.internal.__cell__.headerTextColor=q,this.setFontSize(me),p==null)A=b=Object.keys(f[0]),P=b.map(function(){return"left"});else if(Array.isArray(p)&&wt(p[0])==="object")for(b=p.map(function(ge){return ge.name}),A=p.map(function(ge){return ge.prompt||ge.name||""}),P=p.map(function(ge){return ge.align||"left"}),g=0;g<p.length;g+=1)W[p[g].name]=p[g].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(A=b=p,P=b.map(function(){return"left"}));if(V||Array.isArray(p)&&typeof p[0]=="string")for(g=0;g<b.length;g+=1){for(R[I=b[g]]=f.map(function(ge){return ge[I]}),this.setFont(void 0,"bold"),ie.push(this.getTextDimensions(A[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),N=R[I],this.setFont(void 0,"normal"),S=0;S<N.length;S+=1)ie.push(this.getTextDimensions(N[S],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);W[I]=Math.max.apply(null,ie)+O+O,ie=[]}if(se){var ce={};for(g=0;g<b.length;g+=1)ce[b[g]]={},ce[b[g]].text=A[g],ce[b[g]].align=P[g];var le=o.call(this,ce,W);Q=b.map(function(ge){return new s(c,u,W[ge],le,ce[ge].text,void 0,ce[ge].align)}),this.setTableHeaderRow(Q),this.printHeaderRow(1,!1)}var he=p.reduce(function(ge,Te){return ge[Te.name]=Te.align,ge},{});for(g=0;g<f.length;g+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:g,data:f[g]},this);var re=o.call(this,f[g],W);for(S=0;S<b.length;S+=1){var de=f[g][b[S]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:g,col:S,data:de},this),a.call(this,new s(c,u,W[b[S]],re,de,g+2,he[b[S]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var o=function(c,u){var f=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(c).map(function(g){var N=c[g];return this.splitTextToSize(N.hasOwnProperty("text")?N.text:N,u[g]-f-f)},this).map(function(g){return this.getLineHeightFactor()*g.length*p/v+f+f},this).reduce(function(g,N){return Math.max(g,N)},0)};n.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},n.printHeaderRow=function(c,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){f=this.internal.__cell__.tableHeaderRow[g].clone(),u&&(f.y=this.internal.__cell__.margins.top||0,v.push(f)),f.lineNumber=c;var N=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,f),this.setTextColor(N)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),t=!1}}(Ye.API);var Rv={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Fv=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],zf=Mv(Fv),jv=[100,200,300,400,500,600,700,800,900],CC=Mv(jv);function Hf(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(s){return Rv[s=s||"normal"]?s:"normal"}(n.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(n.weight),i=function(s){return typeof zf[s=s||"normal"]=="number"?s:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function cg(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var EC={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},ug={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function hg(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function IC(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},EC,t.genericFontFamilies||{}),s=null,a=null,o=0;o<e.length;++o)if(i[(s=Hf(e[o])).family]&&(s.family=i[s.family]),n.hasOwnProperty(s.family)){a=n[s.family];break}if(!(a=a||n[r]))throw new Error("Could not find a font-family for the rule '"+hg(s)+"' and default family '"+r+"'.");if(a=function(c,u){if(u[c])return u[c];var f=zf[c],p=f<=zf.normal?-1:1,v=cg(u,Fv,f,p);if(!v)throw new Error("Could not find a matching font-stretch value for "+c);return v}(s.stretch,a),a=function(c,u){if(u[c])return u[c];for(var f=Rv[c],p=0;p<f.length;++p)if(u[f[p]])return u[f[p]];throw new Error("Could not find a matching font-style for "+c)}(s.style,a),!(a=function(c,u){if(u[c])return u[c];if(c===400&&u[500])return u[500];if(c===500&&u[400])return u[400];var f=CC[c],p=cg(u,jv,f,c<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+c);return p}(s.weight,a)))throw new Error("Failed to resolve a font for the rule '"+hg(s)+"'.");return a}function dg(n){return n.trimLeft()}function TC(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function LC(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var Bc,fg,pg,Nd=["times"];(function(n){var e,t,r,i,s,a,o,c,u,f=function(C){return C=C||{},this.isStrokeTransparent=C.isStrokeTransparent||!1,this.strokeOpacity=C.strokeOpacity||1,this.strokeStyle=C.strokeStyle||"#000000",this.fillStyle=C.fillStyle||"#000000",this.isFillTransparent=C.isFillTransparent||!1,this.fillOpacity=C.fillOpacity||1,this.font=C.font||"10px sans-serif",this.textBaseline=C.textBaseline||"alphabetic",this.textAlign=C.textAlign||"left",this.lineWidth=C.lineWidth||1,this.lineJoin=C.lineJoin||"miter",this.lineCap=C.lineCap||"butt",this.path=C.path||[],this.transform=C.transform!==void 0?C.transform.clone():new c,this.globalCompositeOperation=C.globalCompositeOperation||"normal",this.globalAlpha=C.globalAlpha||1,this.clip_path=C.clip_path||[],this.currentPoint=C.currentPoint||new a,this.miterLimit=C.miterLimit||10,this.lastPoint=C.lastPoint||new a,this.lineDashOffset=C.lineDashOffset||0,this.lineDash=C.lineDash||[],this.margin=C.margin||[0,0,0,0],this.prevPageLastElemOffset=C.prevPageLastElemOffset||0,this.ignoreClearRect=typeof C.ignoreClearRect!="boolean"||C.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,c=this.internal.Matrix,u=new f}]);var p=function(C){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var F=C;Object.defineProperty(this,"pdf",{get:function(){return F}});var U=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return U},set:function(pe){U=!!pe}});var H=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return H},set:function(pe){H=!!pe}});var X=0;Object.defineProperty(this,"posX",{get:function(){return X},set:function(pe){isNaN(pe)||(X=pe)}});var ne=0;Object.defineProperty(this,"posY",{get:function(){return ne},set:function(pe){isNaN(pe)||(ne=pe)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(pe){var B;typeof pe=="number"?B=[pe,pe,pe,pe]:((B=new Array(4))[0]=pe[0],B[1]=pe.length>=2?pe[1]:B[0],B[2]=pe.length>=3?pe[2]:B[0],B[3]=pe.length>=4?pe[3]:B[1]),u.margin=B}});var ae=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ae},set:function(pe){ae=pe}});var oe=0;Object.defineProperty(this,"lastBreak",{get:function(){return oe},set:function(pe){oe=pe}});var Se=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Se},set:function(pe){Se=pe}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(pe){pe instanceof f&&(u=pe)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(pe){u.path=pe}});var xe=[];Object.defineProperty(this,"ctxStack",{get:function(){return xe},set:function(pe){xe=pe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(pe){var B;B=v(pe),this.ctx.fillStyle=B.style,this.ctx.isFillTransparent=B.a===0,this.ctx.fillOpacity=B.a,this.pdf.setFillColor(B.r,B.g,B.b,{a:B.a}),this.pdf.setTextColor(B.r,B.g,B.b,{a:B.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(pe){var B=v(pe);this.ctx.strokeStyle=B.style,this.ctx.isStrokeTransparent=B.a===0,this.ctx.strokeOpacity=B.a,B.a===0?this.pdf.setDrawColor(255,255,255):(B.a,this.pdf.setDrawColor(B.r,B.g,B.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(pe){["butt","round","square"].indexOf(pe)!==-1&&(this.ctx.lineCap=pe,this.pdf.setLineCap(pe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(pe){isNaN(pe)||(this.ctx.lineWidth=pe,this.pdf.setLineWidth(pe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(pe){["bevel","round","miter"].indexOf(pe)!==-1&&(this.ctx.lineJoin=pe,this.pdf.setLineJoin(pe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(pe){isNaN(pe)||(this.ctx.miterLimit=pe,this.pdf.setMiterLimit(pe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(pe){this.ctx.textBaseline=pe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(pe){["right","end","center","left","start"].indexOf(pe)!==-1&&(this.ctx.textAlign=pe)}});var Le=null;function Ie(pe,B){if(Le===null){var ze=function(je){var Ne=[];return Object.keys(je).forEach(function(Ce){je[Ce].forEach(function(Oe){var De=null;switch(Oe){case"bold":De={family:Ce,weight:"bold"};break;case"italic":De={family:Ce,style:"italic"};break;case"bolditalic":De={family:Ce,weight:"bold",style:"italic"};break;case"":case"normal":De={family:Ce}}De!==null&&(De.ref={name:Ce,style:Oe},Ne.push(De))})}),Ne}(pe.getFontList());Le=function(je){for(var Ne={},Ce=0;Ce<je.length;++Ce){var Oe=Hf(je[Ce]),De=Oe.family,Ve=Oe.stretch,tt=Oe.style,ot=Oe.weight;Ne[De]=Ne[De]||{},Ne[De][Ve]=Ne[De][Ve]||{},Ne[De][Ve][tt]=Ne[De][Ve][tt]||{},Ne[De][Ve][tt][ot]=Oe}return Ne}(ze.concat(B))}return Le}var $e=null;Object.defineProperty(this,"fontFaces",{get:function(){return $e},set:function(pe){Le=null,$e=pe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(pe){var B;if(this.ctx.font=pe,(B=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(pe))!==null){var ze=B[1],je=(B[2],B[3]),Ne=B[4],Ce=(B[5],B[6]),Oe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ne)[2];Ne=Math.floor(Oe==="px"?parseFloat(Ne)*this.pdf.internal.scaleFactor:Oe==="em"?parseFloat(Ne)*this.pdf.getFontSize():parseFloat(Ne)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ne);var De=function(Qe){var ht,Me,Nn=[],yt=Qe.trim();if(yt==="")return Nd;if(yt in ug)return[ug[yt]];for(;yt!=="";){switch(Me=null,ht=(yt=dg(yt)).charAt(0)){case'"':case"'":Me=TC(yt.substring(1),ht);break;default:Me=LC(yt)}if(Me===null||(Nn.push(Me[0]),(yt=dg(Me[1]))!==""&&yt.charAt(0)!==","))return Nd;yt=yt.replace(/^,/,"")}return Nn}(Ce);if(this.fontFaces){var Ve=IC(Ie(this.pdf,this.fontFaces),De.map(function(Qe){return{family:Qe,stretch:"normal",weight:je,style:ze}}));this.pdf.setFont(Ve.ref.name,Ve.ref.style)}else{var tt="";(je==="bold"||parseInt(je,10)>=700||ze==="bold")&&(tt="bold"),ze==="italic"&&(tt+="italic"),tt.length===0&&(tt="normal");for(var ot="",ct={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},gt=0;gt<De.length;gt++){if(this.pdf.internal.getFont(De[gt],tt,{noFallback:!0,disableWarning:!0})!==void 0){ot=De[gt];break}if(tt==="bolditalic"&&this.pdf.internal.getFont(De[gt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ot=De[gt],tt="bold";else if(this.pdf.internal.getFont(De[gt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ot=De[gt],tt="normal";break}}if(ot===""){for(var Et=0;Et<De.length;Et++)if(ct[De[Et]]){ot=ct[De[Et]];break}}ot=ot===""?"Times":ot,this.pdf.setFont(ot,tt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(pe){this.ctx.globalCompositeOperation=pe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(pe){this.ctx.globalAlpha=pe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(pe){this.ctx.lineDashOffset=pe,Te.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(pe){this.ctx.lineDash=pe,Te.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(pe){this.ctx.ignoreClearRect=!!pe}})};p.prototype.setLineDash=function(C){this.lineDash=C},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){R.call(this,"fill",!1)},p.prototype.stroke=function(){R.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(C,F){if(isNaN(C)||isNaN(F))throw Mt.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var U=this.ctx.transform.applyToPoint(new a(C,F));this.path.push({type:"mt",x:U.x,y:U.y}),this.ctx.lastPoint=new a(C,F)},p.prototype.closePath=function(){var C=new a(0,0),F=0;for(F=this.path.length-1;F!==-1;F--)if(this.path[F].type==="begin"&&wt(this.path[F+1])==="object"&&typeof this.path[F+1].x=="number"){C=new a(this.path[F+1].x,this.path[F+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(C.x,C.y)},p.prototype.lineTo=function(C,F){if(isNaN(C)||isNaN(F))throw Mt.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var U=this.ctx.transform.applyToPoint(new a(C,F));this.path.push({type:"lt",x:U.x,y:U.y}),this.ctx.lastPoint=new a(U.x,U.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),R.call(this,null,!0)},p.prototype.quadraticCurveTo=function(C,F,U,H){if(isNaN(U)||isNaN(H)||isNaN(C)||isNaN(F))throw Mt.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var X=this.ctx.transform.applyToPoint(new a(U,H)),ne=this.ctx.transform.applyToPoint(new a(C,F));this.path.push({type:"qct",x1:ne.x,y1:ne.y,x:X.x,y:X.y}),this.ctx.lastPoint=new a(X.x,X.y)},p.prototype.bezierCurveTo=function(C,F,U,H,X,ne){if(isNaN(X)||isNaN(ne)||isNaN(C)||isNaN(F)||isNaN(U)||isNaN(H))throw Mt.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ae=this.ctx.transform.applyToPoint(new a(X,ne)),oe=this.ctx.transform.applyToPoint(new a(C,F)),Se=this.ctx.transform.applyToPoint(new a(U,H));this.path.push({type:"bct",x1:oe.x,y1:oe.y,x2:Se.x,y2:Se.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new a(ae.x,ae.y)},p.prototype.arc=function(C,F,U,H,X,ne){if(isNaN(C)||isNaN(F)||isNaN(U)||isNaN(H)||isNaN(X))throw Mt.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ne=!!ne,!this.ctx.transform.isIdentity){var ae=this.ctx.transform.applyToPoint(new a(C,F));C=ae.x,F=ae.y;var oe=this.ctx.transform.applyToPoint(new a(0,U)),Se=this.ctx.transform.applyToPoint(new a(0,0));U=Math.sqrt(Math.pow(oe.x-Se.x,2)+Math.pow(oe.y-Se.y,2))}Math.abs(X-H)>=2*Math.PI&&(H=0,X=2*Math.PI),this.path.push({type:"arc",x:C,y:F,radius:U,startAngle:H,endAngle:X,counterclockwise:ne})},p.prototype.arcTo=function(C,F,U,H,X){throw new Error("arcTo not implemented.")},p.prototype.rect=function(C,F,U,H){if(isNaN(C)||isNaN(F)||isNaN(U)||isNaN(H))throw Mt.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(C,F),this.lineTo(C+U,F),this.lineTo(C+U,F+H),this.lineTo(C,F+H),this.lineTo(C,F),this.lineTo(C+U,F),this.lineTo(C,F)},p.prototype.fillRect=function(C,F,U,H){if(isNaN(C)||isNaN(F)||isNaN(U)||isNaN(H))throw Mt.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var X={};this.lineCap!=="butt"&&(X.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(X.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(C,F,U,H),this.fill(),X.hasOwnProperty("lineCap")&&(this.lineCap=X.lineCap),X.hasOwnProperty("lineJoin")&&(this.lineJoin=X.lineJoin)}},p.prototype.strokeRect=function(C,F,U,H){if(isNaN(C)||isNaN(F)||isNaN(U)||isNaN(H))throw Mt.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");N.call(this)||(this.beginPath(),this.rect(C,F,U,H),this.stroke())},p.prototype.clearRect=function(C,F,U,H){if(isNaN(C)||isNaN(F)||isNaN(U)||isNaN(H))throw Mt.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(C,F,U,H))},p.prototype.save=function(C){C=typeof C!="boolean"||C;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,U=0;U<this.pdf.internal.getNumberOfPages();U++)this.pdf.setPage(U+1),this.pdf.internal.out("q");if(this.pdf.setPage(F),C){this.ctx.fontSize=this.pdf.internal.getFontSize();var H=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=H}},p.prototype.restore=function(C){C=typeof C!="boolean"||C;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,U=0;U<this.pdf.internal.getNumberOfPages();U++)this.pdf.setPage(U+1),this.pdf.internal.out("Q");this.pdf.setPage(F),C&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(C){var F,U,H,X;if(C.isCanvasGradient===!0&&(C=C.getColor()),!C)return{r:0,g:0,b:0,a:0,style:C};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(C))F=0,U=0,H=0,X=0;else{var ne=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(C);if(ne!==null)F=parseInt(ne[1]),U=parseInt(ne[2]),H=parseInt(ne[3]),X=1;else if((ne=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(C))!==null)F=parseInt(ne[1]),U=parseInt(ne[2]),H=parseInt(ne[3]),X=parseFloat(ne[4]);else{if(X=1,typeof C=="string"&&C.charAt(0)!=="#"){var ae=new Iv(C);C=ae.ok?ae.toHex():"#000000"}C.length===4?(F=C.substring(1,2),F+=F,U=C.substring(2,3),U+=U,H=C.substring(3,4),H+=H):(F=C.substring(1,3),U=C.substring(3,5),H=C.substring(5,7)),F=parseInt(F,16),U=parseInt(U,16),H=parseInt(H,16)}}return{r:F,g:U,b:H,a:X,style:C}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},N=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(C,F,U,H){if(isNaN(F)||isNaN(U)||typeof C!="string")throw Mt.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(H=isNaN(H)?void 0:H,!g.call(this)){var X=re(this.ctx.transform.rotation),ne=this.ctx.transform.scaleX;O.call(this,{text:C,x:F,y:U,scale:ne,angle:X,align:this.textAlign,maxWidth:H})}},p.prototype.strokeText=function(C,F,U,H){if(isNaN(F)||isNaN(U)||typeof C!="string")throw Mt.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!N.call(this)){H=isNaN(H)?void 0:H;var X=re(this.ctx.transform.rotation),ne=this.ctx.transform.scaleX;O.call(this,{text:C,x:F,y:U,scale:ne,renderingMode:"stroke",angle:X,align:this.textAlign,maxWidth:H})}},p.prototype.measureText=function(C){if(typeof C!="string")throw Mt.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var F=this.pdf,U=this.pdf.internal.scaleFactor,H=F.internal.getFontSize(),X=F.getStringUnitWidth(C)*H/F.internal.scaleFactor,ne=function(ae){var oe=(ae=ae||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return oe}}),this};return new ne({width:X*=Math.round(96*U/72*1e4)/1e4})},p.prototype.scale=function(C,F){if(isNaN(C)||isNaN(F))throw Mt.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var U=new c(C,0,0,F,0,0);this.ctx.transform=this.ctx.transform.multiply(U)},p.prototype.rotate=function(C){if(isNaN(C))throw Mt.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var F=new c(Math.cos(C),Math.sin(C),-Math.sin(C),Math.cos(C),0,0);this.ctx.transform=this.ctx.transform.multiply(F)},p.prototype.translate=function(C,F){if(isNaN(C)||isNaN(F))throw Mt.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var U=new c(1,0,0,1,C,F);this.ctx.transform=this.ctx.transform.multiply(U)},p.prototype.transform=function(C,F,U,H,X,ne){if(isNaN(C)||isNaN(F)||isNaN(U)||isNaN(H)||isNaN(X)||isNaN(ne))throw Mt.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ae=new c(C,F,U,H,X,ne);this.ctx.transform=this.ctx.transform.multiply(ae)},p.prototype.setTransform=function(C,F,U,H,X,ne){C=isNaN(C)?1:C,F=isNaN(F)?0:F,U=isNaN(U)?0:U,H=isNaN(H)?1:H,X=isNaN(X)?0:X,ne=isNaN(ne)?0:ne,this.ctx.transform=new c(C,F,U,H,X,ne)};var S=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(C,F,U,H,X,ne,ae,oe,Se){var xe=this.pdf.getImageProperties(C),Le=1,Ie=1,$e=1,pe=1;H!==void 0&&oe!==void 0&&($e=oe/H,pe=Se/X,Le=xe.width/H*oe/H,Ie=xe.height/X*Se/X),ne===void 0&&(ne=F,ae=U,F=0,U=0),H!==void 0&&oe===void 0&&(oe=H,Se=X),H===void 0&&oe===void 0&&(oe=xe.width,Se=xe.height);for(var B,ze=this.ctx.transform.decompose(),je=re(ze.rotate.shx),Ne=new c,Ce=(Ne=(Ne=(Ne=Ne.multiply(ze.translate)).multiply(ze.skew)).multiply(ze.scale)).applyToRectangle(new o(ne-F*$e,ae-U*pe,H*Le,X*Ie)),Oe=I.call(this,Ce),De=[],Ve=0;Ve<Oe.length;Ve+=1)De.indexOf(Oe[Ve])===-1&&De.push(Oe[Ve]);if(P(De),this.autoPaging)for(var tt=De[0],ot=De[De.length-1],ct=tt;ct<ot+1;ct++){this.pdf.setPage(ct);var gt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Et=ct===1?this.posY+this.margin[0]:this.margin[0],Qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ht=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Me=ct===1?0:Qe+(ct-2)*ht;if(this.ctx.clip_path.length!==0){var Nn=this.path;B=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(B,this.posX+this.margin[3],-Me+Et+this.ctx.prevPageLastElemOffset),W.call(this,"fill",!0),this.path=Nn}var yt=JSON.parse(JSON.stringify(Ce));yt=A([yt],this.posX+this.margin[3],-Me+Et+this.ctx.prevPageLastElemOffset)[0];var _r=(ct>tt||ct<ot)&&S.call(this);_r&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],gt,ht,null).clip().discardPath()),this.pdf.addImage(C,"JPEG",yt.x,yt.y,yt.w,yt.h,null,null,je),_r&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(C,"JPEG",Ce.x,Ce.y,Ce.w,Ce.h,null,null,je)};var I=function(C,F,U){var H=[];F=F||this.pdf.internal.pageSize.width,U=U||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var X=this.posY+this.ctx.prevPageLastElemOffset;switch(C.type){default:case"mt":case"lt":H.push(Math.floor((C.y+X)/U)+1);break;case"arc":H.push(Math.floor((C.y+X-C.radius)/U)+1),H.push(Math.floor((C.y+X+C.radius)/U)+1);break;case"qct":var ne=de(this.ctx.lastPoint.x,this.ctx.lastPoint.y,C.x1,C.y1,C.x,C.y);H.push(Math.floor((ne.y+X)/U)+1),H.push(Math.floor((ne.y+ne.h+X)/U)+1);break;case"bct":var ae=ge(this.ctx.lastPoint.x,this.ctx.lastPoint.y,C.x1,C.y1,C.x2,C.y2,C.x,C.y);H.push(Math.floor((ae.y+X)/U)+1),H.push(Math.floor((ae.y+ae.h+X)/U)+1);break;case"rect":H.push(Math.floor((C.y+X)/U)+1),H.push(Math.floor((C.y+C.h+X)/U)+1)}for(var oe=0;oe<H.length;oe+=1)for(;this.pdf.internal.getNumberOfPages()<H[oe];)b.call(this);return H},b=function(){var C=this.fillStyle,F=this.strokeStyle,U=this.font,H=this.lineCap,X=this.lineWidth,ne=this.lineJoin;this.pdf.addPage(),this.fillStyle=C,this.strokeStyle=F,this.font=U,this.lineCap=H,this.lineWidth=X,this.lineJoin=ne},A=function(C,F,U){for(var H=0;H<C.length;H++)switch(C[H].type){case"bct":C[H].x2+=F,C[H].y2+=U;case"qct":C[H].x1+=F,C[H].y1+=U;case"mt":case"lt":case"arc":default:C[H].x+=F,C[H].y+=U}return C},P=function(C){return C.sort(function(F,U){return F-U})},R=function(C,F){for(var U,H,X=this.fillStyle,ne=this.strokeStyle,ae=this.lineCap,oe=this.lineWidth,Se=Math.abs(oe*this.ctx.transform.scaleX),xe=this.lineJoin,Le=JSON.parse(JSON.stringify(this.path)),Ie=JSON.parse(JSON.stringify(this.path)),$e=[],pe=0;pe<Ie.length;pe++)if(Ie[pe].x!==void 0)for(var B=I.call(this,Ie[pe]),ze=0;ze<B.length;ze+=1)$e.indexOf(B[ze])===-1&&$e.push(B[ze]);for(var je=0;je<$e.length;je++)for(;this.pdf.internal.getNumberOfPages()<$e[je];)b.call(this);if(P($e),this.autoPaging)for(var Ne=$e[0],Ce=$e[$e.length-1],Oe=Ne;Oe<Ce+1;Oe++){this.pdf.setPage(Oe),this.fillStyle=X,this.strokeStyle=ne,this.lineCap=ae,this.lineWidth=Se,this.lineJoin=xe;var De=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ve=Oe===1?this.posY+this.margin[0]:this.margin[0],tt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ct=Oe===1?0:tt+(Oe-2)*ot;if(this.ctx.clip_path.length!==0){var gt=this.path;U=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(U,this.posX+this.margin[3],-ct+Ve+this.ctx.prevPageLastElemOffset),W.call(this,C,!0),this.path=gt}if(H=JSON.parse(JSON.stringify(Le)),this.path=A(H,this.posX+this.margin[3],-ct+Ve+this.ctx.prevPageLastElemOffset),F===!1||Oe===0){var Et=(Oe>Ne||Oe<Ce)&&S.call(this);Et&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],De,ot,null).clip().discardPath()),W.call(this,C,F),Et&&this.pdf.restoreGraphicsState()}this.lineWidth=oe}else this.lineWidth=Se,W.call(this,C,F),this.lineWidth=oe;this.path=Le},W=function(C,F){if((C!=="stroke"||F||!N.call(this))&&(C==="stroke"||F||!g.call(this))){for(var U,H,X=[],ne=this.path,ae=0;ae<ne.length;ae++){var oe=ne[ae];switch(oe.type){case"begin":X.push({begin:!0});break;case"close":X.push({close:!0});break;case"mt":X.push({start:oe,deltas:[],abs:[]});break;case"lt":var Se=X.length;if(ne[ae-1]&&!isNaN(ne[ae-1].x)&&(U=[oe.x-ne[ae-1].x,oe.y-ne[ae-1].y],Se>0)){for(;Se>=0;Se--)if(X[Se-1].close!==!0&&X[Se-1].begin!==!0){X[Se-1].deltas.push(U),X[Se-1].abs.push(oe);break}}break;case"bct":U=[oe.x1-ne[ae-1].x,oe.y1-ne[ae-1].y,oe.x2-ne[ae-1].x,oe.y2-ne[ae-1].y,oe.x-ne[ae-1].x,oe.y-ne[ae-1].y],X[X.length-1].deltas.push(U);break;case"qct":var xe=ne[ae-1].x+2/3*(oe.x1-ne[ae-1].x),Le=ne[ae-1].y+2/3*(oe.y1-ne[ae-1].y),Ie=oe.x+2/3*(oe.x1-oe.x),$e=oe.y+2/3*(oe.y1-oe.y),pe=oe.x,B=oe.y;U=[xe-ne[ae-1].x,Le-ne[ae-1].y,Ie-ne[ae-1].x,$e-ne[ae-1].y,pe-ne[ae-1].x,B-ne[ae-1].y],X[X.length-1].deltas.push(U);break;case"arc":X.push({deltas:[],abs:[],arc:!0}),Array.isArray(X[X.length-1].abs)&&X[X.length-1].abs.push(oe)}}H=F?null:C==="stroke"?"stroke":"fill";for(var ze=!1,je=0;je<X.length;je++)if(X[je].arc)for(var Ne=X[je].abs,Ce=0;Ce<Ne.length;Ce++){var Oe=Ne[Ce];Oe.type==="arc"?V.call(this,Oe.x,Oe.y,Oe.radius,Oe.startAngle,Oe.endAngle,Oe.counterclockwise,void 0,F,!ze):G.call(this,Oe.x,Oe.y),ze=!0}else if(X[je].close===!0)this.pdf.internal.out("h"),ze=!1;else if(X[je].begin!==!0){var De=X[je].start.x,Ve=X[je].start.y;q.call(this,X[je].deltas,De,Ve),ze=!0}H&&se.call(this,H),F&&me.call(this)}},ie=function(C){var F=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,U=F*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return C-U;case"top":return C+F-U;case"hanging":return C+F-2*U;case"middle":return C+F/2-U;case"ideographic":return C;case"alphabetic":default:return C}},Q=function(C){return C+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var C=function(){};return C.colorStops=[],C.addColorStop=function(F,U){this.colorStops.push([F,U])},C.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},C.isCanvasGradient=!0,C},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var V=function(C,F,U,H,X,ne,ae,oe,Se){for(var xe=le.call(this,U,H,X,ne),Le=0;Le<xe.length;Le++){var Ie=xe[Le];Le===0&&(Se?D.call(this,Ie.x1+C,Ie.y1+F):G.call(this,Ie.x1+C,Ie.y1+F)),ce.call(this,C,F,Ie.x2,Ie.y2,Ie.x3,Ie.y3,Ie.x4,Ie.y4)}oe?me.call(this):se.call(this,ae)},se=function(C){switch(C){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},me=function(){this.pdf.clip(),this.pdf.discardPath()},D=function(C,F){this.pdf.internal.out(t(C)+" "+r(F)+" m")},O=function(C){var F;switch(C.align){case"right":case"end":F="right";break;case"center":F="center";break;case"left":case"start":default:F="left"}var U=this.pdf.getTextDimensions(C.text),H=ie.call(this,C.y),X=Q.call(this,H)-U.h,ne=this.ctx.transform.applyToPoint(new a(C.x,H)),ae=this.ctx.transform.decompose(),oe=new c;oe=(oe=(oe=oe.multiply(ae.translate)).multiply(ae.skew)).multiply(ae.scale);for(var Se,xe,Le,Ie=this.ctx.transform.applyToRectangle(new o(C.x,H,U.w,U.h)),$e=oe.applyToRectangle(new o(C.x,X,U.w,U.h)),pe=I.call(this,$e),B=[],ze=0;ze<pe.length;ze+=1)B.indexOf(pe[ze])===-1&&B.push(pe[ze]);if(P(B),this.autoPaging)for(var je=B[0],Ne=B[B.length-1],Ce=je;Ce<Ne+1;Ce++){this.pdf.setPage(Ce);var Oe=Ce===1?this.posY+this.margin[0]:this.margin[0],De=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ve=this.pdf.internal.pageSize.height-this.margin[2],tt=Ve-this.margin[0],ot=this.pdf.internal.pageSize.width-this.margin[1],ct=ot-this.margin[3],gt=Ce===1?0:De+(Ce-2)*tt;if(this.ctx.clip_path.length!==0){var Et=this.path;Se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(Se,this.posX+this.margin[3],-1*gt+Oe),W.call(this,"fill",!0),this.path=Et}var Qe=A([JSON.parse(JSON.stringify($e))],this.posX+this.margin[3],-gt+Oe+this.ctx.prevPageLastElemOffset)[0];C.scale>=.01&&(xe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(xe*C.scale),Le=this.lineWidth,this.lineWidth=Le*C.scale);var ht=this.autoPaging!=="text";if(ht||Qe.y+Qe.h<=Ve){if(ht||Qe.y>=Oe&&Qe.x<=ot){var Me=ht?C.text:this.pdf.splitTextToSize(C.text,C.maxWidth||ot-Qe.x)[0],Nn=A([JSON.parse(JSON.stringify(Ie))],this.posX+this.margin[3],-gt+Oe+this.ctx.prevPageLastElemOffset)[0],yt=ht&&(Ce>je||Ce<Ne)&&S.call(this);yt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ct,tt,null).clip().discardPath()),this.pdf.text(Me,Nn.x,Nn.y,{angle:C.angle,align:F,renderingMode:C.renderingMode}),yt&&this.pdf.restoreGraphicsState()}}else Qe.y<Ve&&(this.ctx.prevPageLastElemOffset+=Ve-Qe.y);C.scale>=.01&&(this.pdf.setFontSize(xe),this.lineWidth=Le)}else C.scale>=.01&&(xe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(xe*C.scale),Le=this.lineWidth,this.lineWidth=Le*C.scale),this.pdf.text(C.text,ne.x+this.posX,ne.y+this.posY,{angle:C.angle,align:F,renderingMode:C.renderingMode,maxWidth:C.maxWidth}),C.scale>=.01&&(this.pdf.setFontSize(xe),this.lineWidth=Le)},G=function(C,F,U,H){U=U||0,H=H||0,this.pdf.internal.out(t(C+U)+" "+r(F+H)+" l")},q=function(C,F,U){return this.pdf.lines(C,F,U,null,null)},ce=function(C,F,U,H,X,ne,ae,oe){this.pdf.internal.out([e(i(U+C)),e(s(H+F)),e(i(X+C)),e(s(ne+F)),e(i(ae+C)),e(s(oe+F)),"c"].join(" "))},le=function(C,F,U,H){for(var X=2*Math.PI,ne=Math.PI/2;F>U;)F-=X;var ae=Math.abs(U-F);ae<X&&H&&(ae=X-ae);for(var oe=[],Se=H?-1:1,xe=F;ae>1e-5;){var Le=xe+Se*Math.min(ae,ne);oe.push(he.call(this,C,xe,Le)),ae-=Math.abs(Le-xe),xe=Le}return oe},he=function(C,F,U){var H=(U-F)/2,X=C*Math.cos(H),ne=C*Math.sin(H),ae=X,oe=-ne,Se=ae*ae+oe*oe,xe=Se+ae*X+oe*ne,Le=4/3*(Math.sqrt(2*Se*xe)-xe)/(ae*ne-oe*X),Ie=ae-Le*oe,$e=oe+Le*ae,pe=Ie,B=-$e,ze=H+F,je=Math.cos(ze),Ne=Math.sin(ze);return{x1:C*Math.cos(F),y1:C*Math.sin(F),x2:Ie*je-$e*Ne,y2:Ie*Ne+$e*je,x3:pe*je-B*Ne,y3:pe*Ne+B*je,x4:C*Math.cos(U),y4:C*Math.sin(U)}},re=function(C){return 180*C/Math.PI},de=function(C,F,U,H,X,ne){var ae=C+.5*(U-C),oe=F+.5*(H-F),Se=X+.5*(U-X),xe=ne+.5*(H-ne),Le=Math.min(C,X,ae,Se),Ie=Math.max(C,X,ae,Se),$e=Math.min(F,ne,oe,xe),pe=Math.max(F,ne,oe,xe);return new o(Le,$e,Ie-Le,pe-$e)},ge=function(C,F,U,H,X,ne,ae,oe){var Se,xe,Le,Ie,$e,pe,B,ze,je,Ne,Ce,Oe,De,Ve,tt=U-C,ot=H-F,ct=X-U,gt=ne-H,Et=ae-X,Qe=oe-ne;for(xe=0;xe<41;xe++)je=(B=(Le=C+(Se=xe/40)*tt)+Se*(($e=U+Se*ct)-Le))+Se*($e+Se*(X+Se*Et-$e)-B),Ne=(ze=(Ie=F+Se*ot)+Se*((pe=H+Se*gt)-Ie))+Se*(pe+Se*(ne+Se*Qe-pe)-ze),xe==0?(Ce=je,Oe=Ne,De=je,Ve=Ne):(Ce=Math.min(Ce,je),Oe=Math.min(Oe,Ne),De=Math.max(De,je),Ve=Math.max(Ve,Ne));return new o(Math.round(Ce),Math.round(Oe),Math.round(De-Ce),Math.round(Ve-Oe))},Te=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var C,F,U=(C=this.ctx.lineDash,F=this.ctx.lineDashOffset,JSON.stringify({lineDash:C,lineDashOffset:F}));this.prevLineDash!==U&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=U)}}})(Ye.API),function(n){var e=function(s){var a,o,c,u,f,p,v,g,N,S;for(o=[],c=0,u=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;u>c;c+=4)(f=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(p=(f=((f=((f=((f=(f-(S=f%85))/85)-(N=f%85))/85)-(g=f%85))/85)-(v=f%85))/85)%85,o.push(p+33,v+33,g+33,N+33,S+33)):o.push(122);return function(I,b){for(var A=b;A>0;A--)I.pop()}(o,a.length),String.fromCharCode.apply(String,o)+"~>"},t=function(s){var a,o,c,u,f,p=String,v="length",g=255,N="charCodeAt",S="slice",I="replace";for(s[S](-2),s=s[S](0,-2)[I](/\s/g,"")[I]("z","!!!!!"),c=[],u=0,f=(s+=a="uuuuu"[S](s[v]%5||5))[v];f>u;u+=5)o=52200625*(s[N](u)-33)+614125*(s[N](u+1)-33)+7225*(s[N](u+2)-33)+85*(s[N](u+3)-33)+(s[N](u+4)-33),c.push(g&o>>24,g&o>>16,g&o>>8,g&o);return function(b,A){for(var P=A;P>0;P--)b.pop()}(c,a[v]),p.fromCharCode.apply(p,c)},r=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var o="",c=0;c<s.length;c+=2)o+=String.fromCharCode("0x"+(s[c]+s[c+1]));return o},i=function(s){for(var a=new Uint8Array(s.length),o=s.length;o--;)a[o]=s.charCodeAt(o);return s=(a=Bf(a)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};n.processDataByFilters=function(s,a){var o=0,c=s||"",u=[];for(typeof(a=a||[])=="string"&&(a=[a]),o=0;o<a.length;o+=1)switch(a[o]){case"ASCII85Decode":case"/ASCII85Decode":c=t(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=r(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(f){return("0"+f.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=i(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[o]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(Ye.API),function(n){n.loadFile=function(e,t,r){return function(i,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(c,u,f){var p=new XMLHttpRequest,v=0,g=function(N){var S=N.length,I=[],b=String.fromCharCode;for(v=0;v<S;v+=1)I.push(b(255&N.charCodeAt(v)));return I.join("")};if(p.open("GET",c,!u),p.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(p.onload=function(){p.status===200?f(g(this.responseText)):f(void 0)}),p.send(null),u&&p.status===200)return g(p.responseText)}(i,s,a)}catch{}return o}(e,t,r)},n.loadImageFile=n.loadFile}(Ye.API),function(n){function e(){return(Ke.html2canvas?Promise.resolve(Ke.html2canvas):Of(()=>import("./html2canvas.esm-CBrSDip1.js"),[],import.meta.url)).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function t(){return(Ke.DOMPurify?Promise.resolve(Ke.DOMPurify):Of(()=>import("./purify.es-a-CayzAK.js"),[],import.meta.url)).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var o=wt(a);return o==="undefined"?"undefined":o==="string"||a instanceof String?"string":o==="number"||a instanceof Number?"number":o==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":o==="object"?"object":"unknown"},i=function(a,o){var c=document.createElement(a);for(var u in o.className&&(c.className=o.className),o.innerHTML&&o.dompurify&&(c.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)c.style[u]=o.style[u];return c},s=function a(o){var c=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),u=a.convert(Promise.resolve(),c);return u=(u=u.setProgress(1,a,1,[a])).set(o)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,o){return a.__proto__=o||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,o){return this.then(function(){switch(o=o||function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(t).then(function(c){return this.set({src:i("div",{innerHTML:a,dompurify:c})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function c(u,f){for(var p=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),v=u.firstChild;v;v=v.nextSibling)f!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||p.appendChild(c(v,f));return u.nodeType===1&&(u.nodeName==="CANVAS"?(p.width=u.width,p.height=u.height,p.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(p.value=u.value),p.addEventListener("load",function(){p.scrollTop=u.scrollTop,p.scrollLeft=u.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,o(this.prop.container,c)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var c=this.opt.jsPDF,u=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var v=0;v<u.length;++v){var g=u[v],N=g.src.find(function(S){return S.format==="truetype"});N&&c.addFont(N.url,g.ref.name,g.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,c.context2d.save(!0),o(this.prop.container,p)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,o,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(a,o):this.outputPdf(a,o)},s.prototype.outputPdf=function(a,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,o)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(r(a)!=="object")return this;var o=Object.keys(a||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=a[c]};switch(c){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[c]=a[c]}}},this);return this.then(function(){return this.thenList(o)})},s.prototype.get=function(a,o){return this.then(function(){var c=a in s.template.prop?this.prop[a]:this.opt[a];return o?o(c):c})},s.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function o(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(a=a||Ye.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:o(a.inner.width,a.k),height:o(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,o,c,u){return a!=null&&(this.progress.val=a),o!=null&&(this.progress.state=o),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,o,c,u){return this.setProgress(a?this.progress.val+a:null,o||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(a,o){var c=this;return this.thenCore(a,o,function(u,f){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(p){return c.updateProgress(null,u),p}).then(u,f).then(function(p){return c.updateProgress(1),p})})},s.prototype.thenCore=function(a,o,c){c=c||Promise.prototype.then,a&&(a=a.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),f=c.call(u,a,o);return s.convert(f,this.__proto__)},s.prototype.thenExternal=function(a,o){return Promise.prototype.then.call(this,a,o)},s.prototype.thenList=function(a){var o=this;return a.forEach(function(c){o=o.thenCore(c)}),o},s.prototype.catch=function(a){a&&(a=a.bind(this));var o=Promise.prototype.catch.call(this,a);return s.convert(o,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Ye.getPageSize=function(a,o,c){if(wt(a)==="object"){var u=a;a=u.orientation,o=u.unit||o,c=u.format||c}o=o||"mm",c=c||"a4",a=(""+(a||"P")).toLowerCase();var f,p=(""+c).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+o}var g,N=0,S=0;if(v.hasOwnProperty(p))N=v[p][1]/f,S=v[p][0]/f;else try{N=c[1],S=c[0]}catch{throw new Error("Invalid format: "+c)}if(a==="p"||a==="portrait")a="p",S>N&&(g=S,S=N,N=g);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",N>S&&(g=S,S=N,N=g)}return{width:S,height:N,unit:o,k:f,orientation:a}},n.html=function(a,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(Hf):null;var c=new s(o);return o.worker?c:c.from(a).doCallback()}}(Ye.API),Ye.API.addJS=function(n){return pg=n,this.internal.events.subscribe("postPutResources",function(){Bc=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Bc+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),fg=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+pg+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Bc!==void 0&&fg!==void 0&&this.internal.out("/Names <</JavaScript "+Bc+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),s=0;s<i.length;s++){var a=i[s],o=r.exec(a);if(o!=null){var c=o[1];t.internal.newObjectDeferredBegin(c,!1)}t.internal.write(a)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,f=[];for(s=0;s<u;s++){var p=t.internal.newObject();f.push(p);var v=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var g=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<f.length;s++)t.internal.write("(page_"+(s+1)+")"+f[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+g+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,s){var a={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(a),a},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var a=r.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var c=t.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(Ye.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,s,a,o){var c,u=this.decode.DCT_DECODE,f=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=a||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(c=function(p){for(var v,g=256*p.charCodeAt(4)+p.charCodeAt(5),N=p.length,S={width:0,height:0,numcomponents:1},I=4;I<N;I+=2){if(I+=g,e.indexOf(p.charCodeAt(I+1))!==-1){v=256*p.charCodeAt(I+5)+p.charCodeAt(I+6),S={width:256*p.charCodeAt(I+7)+p.charCodeAt(I+8),height:v,numcomponents:p.charCodeAt(I+9)};break}g=256*p.charCodeAt(I+2)+p.charCodeAt(I+3)}return S}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}f={data:t,width:c.width,height:c.height,colorSpace:o,bitsPerComponent:8,filter:u,index:r,alias:i}}return f}}(Ye.API);var Da,Uc,mg,gg,vg,PC=function(){var n,e,t;function r(s){var a,o,c,u,f,p,v,g,N,S,I,b,A,P;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(a=this.readUInt32(),N=(function(){var R,W;for(W=[],R=0;R<4;++R)W.push(String.fromCharCode(this.data[this.pos++]));return W}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),u=this.readUInt16()||100,p.delay=1e3*f/u,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(N==="fdAT"&&(this.pos+=4,a-=4),s=(p!=null?p.data:void 0)||this.imgData,b=0;0<=a?b<a:b>a;0<=a?++b:--b)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((S=c-this.transparency.indexed.length)>0)for(A=0;0<=S?A<S:A>S;0<=S?++A:--A)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":v=(I=this.read(a)).indexOf(0),g=String.fromCharCode.apply(String,I.slice(0,v)),this.text[g]=String.fromCharCode.apply(String,I.slice(v+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(P=this.colorType)===4||P===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var a,o;for(o=[],a=0;0<=s?a<s:a>s;0<=s?++a:--a)o.push(this.data[this.pos++]);return o},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var a=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*a),c=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function f(p,v,g,N){var S,I,b,A,P,R,W,ie,Q,V,se,me,D,O,G,q,ce,le,he,re,de,ge=Math.ceil((u.width-p)/g),Te=Math.ceil((u.height-v)/N),C=u.width==ge&&u.height==Te;for(O=a*ge,me=C?o:new Uint8Array(O*Te),R=s.length,D=0,I=0;D<Te&&c<R;){switch(s[c++]){case 0:for(A=ce=0;ce<O;A=ce+=1)me[I++]=s[c++];break;case 1:for(A=le=0;le<O;A=le+=1)S=s[c++],P=A<a?0:me[I-a],me[I++]=(S+P)%256;break;case 2:for(A=he=0;he<O;A=he+=1)S=s[c++],b=(A-A%a)/a,G=D&&me[(D-1)*O+b*a+A%a],me[I++]=(G+S)%256;break;case 3:for(A=re=0;re<O;A=re+=1)S=s[c++],b=(A-A%a)/a,P=A<a?0:me[I-a],G=D&&me[(D-1)*O+b*a+A%a],me[I++]=(S+Math.floor((P+G)/2))%256;break;case 4:for(A=de=0;de<O;A=de+=1)S=s[c++],b=(A-A%a)/a,P=A<a?0:me[I-a],D===0?G=q=0:(G=me[(D-1)*O+b*a+A%a],q=b&&me[(D-1)*O+(b-1)*a+A%a]),W=P+G-q,ie=Math.abs(W-P),V=Math.abs(W-G),se=Math.abs(W-q),Q=ie<=V&&ie<=se?P:V<=se?G:q,me[I++]=(S+Q)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!C){var F=((v+D*N)*u.width+p)*a,U=D*O;for(A=0;A<ge;A+=1){for(var H=0;H<a;H+=1)o[F++]=me[U++];F+=(g-1)*a}}D++}}return s=uC(s),u.interlaceMethod==1?(f(0,0,8,8),f(4,0,8,8),f(0,4,4,8),f(2,0,4,4),f(0,2,2,4),f(1,0,2,2),f(0,1,1,2)):f(0,0,1,1),o},r.prototype.decodePalette=function(){var s,a,o,c,u,f,p,v,g;for(o=this.palette,f=this.transparency.indexed||[],u=new Uint8Array((f.length||0)+o.length),c=0,s=0,a=p=0,v=o.length;p<v;a=p+=3)u[c++]=o[a],u[c++]=o[a+1],u[c++]=o[a+2],u[c++]=(g=f[s++])!=null?g:255;return u},r.prototype.copyToImageData=function(s,a){var o,c,u,f,p,v,g,N,S,I,b;if(c=this.colors,S=null,o=this.hasAlphaChannel,this.palette.length&&(S=(b=this._decodedPalette)!=null?b:this._decodedPalette=this.decodePalette(),c=4,o=!0),N=(u=s.data||s).length,p=S||a,f=v=0,c===1)for(;f<N;)g=S?4*a[f/4]:v,I=p[g++],u[f++]=I,u[f++]=I,u[f++]=I,u[f++]=o?p[g++]:255,v=g;else for(;f<N;)g=S?4*a[f/4]:v,u[f++]=p[g++],u[f++]=p[g++],u[f++]=p[g++],u[f++]=o?p[g++]:255,v=g},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(Ke)==="[object Window]"){try{e=Ke.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),n=function(s){var a;if(i()===!0)return t.width=s.width,t.height=s.height,t.clearRect(0,0,s.width,s.height),t.putImageData(s,0,0),(a=new Image).src=e.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var a,o,c,u,f,p,v,g;if(this.animation){for(g=[],o=f=0,p=(v=this.animation.frames).length;f<p;o=++f)a=v[o],c=s.createImageData(a.width,a.height),u=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(c,u),a.imageData=c,g.push(a.image=n(c));return g}},r.prototype.renderFrame=function(s,a){var o,c,u;return o=(c=this.animation.frames)[a],u=c[a-1],a===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&s.clearRect(o.xOffset,o.yOffset,o.width,o.height),s.drawImage(o.image,o.xOffset,o.yOffset)},r.prototype.animate=function(s){var a,o,c,u,f,p,v=this;return o=0,p=this.animation,u=p.numFrames,c=p.frames,f=p.numPlays,(a=function(){var g,N;if(g=o++%u,N=c[g],v.renderFrame(s,g),u>1&&o/u<f)return v.animation._timeout=setTimeout(a,N.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var a,o;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,a=s.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(o=a.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),a.putImageData(o,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function DC(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],s=i>>7,a=1<<(7&i)+1;n[e++],n[e++];var o=null,c=null;s&&(o=e,c=a,e+=3*a);var u=!0,f=[],p=0,v=null,g=0,N=null;for(this.width=t,this.height=r;u&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,N=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((D=n[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var S=n[e++];p=n[e++]|n[e++]<<8,v=n[e++],!(1&S)&&(v=null),g=S>>2&7,e++;break;case 254:for(;;){if(!((D=n[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var I=n[e++]|n[e++]<<8,b=n[e++]|n[e++]<<8,A=n[e++]|n[e++]<<8,P=n[e++]|n[e++]<<8,R=n[e++],W=R>>6&1,ie=1<<(7&R)+1,Q=o,V=c,se=!1;R>>7&&(se=!0,Q=e,V=ie,e+=3*ie);var me=e;for(e++;;){var D;if(!((D=n[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}f.push({x:I,y:b,width:A,height:P,has_local_palette:se,palette_offset:Q,palette_size:V,data_offset:me,data_length:e-me,transparent_index:v,interlaced:!!W,delay:p,disposal:g});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return N},this.frameInfo=function(O){if(O<0||O>=f.length)throw new Error("Frame index out of range.");return f[O]},this.decodeAndBlitFrameBGRA=function(O,G){var q=this.frameInfo(O),ce=q.width*q.height,le=new Uint8Array(ce);yg(n,q.data_offset,le,ce);var he=q.palette_offset,re=q.transparent_index;re===null&&(re=256);var de=q.width,ge=t-de,Te=de,C=4*(q.y*t+q.x),F=4*((q.y+q.height)*t+q.x),U=C,H=4*ge;q.interlaced===!0&&(H+=4*t*7);for(var X=8,ne=0,ae=le.length;ne<ae;++ne){var oe=le[ne];if(Te===0&&(Te=de,(U+=H)>=F&&(H=4*ge+4*t*(X-1),U=C+(de+ge)*(X<<1),X>>=1)),oe===re)U+=4;else{var Se=n[he+3*oe],xe=n[he+3*oe+1],Le=n[he+3*oe+2];G[U++]=Le,G[U++]=xe,G[U++]=Se,G[U++]=255}--Te}},this.decodeAndBlitFrameRGBA=function(O,G){var q=this.frameInfo(O),ce=q.width*q.height,le=new Uint8Array(ce);yg(n,q.data_offset,le,ce);var he=q.palette_offset,re=q.transparent_index;re===null&&(re=256);var de=q.width,ge=t-de,Te=de,C=4*(q.y*t+q.x),F=4*((q.y+q.height)*t+q.x),U=C,H=4*ge;q.interlaced===!0&&(H+=4*t*7);for(var X=8,ne=0,ae=le.length;ne<ae;++ne){var oe=le[ne];if(Te===0&&(Te=de,(U+=H)>=F&&(H=4*ge+4*t*(X-1),U=C+(de+ge)*(X<<1),X>>=1)),oe===re)U+=4;else{var Se=n[he+3*oe],xe=n[he+3*oe+1],Le=n[he+3*oe+2];G[U++]=Se,G[U++]=xe,G[U++]=Le,G[U++]=255}--Te}}}function yg(n,e,t,r){for(var i=n[e++],s=1<<i,a=s+1,o=a+1,c=i+1,u=(1<<c)-1,f=0,p=0,v=0,g=n[e++],N=new Int32Array(4096),S=null;;){for(;f<16&&g!==0;)p|=n[e++]<<f,f+=8,g===1?g=n[e++]:--g;if(f<c)break;var I=p&u;if(p>>=c,f-=c,I!==s){if(I===a)break;for(var b=I<o?I:S,A=0,P=b;P>s;)P=N[P]>>8,++A;var R=P;if(v+A+(b!==I?1:0)>r)return void Mt.log("Warning, gif stream longer than expected.");t[v++]=R;var W=v+=A;for(b!==I&&(t[v++]=R),P=b;A--;)P=N[P],t[--W]=255&P,P>>=8;S!==null&&o<4096&&(N[o++]=S<<8|R,o>=u+1&&c<12&&(++c,u=u<<1|1)),S=I}else o=a+1,u=(1<<(c=i+1))-1,S=null}return v!==r&&Mt.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Sd(n){var e,t,r,i,s,a=Math.floor,o=new Array(64),c=new Array(64),u=new Array(64),f=new Array(64),p=new Array(65535),v=new Array(65535),g=new Array(64),N=new Array(64),S=[],I=0,b=7,A=new Array(64),P=new Array(64),R=new Array(64),W=new Array(256),ie=new Array(2048),Q=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],V=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],se=[0,1,2,3,4,5,6,7,8,9,10,11],me=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],D=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],G=[0,1,2,3,4,5,6,7,8,9,10,11],q=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ce=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function le(C,F){for(var U=0,H=0,X=new Array,ne=1;ne<=16;ne++){for(var ae=1;ae<=C[ne];ae++)X[F[H]]=[],X[F[H]][0]=U,X[F[H]][1]=ne,H++,U++;U*=2}return X}function he(C){for(var F=C[0],U=C[1]-1;U>=0;)F&1<<U&&(I|=1<<b),U--,--b<0&&(I==255?(re(255),re(0)):re(I),b=7,I=0)}function re(C){S.push(C)}function de(C){re(C>>8&255),re(255&C)}function ge(C,F,U,H,X){for(var ne,ae=X[0],oe=X[240],Se=function(Ne,Ce){var Oe,De,Ve,tt,ot,ct,gt,Et,Qe,ht,Me=0;for(Qe=0;Qe<8;++Qe){Oe=Ne[Me],De=Ne[Me+1],Ve=Ne[Me+2],tt=Ne[Me+3],ot=Ne[Me+4],ct=Ne[Me+5],gt=Ne[Me+6];var Nn=Oe+(Et=Ne[Me+7]),yt=Oe-Et,_r=De+gt,Dt=De-gt,qt=Ve+ct,Ur=Ve-ct,St=tt+ot,_s=tt-ot,zt=Nn+St,br=Nn-St,ai=_r+qt,Ht=_r-qt;Ne[Me]=zt+ai,Ne[Me+4]=zt-ai;var nt=.707106781*(Ht+br);Ne[Me+2]=br+nt,Ne[Me+6]=br-nt;var At=.382683433*((zt=_s+Ur)-(Ht=Dt+yt)),bs=.5411961*zt+At,yn=1.306562965*Ht+At,qr=.707106781*(ai=Ur+Dt),Vr=yt+qr,Ge=yt-qr;Ne[Me+5]=Ge+bs,Ne[Me+3]=Ge-bs,Ne[Me+1]=Vr+yn,Ne[Me+7]=Vr-yn,Me+=8}for(Me=0,Qe=0;Qe<8;++Qe){Oe=Ne[Me],De=Ne[Me+8],Ve=Ne[Me+16],tt=Ne[Me+24],ot=Ne[Me+32],ct=Ne[Me+40],gt=Ne[Me+48];var wr=Oe+(Et=Ne[Me+56]),Wr=Oe-Et,zn=De+gt,ln=De-gt,rn=Ve+ct,Zn=Ve-ct,na=tt+ot,oi=tt-ot,xr=wr+na,Nr=wr-na,Sr=zn+rn,zr=zn-rn;Ne[Me]=xr+Sr,Ne[Me+32]=xr-Sr;var lr=.707106781*(zr+Nr);Ne[Me+16]=Nr+lr,Ne[Me+48]=Nr-lr;var Hr=.382683433*((xr=oi+Zn)-(zr=ln+Wr)),ws=.5411961*xr+Hr,ra=1.306562965*zr+Hr,ia=.707106781*(Sr=Zn+ln),sa=Wr+ia,aa=Wr-ia;Ne[Me+40]=aa+ws,Ne[Me+24]=aa-ws,Ne[Me+8]=sa+ra,Ne[Me+56]=sa-ra,Me++}for(Qe=0;Qe<64;++Qe)ht=Ne[Qe]*Ce[Qe],g[Qe]=ht>0?ht+.5|0:ht-.5|0;return g}(C,F),xe=0;xe<64;++xe)N[Q[xe]]=Se[xe];var Le=N[0]-U;U=N[0],Le==0?he(H[0]):(he(H[v[ne=32767+Le]]),he(p[ne]));for(var Ie=63;Ie>0&&N[Ie]==0;)Ie--;if(Ie==0)return he(ae),U;for(var $e,pe=1;pe<=Ie;){for(var B=pe;N[pe]==0&&pe<=Ie;)++pe;var ze=pe-B;if(ze>=16){$e=ze>>4;for(var je=1;je<=$e;++je)he(oe);ze&=15}ne=32767+N[pe],he(X[(ze<<4)+v[ne]]),he(p[ne]),pe++}return Ie!=63&&he(ae),U}function Te(C){C=Math.min(Math.max(C,1),100),s!=C&&(function(F){for(var U=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],H=0;H<64;H++){var X=a((U[H]*F+50)/100);X=Math.min(Math.max(X,1),255),o[Q[H]]=X}for(var ne=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ae=0;ae<64;ae++){var oe=a((ne[ae]*F+50)/100);oe=Math.min(Math.max(oe,1),255),c[Q[ae]]=oe}for(var Se=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],xe=0,Le=0;Le<8;Le++)for(var Ie=0;Ie<8;Ie++)u[xe]=1/(o[Q[xe]]*Se[Le]*Se[Ie]*8),f[xe]=1/(c[Q[xe]]*Se[Le]*Se[Ie]*8),xe++}(C<50?Math.floor(5e3/C):Math.floor(200-2*C)),s=C)}this.encode=function(C,F){F&&Te(F),S=new Array,I=0,b=7,de(65496),de(65504),de(16),re(74),re(70),re(73),re(70),re(0),re(1),re(1),re(0),de(1),de(1),re(0),re(0),function(){de(65499),de(132),re(0);for(var De=0;De<64;De++)re(o[De]);re(1);for(var Ve=0;Ve<64;Ve++)re(c[Ve])}(),function(De,Ve){de(65472),de(17),re(8),de(Ve),de(De),re(3),re(1),re(17),re(0),re(2),re(17),re(1),re(3),re(17),re(1)}(C.width,C.height),function(){de(65476),de(418),re(0);for(var De=0;De<16;De++)re(V[De+1]);for(var Ve=0;Ve<=11;Ve++)re(se[Ve]);re(16);for(var tt=0;tt<16;tt++)re(me[tt+1]);for(var ot=0;ot<=161;ot++)re(D[ot]);re(1);for(var ct=0;ct<16;ct++)re(O[ct+1]);for(var gt=0;gt<=11;gt++)re(G[gt]);re(17);for(var Et=0;Et<16;Et++)re(q[Et+1]);for(var Qe=0;Qe<=161;Qe++)re(ce[Qe])}(),de(65498),de(12),re(3),re(1),re(0),re(2),re(17),re(3),re(17),re(0),re(63),re(0);var U=0,H=0,X=0;I=0,b=7,this.encode.displayName="_encode_";for(var ne,ae,oe,Se,xe,Le,Ie,$e,pe,B=C.data,ze=C.width,je=C.height,Ne=4*ze,Ce=0;Ce<je;){for(ne=0;ne<Ne;){for(xe=Ne*Ce+ne,Ie=-1,$e=0,pe=0;pe<64;pe++)Le=xe+($e=pe>>3)*Ne+(Ie=4*(7&pe)),Ce+$e>=je&&(Le-=Ne*(Ce+1+$e-je)),ne+Ie>=Ne&&(Le-=ne+Ie-Ne+4),ae=B[Le++],oe=B[Le++],Se=B[Le++],A[pe]=(ie[ae]+ie[oe+256>>0]+ie[Se+512>>0]>>16)-128,P[pe]=(ie[ae+768>>0]+ie[oe+1024>>0]+ie[Se+1280>>0]>>16)-128,R[pe]=(ie[ae+1280>>0]+ie[oe+1536>>0]+ie[Se+1792>>0]>>16)-128;U=ge(A,u,U,e,r),H=ge(P,f,H,t,i),X=ge(R,f,X,t,i),ne+=32}Ce+=8}if(b>=0){var Oe=[];Oe[1]=b+1,Oe[0]=(1<<b+1)-1,he(Oe)}return de(65497),new Uint8Array(S)},n=n||50,function(){for(var C=String.fromCharCode,F=0;F<256;F++)W[F]=C(F)}(),e=le(V,se),t=le(O,G),r=le(me,D),i=le(q,ce),function(){for(var C=1,F=2,U=1;U<=15;U++){for(var H=C;H<F;H++)v[32767+H]=U,p[32767+H]=[],p[32767+H][1]=U,p[32767+H][0]=H;for(var X=-(F-1);X<=-C;X++)v[32767+X]=U,p[32767+X]=[],p[32767+X][1]=U,p[32767+X][0]=F-1+X;C<<=1,F<<=1}}(),function(){for(var C=0;C<256;C++)ie[C]=19595*C,ie[C+256>>0]=38470*C,ie[C+512>>0]=7471*C+32768,ie[C+768>>0]=-11059*C,ie[C+1024>>0]=-21709*C,ie[C+1280>>0]=32768*C+8421375,ie[C+1536>>0]=-27439*C,ie[C+1792>>0]=-5329*C}(),Te(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Lr(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function _g(n){function e(V){if(!V)throw Error("assert :P")}function t(V,se,me){for(var D=0;4>D;D++)if(V[se+D]!=me.charCodeAt(D))return!0;return!1}function r(V,se,me,D,O){for(var G=0;G<O;G++)V[se+G]=me[D+G]}function i(V,se,me,D){for(var O=0;O<D;O++)V[se+O]=me}function s(V){return new Int32Array(V)}function a(V,se){for(var me=[],D=0;D<V;D++)me.push(new se);return me}function o(V,se){var me=[];return function D(O,G,q){for(var ce=q[G],le=0;le<ce&&(O.push(q.length>G+1?[]:new se),!(q.length<G+1));le++)D(O[le],G+1,q)}(me,0,V),me}var c=function(){var V=this;function se(l,h){for(var m=1<<h-1>>>0;l&m;)m>>>=1;return m?(l&m-1)+m:l}function me(l,h,m,y,w){e(!(y%m));do l[h+(y-=m)]=w;while(0<y)}function D(l,h,m,y,w){if(e(2328>=w),512>=w)var k=s(512);else if((k=s(w))==null)return 0;return function(E,T,L,M,$,ee){var te,J,_e=T,ue=1<<L,Y=s(16),K=s(16);for(e($!=0),e(M!=null),e(E!=null),e(0<L),J=0;J<$;++J){if(15<M[J])return 0;++Y[M[J]]}if(Y[0]==$)return 0;for(K[1]=0,te=1;15>te;++te){if(Y[te]>1<<te)return 0;K[te+1]=K[te]+Y[te]}for(J=0;J<$;++J)te=M[J],0<M[J]&&(ee[K[te]++]=J);if(K[15]==1)return(M=new O).g=0,M.value=ee[0],me(E,_e,1,ue,M),ue;var ve,be=-1,ye=ue-1,Fe=0,Ee=1,He=1,Pe=1<<L;for(J=0,te=1,$=2;te<=L;++te,$<<=1){if(Ee+=He<<=1,0>(He-=Y[te]))return 0;for(;0<Y[te];--Y[te])(M=new O).g=te,M.value=ee[J++],me(E,_e+Fe,$,Pe,M),Fe=se(Fe,te)}for(te=L+1,$=2;15>=te;++te,$<<=1){if(Ee+=He<<=1,0>(He-=Y[te]))return 0;for(;0<Y[te];--Y[te]){if(M=new O,(Fe&ye)!=be){for(_e+=Pe,ve=1<<(be=te)-L;15>be&&!(0>=(ve-=Y[be]));)++be,ve<<=1;ue+=Pe=1<<(ve=be-L),E[T+(be=Fe&ye)].g=ve+L,E[T+be].value=_e-T-be}M.g=te-L,M.value=ee[J++],me(E,_e+(Fe>>L),$,Pe,M),Fe=se(Fe,te)}}return Ee!=2*K[15]-1?0:ue}(l,h,m,y,w,k)}function O(){this.value=this.g=0}function G(){this.value=this.g=0}function q(){this.G=a(5,O),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(_n,G)}function ce(l,h,m,y){e(l!=null),e(h!=null),e(2147483648>y),l.Ca=254,l.I=0,l.b=-8,l.Ka=0,l.oa=h,l.pa=m,l.Jd=h,l.Yc=m+y,l.Zc=4<=y?m+y-4+1:m,ne(l)}function le(l,h){for(var m=0;0<h--;)m|=oe(l,128)<<h;return m}function he(l,h){var m=le(l,h);return ae(l)?-m:m}function re(l,h,m,y){var w,k=0;for(e(l!=null),e(h!=null),e(4294967288>y),l.Sb=y,l.Ra=0,l.u=0,l.h=0,4<y&&(y=4),w=0;w<y;++w)k+=h[m+w]<<8*w;l.Ra=k,l.bb=y,l.oa=h,l.pa=m}function de(l){for(;8<=l.u&&l.bb<l.Sb;)l.Ra>>>=8,l.Ra+=l.oa[l.pa+l.bb]<<wa-8>>>0,++l.bb,l.u-=8;U(l)&&(l.h=1,l.u=0)}function ge(l,h){if(e(0<=h),!l.h&&h<=ba){var m=F(l)&_a[h];return l.u+=h,de(l),m}return l.h=1,l.u=0}function Te(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function C(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function F(l){return l.Ra>>>(l.u&wa-1)>>>0}function U(l){return e(l.bb<=l.Sb),l.h||l.bb==l.Sb&&l.u>wa}function H(l,h){l.u=h,l.h=U(l)}function X(l){l.u>=Lo&&(e(l.u>=Lo),de(l))}function ne(l){e(l!=null&&l.oa!=null),l.pa<l.Zc?(l.I=(l.oa[l.pa++]|l.I<<8)>>>0,l.b+=8):(e(l!=null&&l.oa!=null),l.pa<l.Yc?(l.b+=8,l.I=l.oa[l.pa++]|l.I<<8):l.Ka?l.b=0:(l.I<<=8,l.b+=8,l.Ka=1))}function ae(l){return le(l,1)}function oe(l,h){var m=l.Ca;0>l.b&&ne(l);var y=l.b,w=m*h>>>8,k=(l.I>>>y>w)+0;for(k?(m-=w,l.I-=w+1<<y>>>0):m=w+1,y=m,w=0;256<=y;)w+=8,y>>=8;return y=7^w+$n[y],l.b-=y,l.Ca=(m<<y)-1,k}function Se(l,h,m){l[h+0]=m>>24&255,l[h+1]=m>>16&255,l[h+2]=m>>8&255,l[h+3]=m>>0&255}function xe(l,h){return l[h+0]<<0|l[h+1]<<8}function Le(l,h){return xe(l,h)|l[h+2]<<16}function Ie(l,h){return xe(l,h)|xe(l,h+2)<<16}function $e(l,h){var m=1<<h;return e(l!=null),e(0<h),l.X=s(m),l.X==null?0:(l.Mb=32-h,l.Xa=h,1)}function pe(l,h){e(l!=null),e(h!=null),e(l.Xa==h.Xa),r(h.X,0,l.X,0,1<<h.Xa)}function B(){this.X=[],this.Xa=this.Mb=0}function ze(l,h,m,y){e(m!=null),e(y!=null);var w=m[0],k=y[0];return w==0&&(w=(l*k+h/2)/h),k==0&&(k=(h*w+l/2)/l),0>=w||0>=k?0:(m[0]=w,y[0]=k,1)}function je(l,h){return l+(1<<h)-1>>>h}function Ne(l,h){return((4278255360&l)+(4278255360&h)>>>0&4278255360)+((16711935&l)+(16711935&h)>>>0&16711935)>>>0}function Ce(l,h){V[h]=function(m,y,w,k,E,T,L){var M;for(M=0;M<E;++M){var $=V[l](T[L+M-1],w,k+M);T[L+M]=Ne(m[y+M],$)}}}function Oe(){this.ud=this.hd=this.jd=0}function De(l,h){return((4278124286&(l^h))>>>1)+(l&h)>>>0}function Ve(l){return 0<=l&&256>l?l:0>l?0:255<l?255:void 0}function tt(l,h){return Ve(l+(l-h+.5>>1))}function ot(l,h,m){return Math.abs(h-m)-Math.abs(l-m)}function ct(l,h,m,y,w,k,E){for(y=k[E-1],m=0;m<w;++m)k[E+m]=y=Ne(l[h+m],y)}function gt(l,h,m,y,w){var k;for(k=0;k<m;++k){var E=l[h+k],T=E>>8&255,L=16711935&(L=(L=16711935&E)+((T<<16)+T));y[w+k]=(4278255360&E)+L>>>0}}function Et(l,h){h.jd=l>>0&255,h.hd=l>>8&255,h.ud=l>>16&255}function Qe(l,h,m,y,w,k){var E;for(E=0;E<y;++E){var T=h[m+E],L=T>>>8,M=T,$=255&($=($=T>>>16)+((l.jd<<24>>24)*(L<<24>>24)>>>5));M=255&(M=(M=M+((l.hd<<24>>24)*(L<<24>>24)>>>5))+((l.ud<<24>>24)*($<<24>>24)>>>5)),w[k+E]=(4278255360&T)+($<<16)+M}}function ht(l,h,m,y,w){V[h]=function(k,E,T,L,M,$,ee,te,J){for(L=ee;L<te;++L)for(ee=0;ee<J;++ee)M[$++]=w(T[y(k[E++])])},V[l]=function(k,E,T,L,M,$,ee){var te=8>>k.b,J=k.Ea,_e=k.K[0],ue=k.w;if(8>te)for(k=(1<<k.b)-1,ue=(1<<te)-1;E<T;++E){var Y,K=0;for(Y=0;Y<J;++Y)Y&k||(K=y(L[M++])),$[ee++]=w(_e[K&ue]),K>>=te}else V["VP8LMapColor"+m](L,M,_e,ue,$,ee,E,T,J)}}function Me(l,h,m,y,w){for(m=h+m;h<m;){var k=l[h++];y[w++]=k>>16&255,y[w++]=k>>8&255,y[w++]=k>>0&255}}function Nn(l,h,m,y,w){for(m=h+m;h<m;){var k=l[h++];y[w++]=k>>16&255,y[w++]=k>>8&255,y[w++]=k>>0&255,y[w++]=k>>24&255}}function yt(l,h,m,y,w){for(m=h+m;h<m;){var k=(E=l[h++])>>16&240|E>>12&15,E=E>>0&240|E>>28&15;y[w++]=k,y[w++]=E}}function _r(l,h,m,y,w){for(m=h+m;h<m;){var k=(E=l[h++])>>16&248|E>>13&7,E=E>>5&224|E>>3&31;y[w++]=k,y[w++]=E}}function Dt(l,h,m,y,w){for(m=h+m;h<m;){var k=l[h++];y[w++]=k>>0&255,y[w++]=k>>8&255,y[w++]=k>>16&255}}function qt(l,h,m,y,w,k){if(k==0)for(m=h+m;h<m;)Se(y,((k=l[h++])[0]>>24|k[1]>>8&65280|k[2]<<8&16711680|k[3]<<24)>>>0),w+=32;else r(y,w,l,h,m)}function Ur(l,h){V[h][0]=V[l+"0"],V[h][1]=V[l+"1"],V[h][2]=V[l+"2"],V[h][3]=V[l+"3"],V[h][4]=V[l+"4"],V[h][5]=V[l+"5"],V[h][6]=V[l+"6"],V[h][7]=V[l+"7"],V[h][8]=V[l+"8"],V[h][9]=V[l+"9"],V[h][10]=V[l+"10"],V[h][11]=V[l+"11"],V[h][12]=V[l+"12"],V[h][13]=V[l+"13"],V[h][14]=V[l+"0"],V[h][15]=V[l+"0"]}function St(l){return l==Lh||l==Ph||l==vc||l==Dh}function _s(){this.eb=[],this.size=this.A=this.fb=0}function zt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function br(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new _s,this.f.kb=new zt,this.sd=null}function ai(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ht(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function nt(l){return alert("todo:WebPSamplerProcessPlane"),l.T}function At(l,h){var m=l.T,y=h.ba.f.RGBA,w=y.eb,k=y.fb+l.ka*y.A,E=pr[h.ba.S],T=l.y,L=l.O,M=l.f,$=l.N,ee=l.ea,te=l.W,J=h.cc,_e=h.dc,ue=h.Mc,Y=h.Nc,K=l.ka,ve=l.ka+l.T,be=l.U,ye=be+1>>1;for(K==0?E(T,L,null,null,M,$,ee,te,M,$,ee,te,w,k,null,null,be):(E(h.ec,h.fc,T,L,J,_e,ue,Y,M,$,ee,te,w,k-y.A,w,k,be),++m);K+2<ve;K+=2)J=M,_e=$,ue=ee,Y=te,$+=l.Rc,te+=l.Rc,k+=2*y.A,E(T,(L+=2*l.fa)-l.fa,T,L,J,_e,ue,Y,M,$,ee,te,w,k-y.A,w,k,be);return L+=l.fa,l.j+ve<l.o?(r(h.ec,h.fc,T,L,be),r(h.cc,h.dc,M,$,ye),r(h.Mc,h.Nc,ee,te,ye),m--):1&ve||E(T,L,null,null,M,$,ee,te,M,$,ee,te,w,k+y.A,null,null,be),m}function bs(l,h,m){var y=l.F,w=[l.J];if(y!=null){var k=l.U,E=h.ba.S,T=E==gc||E==vc;h=h.ba.f.RGBA;var L=[0],M=l.ka;L[0]=l.T,l.Kb&&(M==0?--L[0]:(--M,w[0]-=l.width),l.j+l.ka+l.T==l.o&&(L[0]=l.o-l.j-M));var $=h.eb;M=h.fb+M*h.A,l=Ft(y,w[0],l.width,k,L,$,M+(T?0:3),h.A),e(m==L),l&&St(E)&&dr($,M,T,k,L,h.A)}return 0}function yn(l){var h=l.ma,m=h.ba.S,y=11>m,w=m==pc||m==mc||m==gc||m==Th||m==12||St(m);if(h.memory=null,h.Ib=null,h.Jb=null,h.Nd=null,!Io(h.Oa,l,w?11:12))return 0;if(w&&St(m)&&we(),l.da)alert("todo:use_scaling");else{if(y){if(h.Ib=nt,l.Kb){if(m=l.U+1>>1,h.memory=s(l.U+2*m),h.memory==null)return 0;h.ec=h.memory,h.fc=0,h.cc=h.ec,h.dc=h.fc+l.U,h.Mc=h.cc,h.Nc=h.dc+m,h.Ib=At,we()}}else alert("todo:EmitYUV");w&&(h.Jb=bs,y&&Z())}if(y&&!cm){for(l=0;256>l;++l)a5[l]=89858*(l-128)+_c>>yc,c5[l]=-22014*(l-128)+_c,l5[l]=-45773*(l-128),o5[l]=113618*(l-128)+_c>>yc;for(l=jo;l<Rh;++l)h=76283*(l-16)+_c>>yc,u5[l-jo]=er(h,255),h5[l-jo]=er(h+8>>4,15);cm=1}return 1}function qr(l){var h=l.ma,m=l.U,y=l.T;return e(!(1&l.ka)),0>=m||0>=y?0:(m=h.Ib(l,h),h.Jb!=null&&h.Jb(l,h,m),h.Dc+=m,1)}function Vr(l){l.ma.memory=null}function Ge(l,h,m,y){return ge(l,8)!=47?0:(h[0]=ge(l,14)+1,m[0]=ge(l,14)+1,y[0]=ge(l,1),ge(l,3)!=0?0:!l.h)}function wr(l,h){if(4>l)return l+1;var m=l-2>>1;return(2+(1&l)<<m)+ge(h,m)+1}function Wr(l,h){return 120<h?h-120:1<=(m=((m=$v[h-1])>>4)*l+(8-(15&m)))?m:1;var m}function zn(l,h,m){var y=F(m),w=l[h+=255&y].g-8;return 0<w&&(H(m,m.u+8),y=F(m),h+=l[h].value,h+=y&(1<<w)-1),H(m,m.u+l[h].g),l[h].value}function ln(l,h,m){return m.g+=l.g,m.value+=l.value<<h>>>0,e(8>=m.g),l.g}function rn(l,h,m){var y=l.xc;return e((h=y==0?0:l.vc[l.md*(m>>y)+(h>>y)])<l.Wb),l.Ya[h]}function Zn(l,h,m,y){var w=l.ab,k=l.c*h,E=l.C;h=E+h;var T=m,L=y;for(y=l.Ta,m=l.Ua;0<w--;){var M=l.gc[w],$=E,ee=h,te=T,J=L,_e=(L=y,T=m,M.Ea);switch(e($<ee),e(ee<=M.nc),M.hc){case 2:oc(te,J,(ee-$)*_e,L,T);break;case 0:var ue=$,Y=ee,K=L,ve=T,be=(Pe=M).Ea;ue==0&&(Eh(te,J,null,null,1,K,ve),ct(te,J+1,0,0,be-1,K,ve+1),J+=be,ve+=be,++ue);for(var ye=1<<Pe.b,Fe=ye-1,Ee=je(be,Pe.b),He=Pe.K,Pe=Pe.w+(ue>>Pe.b)*Ee;ue<Y;){var bt=He,kt=Pe,vt=1;for(Po(te,J,K,ve-be,1,K,ve);vt<be;){var ft=(vt&~Fe)+ye;ft>be&&(ft=be),(0,Ri[bt[kt++]>>8&15])(te,J+ +vt,K,ve+vt-be,ft-vt,K,ve+vt),vt=ft}J+=be,ve+=be,++ue&Fe||(Pe+=Ee)}ee!=M.nc&&r(L,T-_e,L,T+(ee-$-1)*_e,_e);break;case 1:for(_e=te,Y=J,be=(te=M.Ea)-(ve=te&~(K=(J=1<<M.b)-1)),ue=je(te,M.b),ye=M.K,M=M.w+($>>M.b)*ue;$<ee;){for(Fe=ye,Ee=M,He=new Oe,Pe=Y+ve,bt=Y+te;Y<Pe;)Et(Fe[Ee++],He),ks(He,_e,Y,J,L,T),Y+=J,T+=J;Y<bt&&(Et(Fe[Ee++],He),ks(He,_e,Y,be,L,T),Y+=be,T+=be),++$&K||(M+=ue)}break;case 3:if(te==L&&J==T&&0<M.b){for(Y=L,te=_e=T+(ee-$)*_e-(ve=(ee-$)*je(M.Ea,M.b)),J=L,K=T,ue=[],ve=(be=ve)-1;0<=ve;--ve)ue[ve]=J[K+ve];for(ve=be-1;0<=ve;--ve)Y[te+ve]=ue[ve];cr(M,$,ee,L,_e,L,T)}else cr(M,$,ee,te,J,L,T)}T=y,L=m}L!=m&&r(y,m,T,L,k)}function na(l,h){var m=l.V,y=l.Ba+l.c*l.C,w=h-l.C;if(e(h<=l.l.o),e(16>=w),0<w){var k=l.l,E=l.Ta,T=l.Ua,L=k.width;if(Zn(l,w,m,y),w=T=[T],e((m=l.C)<(y=h)),e(k.v<k.va),y>k.o&&(y=k.o),m<k.j){var M=k.j-m;m=k.j,w[0]+=M*L}if(m>=y?m=0:(w[0]+=4*k.v,k.ka=m-k.j,k.U=k.va-k.v,k.T=y-m,m=1),m){if(T=T[0],11>(m=l.ca).S){var $=m.f.RGBA,ee=(y=m.S,w=k.U,k=k.T,M=$.eb,$.A),te=k;for($=$.fb+l.Ma*$.A;0<te--;){var J=E,_e=T,ue=w,Y=M,K=$;switch(y){case fc:Gn(J,_e,ue,Y,K);break;case pc:On(J,_e,ue,Y,K);break;case Lh:On(J,_e,ue,Y,K),dr(Y,K,0,ue,1,0);break;case Zp:hi(J,_e,ue,Y,K);break;case mc:qt(J,_e,ue,Y,K,1);break;case Ph:qt(J,_e,ue,Y,K,1),dr(Y,K,0,ue,1,0);break;case gc:qt(J,_e,ue,Y,K,0);break;case vc:qt(J,_e,ue,Y,K,0),dr(Y,K,1,ue,1,0);break;case Th:Fi(J,_e,ue,Y,K);break;case Dh:Fi(J,_e,ue,Y,K),Rt(Y,K,ue,1,0);break;case em:ui(J,_e,ue,Y,K);break;default:e(0)}T+=L,$+=ee}l.Ma+=k}else alert("todo:EmitRescaledRowsYUVA");e(l.Ma<=m.height)}}l.C=h,e(l.C<=l.i)}function oi(l){var h;if(0<l.ua)return 0;for(h=0;h<l.Wb;++h){var m=l.Ya[h].G,y=l.Ya[h].H;if(0<m[1][y[1]+0].g||0<m[2][y[2]+0].g||0<m[3][y[3]+0].g)return 0}return 1}function xr(l,h,m,y,w,k){if(l.Z!=0){var E=l.qd,T=l.rd;for(e(qi[l.Z]!=null);h<m;++h)qi[l.Z](E,T,y,w,y,w,k),E=y,T=w,w+=k;l.qd=E,l.rd=T}}function Nr(l,h){var m=l.l.ma,y=m.Z==0||m.Z==1?l.l.j:l.C;if(y=l.C<y?y:l.C,e(h<=l.l.o),h>y){var w=l.l.width,k=m.ca,E=m.tb+w*y,T=l.V,L=l.Ba+l.c*y,M=l.gc;e(l.ab==1),e(M[0].hc==3),lc(M[0],y,h,T,L,k,E),xr(m,y,h,k,E,w)}l.C=l.Ma=h}function Sr(l,h,m,y,w,k,E){var T=l.$/y,L=l.$%y,M=l.m,$=l.s,ee=m+l.$,te=ee;w=m+y*w;var J=m+y*k,_e=280+$.ua,ue=l.Pb?T:16777216,Y=0<$.ua?$.Wa:null,K=$.wc,ve=ee<J?rn($,L,T):null;e(l.C<k),e(J<=w);var be=!1;e:for(;;){for(;be||ee<J;){var ye=0;if(T>=ue){var Fe=ee-m;e((ue=l).Pb),ue.wd=ue.m,ue.xd=Fe,0<ue.s.ua&&pe(ue.s.Wa,ue.s.vb),ue=T+Yv}if(L&K||(ve=rn($,L,T)),e(ve!=null),ve.Qb&&(h[ee]=ve.qb,be=!0),!be)if(X(M),ve.jc){ye=M,Fe=h;var Ee=ee,He=ve.pd[F(ye)&_n-1];e(ve.jc),256>He.g?(H(ye,ye.u+He.g),Fe[Ee]=He.value,ye=0):(H(ye,ye.u+He.g-256),e(256<=He.value),ye=He.value),ye==0&&(be=!0)}else ye=zn(ve.G[0],ve.H[0],M);if(M.h)break;if(be||256>ye){if(!be)if(ve.nd)h[ee]=(ve.qb|ye<<8)>>>0;else{if(X(M),be=zn(ve.G[1],ve.H[1],M),X(M),Fe=zn(ve.G[2],ve.H[2],M),Ee=zn(ve.G[3],ve.H[3],M),M.h)break;h[ee]=(Ee<<24|be<<16|ye<<8|Fe)>>>0}if(be=!1,++ee,++L>=y&&(L=0,++T,E!=null&&T<=k&&!(T%16)&&E(l,T),Y!=null))for(;te<ee;)ye=h[te++],Y.X[(506832829*ye&4294967295)>>>Y.Mb]=ye}else if(280>ye){if(ye=wr(ye-256,M),Fe=zn(ve.G[4],ve.H[4],M),X(M),Fe=Wr(y,Fe=wr(Fe,M)),M.h)break;if(ee-m<Fe||w-ee<ye)break e;for(Ee=0;Ee<ye;++Ee)h[ee+Ee]=h[ee+Ee-Fe];for(ee+=ye,L+=ye;L>=y;)L-=y,++T,E!=null&&T<=k&&!(T%16)&&E(l,T);if(e(ee<=w),L&K&&(ve=rn($,L,T)),Y!=null)for(;te<ee;)ye=h[te++],Y.X[(506832829*ye&4294967295)>>>Y.Mb]=ye}else{if(!(ye<_e))break e;for(be=ye-280,e(Y!=null);te<ee;)ye=h[te++],Y.X[(506832829*ye&4294967295)>>>Y.Mb]=ye;ye=ee,e(!(be>>>(Fe=Y).Xa)),h[ye]=Fe.X[be],be=!0}be||e(M.h==U(M))}if(l.Pb&&M.h&&ee<w)e(l.m.h),l.a=5,l.m=l.wd,l.$=l.xd,0<l.s.ua&&pe(l.s.vb,l.s.Wa);else{if(M.h)break e;E!=null&&E(l,T>k?k:T),l.a=0,l.$=ee-m}return 1}return l.a=3,0}function zr(l){e(l!=null),l.vc=null,l.yc=null,l.Ya=null;var h=l.Wa;h!=null&&(h.X=null),l.vb=null,e(l!=null)}function lr(){var l=new Ch;return l==null?null:(l.a=0,l.xb=rm,Ur("Predictor","VP8LPredictors"),Ur("Predictor","VP8LPredictors_C"),Ur("PredictorAdd","VP8LPredictorsAdd"),Ur("PredictorAdd","VP8LPredictorsAdd_C"),oc=gt,ks=Qe,Gn=Me,On=Nn,Fi=yt,ui=_r,hi=Dt,V.VP8LMapColor32b=xa,V.VP8LMapColor8b=cc,l)}function Hr(l,h,m,y,w){var k=1,E=[l],T=[h],L=y.m,M=y.s,$=null,ee=0;e:for(;;){if(m)for(;k&&ge(L,1);){var te=E,J=T,_e=y,ue=1,Y=_e.m,K=_e.gc[_e.ab],ve=ge(Y,2);if(_e.Oc&1<<ve)k=0;else{switch(_e.Oc|=1<<ve,K.hc=ve,K.Ea=te[0],K.nc=J[0],K.K=[null],++_e.ab,e(4>=_e.ab),ve){case 0:case 1:K.b=ge(Y,3)+2,ue=Hr(je(K.Ea,K.b),je(K.nc,K.b),0,_e,K.K),K.K=K.K[0];break;case 3:var be,ye=ge(Y,8)+1,Fe=16<ye?0:4<ye?1:2<ye?2:3;if(te[0]=je(K.Ea,Fe),K.b=Fe,be=ue=Hr(ye,1,0,_e,K.K)){var Ee,He=ye,Pe=K,bt=1<<(8>>Pe.b),kt=s(bt);if(kt==null)be=0;else{var vt=Pe.K[0],ft=Pe.w;for(kt[0]=Pe.K[0][0],Ee=1;Ee<1*He;++Ee)kt[Ee]=Ne(vt[ft+Ee],kt[Ee-1]);for(;Ee<4*bt;++Ee)kt[Ee]=0;Pe.K[0]=null,Pe.K[0]=kt,be=1}}ue=be;break;case 2:break;default:e(0)}k=ue}}if(E=E[0],T=T[0],k&&ge(L,1)&&!(k=1<=(ee=ge(L,4))&&11>=ee)){y.a=3;break e}var Ot;if(Ot=k)t:{var It,at,an,Yn=y,on=E,Kn=T,Ct=ee,nr=m,rr=Yn.m,fn=Yn.s,bn=[null],Rn=1,mr=0,Kr=Gv[Ct];n:for(;;){if(nr&&ge(rr,1)){var pn=ge(rr,3)+2,mi=je(on,pn),Ls=je(Kn,pn),Ca=mi*Ls;if(!Hr(mi,Ls,0,Yn,bn))break n;for(bn=bn[0],fn.xc=pn,It=0;It<Ca;++It){var Vi=bn[It]>>8&65535;bn[It]=Vi,Vi>=Rn&&(Rn=Vi+1)}}if(rr.h)break n;for(at=0;5>at;++at){var Gt=tm[at];!at&&0<Ct&&(Gt+=1<<Ct),mr<Gt&&(mr=Gt)}var Fh=a(Rn*Kr,O),dm=Rn,fm=a(dm,q);if(fm==null)var wc=null;else e(65536>=dm),wc=fm;var Bo=s(mr);if(wc==null||Bo==null||Fh==null){Yn.a=1;break n}var xc=Fh;for(It=an=0;It<Rn;++It){var Ir=wc[It],Ea=Ir.G,Ia=Ir.H,pm=0,Nc=1,mm=0;for(at=0;5>at;++at){Gt=tm[at],Ea[at]=xc,Ia[at]=an,!at&&0<Ct&&(Gt+=1<<Ct);i:{var Sc,jh=Gt,Ac=Yn,Uo=Bo,p5=xc,m5=an,Bh=0,Wi=Ac.m,g5=ge(Wi,1);if(i(Uo,0,0,jh),g5){var v5=ge(Wi,1)+1,y5=ge(Wi,1),gm=ge(Wi,y5==0?1:8);Uo[gm]=1,v5==2&&(Uo[gm=ge(Wi,8)]=1);var kc=1}else{var vm=s(19),ym=ge(Wi,4)+4;if(19<ym){Ac.a=3;var Cc=0;break i}for(Sc=0;Sc<ym;++Sc)vm[Hv[Sc]]=ge(Wi,3);var Uh=void 0,qo=void 0,_m=Ac,_5=vm,Ec=jh,bm=Uo,qh=0,zi=_m.m,wm=8,xm=a(128,O);r:for(;D(xm,0,7,_5,19);){if(ge(zi,1)){var b5=2+2*ge(zi,3);if((Uh=2+ge(zi,b5))>Ec)break r}else Uh=Ec;for(qo=0;qo<Ec&&Uh--;){X(zi);var Nm=xm[0+(127&F(zi))];H(zi,zi.u+Nm.g);var Ta=Nm.value;if(16>Ta)bm[qo++]=Ta,Ta!=0&&(wm=Ta);else{var w5=Ta==16,Sm=Ta-16,x5=Wv[Sm],Am=ge(zi,Vv[Sm])+x5;if(qo+Am>Ec)break r;for(var N5=w5?wm:0;0<Am--;)bm[qo++]=N5}}qh=1;break r}qh||(_m.a=3),kc=qh}(kc=kc&&!Wi.h)&&(Bh=D(p5,m5,8,Uo,jh)),kc&&Bh!=0?Cc=Bh:(Ac.a=3,Cc=0)}if(Cc==0)break n;if(Nc&&zv[at]==1&&(Nc=xc[an].g==0),pm+=xc[an].g,an+=Cc,3>=at){var Vo,Vh=Bo[0];for(Vo=1;Vo<Gt;++Vo)Bo[Vo]>Vh&&(Vh=Bo[Vo]);mm+=Vh}}if(Ir.nd=Nc,Ir.Qb=0,Nc&&(Ir.qb=(Ea[3][Ia[3]+0].value<<24|Ea[1][Ia[1]+0].value<<16|Ea[2][Ia[2]+0].value)>>>0,pm==0&&256>Ea[0][Ia[0]+0].value&&(Ir.Qb=1,Ir.qb+=Ea[0][Ia[0]+0].value<<8)),Ir.jc=!Ir.Qb&&6>mm,Ir.jc){var Ic,gi=Ir;for(Ic=0;Ic<_n;++Ic){var Hi=Ic,$i=gi.pd[Hi],Tc=gi.G[0][gi.H[0]+Hi];256<=Tc.value?($i.g=Tc.g+256,$i.value=Tc.value):($i.g=0,$i.value=0,Hi>>=ln(Tc,8,$i),Hi>>=ln(gi.G[1][gi.H[1]+Hi],16,$i),Hi>>=ln(gi.G[2][gi.H[2]+Hi],0,$i),ln(gi.G[3][gi.H[3]+Hi],24,$i))}}}fn.vc=bn,fn.Wb=Rn,fn.Ya=wc,fn.yc=Fh,Ot=1;break t}Ot=0}if(!(k=Ot)){y.a=3;break e}if(0<ee){if(M.ua=1<<ee,!$e(M.Wa,ee)){y.a=1,k=0;break e}}else M.ua=0;var Wh=y,km=E,S5=T,zh=Wh.s,Hh=zh.xc;if(Wh.c=km,Wh.i=S5,zh.md=je(km,Hh),zh.wc=Hh==0?-1:(1<<Hh)-1,m){y.xb=t5;break e}if(($=s(E*T))==null){y.a=1,k=0;break e}k=(k=Sr(y,$,0,E,T,T,null))&&!L.h;break e}return k?(w!=null?w[0]=$:(e($==null),e(m)),y.$=0,m||zr(M)):zr(M),k}function ws(l,h){var m=l.c*l.i,y=m+h+16*h;return e(l.c<=h),l.V=s(y),l.V==null?(l.Ta=null,l.Ua=0,l.a=1,0):(l.Ta=l.V,l.Ua=l.Ba+m+h,1)}function ra(l,h){var m=l.C,y=h-m,w=l.V,k=l.Ba+l.c*m;for(e(h<=l.l.o);0<y;){var E=16<y?16:y,T=l.l.ma,L=l.l.width,M=L*E,$=T.ca,ee=T.tb+L*m,te=l.Ta,J=l.Ua;Zn(l,E,w,k),Zt(te,J,$,ee,M),xr(T,m,m+E,$,ee,L),y-=E,w+=E*l.c,m+=E}e(m==h),l.C=l.Ma=h}function ia(){this.ub=this.yd=this.td=this.Rb=0}function sa(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function aa(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function ql(){this.Yb=function(){var l=[];return function h(m,y,w){for(var k=w[y],E=0;E<k&&(m.push(w.length>y+1?[]:0),!(w.length<y+1));E++)h(m[E],y+1,w)}(l,0,[3,11]),l}()}function ih(){this.jb=s(3),this.Wc=o([4,8],ql),this.Xc=o([4,17],ql)}function sh(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function oa(){this.ld=this.La=this.dd=this.tc=0}function Vl(){this.Na=this.la=0}function ah(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function fo(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function oh(){this.uc=this.M=this.Nb=0,this.wa=Array(new oa),this.Y=0,this.ya=Array(new fo),this.aa=0,this.l=new la}function Wl(){this.y=s(16),this.f=s(8),this.ea=s(8)}function lh(){this.cb=this.a=0,this.sc="",this.m=new Te,this.Od=new ia,this.Kc=new sa,this.ed=new sh,this.Qa=new aa,this.Ic=this.$c=this.Aa=0,this.D=new oh,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,Te),this.ia=0,this.pb=a(4,ah),this.Pa=new ih,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Wl),this.Hd=0,this.rb=Array(new Vl),this.sb=0,this.wa=Array(new oa),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new fo),this.L=this.aa=0,this.gd=o([4,2],oa),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function la(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ch(){var l=new lh;return l!=null&&(l.a=0,l.sc="OK",l.cb=0,l.Xb=0,Fo||(Fo=$l)),l}function Jt(l,h,m){return l.a==0&&(l.a=h,l.sc=m,l.cb=0),0}function zl(l,h,m){return 3<=m&&l[h+0]==157&&l[h+1]==1&&l[h+2]==42}function Hl(l,h){if(l==null)return 0;if(l.a=0,l.sc="OK",h==null)return Jt(l,2,"null VP8Io passed to VP8GetHeaders()");var m=h.data,y=h.w,w=h.ha;if(4>w)return Jt(l,7,"Truncated header.");var k=m[y+0]|m[y+1]<<8|m[y+2]<<16,E=l.Od;if(E.Rb=!(1&k),E.td=k>>1&7,E.yd=k>>4&1,E.ub=k>>5,3<E.td)return Jt(l,3,"Incorrect keyframe parameters.");if(!E.yd)return Jt(l,4,"Frame not displayable.");y+=3,w-=3;var T=l.Kc;if(E.Rb){if(7>w)return Jt(l,7,"cannot parse picture header");if(!zl(m,y,w))return Jt(l,3,"Bad code word");T.c=16383&(m[y+4]<<8|m[y+3]),T.Td=m[y+4]>>6,T.i=16383&(m[y+6]<<8|m[y+5]),T.Ud=m[y+6]>>6,y+=7,w-=7,l.za=T.c+15>>4,l.Ub=T.i+15>>4,h.width=T.c,h.height=T.i,h.Da=0,h.j=0,h.v=0,h.va=h.width,h.o=h.height,h.da=0,h.ib=h.width,h.hb=h.height,h.U=h.width,h.T=h.height,i((k=l.Pa).jb,0,255,k.jb.length),e((k=l.Qa)!=null),k.Cb=0,k.Bb=0,k.Fb=1,i(k.Zb,0,0,k.Zb.length),i(k.Lb,0,0,k.Lb)}if(E.ub>w)return Jt(l,7,"bad partition length");ce(k=l.m,m,y,E.ub),y+=E.ub,w-=E.ub,E.Rb&&(T.Ld=ae(k),T.Kd=ae(k)),T=l.Qa;var L,M=l.Pa;if(e(k!=null),e(T!=null),T.Cb=ae(k),T.Cb){if(T.Bb=ae(k),ae(k)){for(T.Fb=ae(k),L=0;4>L;++L)T.Zb[L]=ae(k)?he(k,7):0;for(L=0;4>L;++L)T.Lb[L]=ae(k)?he(k,6):0}if(T.Bb)for(L=0;3>L;++L)M.jb[L]=ae(k)?le(k,8):255}else T.Bb=0;if(k.Ka)return Jt(l,3,"cannot parse segment header");if((T=l.ed).zd=ae(k),T.Tb=le(k,6),T.wb=le(k,3),T.Pc=ae(k),T.Pc&&ae(k)){for(M=0;4>M;++M)ae(k)&&(T.vd[M]=he(k,6));for(M=0;4>M;++M)ae(k)&&(T.od[M]=he(k,6))}if(l.L=T.Tb==0?0:T.zd?1:2,k.Ka)return Jt(l,3,"cannot parse filter header");var $=w;if(w=L=y,y=L+$,T=$,l.Xb=(1<<le(l.m,2))-1,$<3*(M=l.Xb))m=7;else{for(L+=3*M,T-=3*M,$=0;$<M;++$){var ee=m[w+0]|m[w+1]<<8|m[w+2]<<16;ee>T&&(ee=T),ce(l.Jc[+$],m,L,ee),L+=ee,T-=ee,w+=3}ce(l.Jc[+M],m,L,T),m=L<y?0:5}if(m!=0)return Jt(l,m,"cannot parse partitions");for(m=le(L=l.m,7),w=ae(L)?he(L,4):0,y=ae(L)?he(L,4):0,T=ae(L)?he(L,4):0,M=ae(L)?he(L,4):0,L=ae(L)?he(L,4):0,$=l.Qa,ee=0;4>ee;++ee){if($.Cb){var te=$.Zb[ee];$.Fb||(te+=m)}else{if(0<ee){l.pb[ee]=l.pb[0];continue}te=m}var J=l.pb[ee];J.Sc[0]=Oh[er(te+w,127)],J.Sc[1]=Mh[er(te+0,127)],J.Eb[0]=2*Oh[er(te+y,127)],J.Eb[1]=101581*Mh[er(te+T,127)]>>16,8>J.Eb[1]&&(J.Eb[1]=8),J.Qc[0]=Oh[er(te+M,117)],J.Qc[1]=Mh[er(te+L,127)],J.lc=te+L}if(!E.Rb)return Jt(l,4,"Not a key frame.");for(ae(k),E=l.Pa,m=0;4>m;++m){for(w=0;8>w;++w)for(y=0;3>y;++y)for(T=0;11>T;++T)M=oe(k,Zv[m][w][y][T])?le(k,8):Jv[m][w][y][T],E.Wc[m][w].Yb[y][T]=M;for(w=0;17>w;++w)E.Xc[m][w]=E.Wc[m][e5[w]]}return l.kc=ae(k),l.kc&&(l.Bd=le(k,8)),l.cb=1}function $l(l,h,m,y,w,k,E){var T=h[w].Yb[m];for(m=0;16>w;++w){if(!oe(l,T[m+0]))return w;for(;!oe(l,T[m+1]);)if(T=h[++w].Yb[0],m=0,w==16)return 16;var L=h[w+1].Yb;if(oe(l,T[m+2])){var M=l,$=0;if(oe(M,(te=T)[(ee=m)+3]))if(oe(M,te[ee+6])){for(T=0,ee=2*($=oe(M,te[ee+8]))+(te=oe(M,te[ee+9+$])),$=0,te=Kv[ee];te[T];++T)$+=$+oe(M,te[T]);$+=3+(8<<ee)}else oe(M,te[ee+7])?($=7+2*oe(M,165),$+=oe(M,145)):$=5+oe(M,159);else $=oe(M,te[ee+4])?3+oe(M,te[ee+5]):2;T=L[2]}else $=1,T=L[1];L=E+Xv[w],0>(M=l).b&&ne(M);var ee,te=M.b,J=(ee=M.Ca>>1)-(M.I>>te)>>31;--M.b,M.Ca+=J,M.Ca|=1,M.I-=(ee+1&J)<<te,k[L]=(($^J)-J)*y[(0<w)+0]}return 16}function po(l){var h=l.rb[l.sb-1];h.la=0,h.Na=0,i(l.zc,0,0,l.zc.length),l.ja=0}function uh(l,h){if(l==null)return 0;if(h==null)return Jt(l,2,"NULL VP8Io parameter in VP8Decode().");if(!l.cb&&!Hl(l,h))return 0;if(e(l.cb),h.ac==null||h.ac(h)){h.ob&&(l.L=0);var m=bc[l.L];if(l.L==2?(l.yb=0,l.zb=0):(l.yb=h.v-m>>4,l.zb=h.j-m>>4,0>l.yb&&(l.yb=0),0>l.zb&&(l.zb=0)),l.Va=h.o+15+m>>4,l.Hb=h.va+15+m>>4,l.Hb>l.za&&(l.Hb=l.za),l.Va>l.Ub&&(l.Va=l.Ub),0<l.L){var y=l.ed;for(m=0;4>m;++m){var w;if(l.Qa.Cb){var k=l.Qa.Lb[m];l.Qa.Fb||(k+=y.Tb)}else k=y.Tb;for(w=0;1>=w;++w){var E=l.gd[m][w],T=k;if(y.Pc&&(T+=y.vd[0],w&&(T+=y.od[0])),0<(T=0>T?0:63<T?63:T)){var L=T;0<y.wb&&(L=4<y.wb?L>>2:L>>1)>9-y.wb&&(L=9-y.wb),1>L&&(L=1),E.dd=L,E.tc=2*T+L,E.ld=40<=T?2:15<=T?1:0}else E.tc=0;E.La=w}}}m=0}else Jt(l,6,"Frame setup failed"),m=l.a;if(m=m==0){if(m){l.$c=0,0<l.Aa||(l.Ic=f5);e:{m=l.Ic,y=4*(L=l.za);var M=32*L,$=L+1,ee=0<l.L?L*(0<l.Aa?2:1):0,te=(l.Aa==2?2:1)*L;if((E=y+832+(w=3*(16*m+bc[l.L])/2*M)+(k=l.Fa!=null&&0<l.Fa.length?l.Kc.c*l.Kc.i:0))!=E)m=0;else{if(E>l.Vb){if(l.Vb=0,l.Ec=s(E),l.Fc=0,l.Ec==null){m=Jt(l,1,"no memory during frame initialization.");break e}l.Vb=E}E=l.Ec,T=l.Fc,l.Ac=E,l.Bc=T,T+=y,l.Gd=a(M,Wl),l.Hd=0,l.rb=a($+1,Vl),l.sb=1,l.wa=ee?a(ee,oa):null,l.Y=0,l.D.Nb=0,l.D.wa=l.wa,l.D.Y=l.Y,0<l.Aa&&(l.D.Y+=L),e(!0),l.oc=E,l.pc=T,T+=832,l.ya=a(te,fo),l.aa=0,l.D.ya=l.ya,l.D.aa=l.aa,l.Aa==2&&(l.D.aa+=L),l.R=16*L,l.B=8*L,L=(M=bc[l.L])*l.R,M=M/2*l.B,l.sa=E,l.ta=T+L,l.qa=l.sa,l.ra=l.ta+16*m*l.R+M,l.Ha=l.qa,l.Ia=l.ra+8*m*l.B+M,l.$c=0,T+=w,l.mb=k?E:null,l.nb=k?T:null,e(T+k<=l.Fc+l.Vb),po(l),i(l.Ac,l.Bc,0,y),m=1}}if(m){if(h.ka=0,h.y=l.sa,h.O=l.ta,h.f=l.qa,h.N=l.ra,h.ea=l.Ha,h.Vd=l.Ia,h.fa=l.R,h.Rc=l.B,h.F=null,h.J=0,!hc){for(m=-255;255>=m;++m)cn[255+m]=0>m?-m:m;for(m=-1020;1020>=m;++m)fi[1020+m]=-128>m?-128:127<m?127:m;for(m=-112;112>=m;++m)Ro[112+m]=-16>m?-16:15<m?15:m;for(m=-255;510>=m;++m)ka[255+m]=0>m?0:255<m?255:m;hc=1}Na=fh,di=hh,Do=Yl,Mn=dh,ur=Kl,Qt=Gl,Sa=bo,uc=Ss,Oo=kh,Cs=wo,Es=Ah,ji=pa,Is=xo,Aa=ic,Ts=rc,Bi=Gr,Mo=ci,hr=Sh,Er[0]=$r,Er[1]=ph,Er[2]=yh,Er[3]=_h,Er[4]=Ql,Er[5]=da,Er[6]=Zl,Er[7]=vo,Er[8]=wh,Er[9]=bh,Ui[0]=Xl,Ui[1]=gh,Ui[2]=li,Ui[3]=ua,Ui[4]=Sn,Ui[5]=vh,Ui[6]=Jl,pi[0]=Di,pi[1]=mh,pi[2]=xh,pi[3]=yo,pi[4]=Ns,pi[5]=Nh,pi[6]=_o,m=1}else m=0}m&&(m=function(J,_e){for(J.M=0;J.M<J.Va;++J.M){var ue,Y=J.Jc[J.M&J.Xb],K=J.m,ve=J;for(ue=0;ue<ve.za;++ue){var be=K,ye=ve,Fe=ye.Ac,Ee=ye.Bc+4*ue,He=ye.zc,Pe=ye.ya[ye.aa+ue];if(ye.Qa.Bb?Pe.$b=oe(be,ye.Pa.jb[0])?2+oe(be,ye.Pa.jb[2]):oe(be,ye.Pa.jb[1]):Pe.$b=0,ye.kc&&(Pe.Ad=oe(be,ye.Bd)),Pe.Za=!oe(be,145)+0,Pe.Za){var bt=Pe.Ob,kt=0;for(ye=0;4>ye;++ye){var vt,ft=He[0+ye];for(vt=0;4>vt;++vt){ft=Qv[Fe[Ee+vt]][ft];for(var Ot=nm[oe(be,ft[0])];0<Ot;)Ot=nm[2*Ot+oe(be,ft[Ot])];ft=-Ot,Fe[Ee+vt]=ft}r(bt,kt,Fe,Ee,4),kt+=4,He[0+ye]=ft}}else ft=oe(be,156)?oe(be,128)?1:3:oe(be,163)?2:0,Pe.Ob[0]=ft,i(Fe,Ee,ft,4),i(He,0,ft,4);Pe.Dd=oe(be,142)?oe(be,114)?oe(be,183)?1:3:2:0}if(ve.m.Ka)return Jt(J,7,"Premature end-of-partition0 encountered.");for(;J.ja<J.za;++J.ja){if(ve=Y,be=(K=J).rb[K.sb-1],Fe=K.rb[K.sb+K.ja],ue=K.ya[K.aa+K.ja],Ee=K.kc?ue.Ad:0)be.la=Fe.la=0,ue.Za||(be.Na=Fe.Na=0),ue.Hc=0,ue.Gc=0,ue.ia=0;else{var It,at;if(be=Fe,Fe=ve,Ee=K.Pa.Xc,He=K.ya[K.aa+K.ja],Pe=K.pb[He.$b],ye=He.ad,bt=0,kt=K.rb[K.sb-1],ft=vt=0,i(ye,bt,0,384),He.Za)var an=0,Yn=Ee[3];else{Ot=s(16);var on=be.Na+kt.Na;if(on=Fo(Fe,Ee[1],on,Pe.Eb,0,Ot,0),be.Na=kt.Na=(0<on)+0,1<on)Na(Ot,0,ye,bt);else{var Kn=Ot[0]+3>>3;for(Ot=0;256>Ot;Ot+=16)ye[bt+Ot]=Kn}an=1,Yn=Ee[0]}var Ct=15&be.la,nr=15&kt.la;for(Ot=0;4>Ot;++Ot){var rr=1&nr;for(Kn=at=0;4>Kn;++Kn)Ct=Ct>>1|(rr=(on=Fo(Fe,Yn,on=rr+(1&Ct),Pe.Sc,an,ye,bt))>an)<<7,at=at<<2|(3<on?3:1<on?2:ye[bt+0]!=0),bt+=16;Ct>>=4,nr=nr>>1|rr<<7,vt=(vt<<8|at)>>>0}for(Yn=Ct,an=nr>>4,It=0;4>It;It+=2){for(at=0,Ct=be.la>>4+It,nr=kt.la>>4+It,Ot=0;2>Ot;++Ot){for(rr=1&nr,Kn=0;2>Kn;++Kn)on=rr+(1&Ct),Ct=Ct>>1|(rr=0<(on=Fo(Fe,Ee[2],on,Pe.Qc,0,ye,bt)))<<3,at=at<<2|(3<on?3:1<on?2:ye[bt+0]!=0),bt+=16;Ct>>=2,nr=nr>>1|rr<<5}ft|=at<<4*It,Yn|=Ct<<4<<It,an|=(240&nr)<<It}be.la=Yn,kt.la=an,He.Hc=vt,He.Gc=ft,He.ia=43690&ft?0:Pe.ia,Ee=!(vt|ft)}if(0<K.L&&(K.wa[K.Y+K.ja]=K.gd[ue.$b][ue.Za],K.wa[K.Y+K.ja].La|=!Ee),ve.Ka)return Jt(J,7,"Premature end-of-file encountered.")}if(po(J),K=_e,ve=1,ue=(Y=J).D,be=0<Y.L&&Y.M>=Y.zb&&Y.M<=Y.Va,Y.Aa==0)e:{if(ue.M=Y.M,ue.uc=be,Eo(Y,ue),ve=1,ue=(at=Y.D).Nb,be=(ft=bc[Y.L])*Y.R,Fe=ft/2*Y.B,Ot=16*ue*Y.R,Kn=8*ue*Y.B,Ee=Y.sa,He=Y.ta-be+Ot,Pe=Y.qa,ye=Y.ra-Fe+Kn,bt=Y.Ha,kt=Y.Ia-Fe+Kn,nr=(Ct=at.M)==0,vt=Ct>=Y.Va-1,Y.Aa==2&&Eo(Y,at),at.uc)for(rr=(on=Y).D.M,e(on.D.uc),at=on.yb;at<on.Hb;++at){an=at,Yn=rr;var fn=(bn=(Gt=on).D).Nb;It=Gt.R;var bn=bn.wa[bn.Y+an],Rn=Gt.sa,mr=Gt.ta+16*fn*It+16*an,Kr=bn.dd,pn=bn.tc;if(pn!=0)if(e(3<=pn),Gt.L==1)0<an&&Bi(Rn,mr,It,pn+4),bn.La&&hr(Rn,mr,It,pn),0<Yn&&Ts(Rn,mr,It,pn+4),bn.La&&Mo(Rn,mr,It,pn);else{var mi=Gt.B,Ls=Gt.qa,Ca=Gt.ra+8*fn*mi+8*an,Vi=Gt.Ha,Gt=Gt.Ia+8*fn*mi+8*an;fn=bn.ld,0<an&&(uc(Rn,mr,It,pn+4,Kr,fn),Cs(Ls,Ca,Vi,Gt,mi,pn+4,Kr,fn)),bn.La&&(ji(Rn,mr,It,pn,Kr,fn),Aa(Ls,Ca,Vi,Gt,mi,pn,Kr,fn)),0<Yn&&(Sa(Rn,mr,It,pn+4,Kr,fn),Oo(Ls,Ca,Vi,Gt,mi,pn+4,Kr,fn)),bn.La&&(Es(Rn,mr,It,pn,Kr,fn),Is(Ls,Ca,Vi,Gt,mi,pn,Kr,fn))}}if(Y.ia&&alert("todo:DitherRow"),K.put!=null){if(at=16*Ct,Ct=16*(Ct+1),nr?(K.y=Y.sa,K.O=Y.ta+Ot,K.f=Y.qa,K.N=Y.ra+Kn,K.ea=Y.Ha,K.W=Y.Ia+Kn):(at-=ft,K.y=Ee,K.O=He,K.f=Pe,K.N=ye,K.ea=bt,K.W=kt),vt||(Ct-=ft),Ct>K.o&&(Ct=K.o),K.F=null,K.J=null,Y.Fa!=null&&0<Y.Fa.length&&at<Ct&&(K.J=ko(Y,K,at,Ct-at),K.F=Y.mb,K.F==null&&K.F.length==0)){ve=Jt(Y,3,"Could not decode alpha data.");break e}at<K.j&&(ft=K.j-at,at=K.j,e(!(1&ft)),K.O+=Y.R*ft,K.N+=Y.B*(ft>>1),K.W+=Y.B*(ft>>1),K.F!=null&&(K.J+=K.width*ft)),at<Ct&&(K.O+=K.v,K.N+=K.v>>1,K.W+=K.v>>1,K.F!=null&&(K.J+=K.v),K.ka=at-K.j,K.U=K.va-K.v,K.T=Ct-at,ve=K.put(K))}ue+1!=Y.Ic||vt||(r(Y.sa,Y.ta-be,Ee,He+16*Y.R,be),r(Y.qa,Y.ra-Fe,Pe,ye+8*Y.B,Fe),r(Y.Ha,Y.Ia-Fe,bt,kt+8*Y.B,Fe))}if(!ve)return Jt(J,6,"Output aborted.")}return 1}(l,h)),h.bc!=null&&h.bc(h),m&=1}return m?(l.cb=0,m):0}function Ar(l,h,m,y,w){w=l[h+m+32*y]+(w>>3),l[h+m+32*y]=-256&w?0>w?0:255:w}function ca(l,h,m,y,w,k){Ar(l,h,0,m,y+w),Ar(l,h,1,m,y+k),Ar(l,h,2,m,y-k),Ar(l,h,3,m,y-w)}function Hn(l){return(20091*l>>16)+l}function mo(l,h,m,y){var w,k=0,E=s(16);for(w=0;4>w;++w){var T=l[h+0]+l[h+8],L=l[h+0]-l[h+8],M=(35468*l[h+4]>>16)-Hn(l[h+12]),$=Hn(l[h+4])+(35468*l[h+12]>>16);E[k+0]=T+$,E[k+1]=L+M,E[k+2]=L-M,E[k+3]=T-$,k+=4,h++}for(w=k=0;4>w;++w)T=(l=E[k+0]+4)+E[k+8],L=l-E[k+8],M=(35468*E[k+4]>>16)-Hn(E[k+12]),Ar(m,y,0,0,T+($=Hn(E[k+4])+(35468*E[k+12]>>16))),Ar(m,y,1,0,L+M),Ar(m,y,2,0,L-M),Ar(m,y,3,0,T-$),k++,y+=32}function Gl(l,h,m,y){var w=l[h+0]+4,k=35468*l[h+4]>>16,E=Hn(l[h+4]),T=35468*l[h+1]>>16;ca(m,y,0,w+E,l=Hn(l[h+1]),T),ca(m,y,1,w+k,l,T),ca(m,y,2,w-k,l,T),ca(m,y,3,w-E,l,T)}function hh(l,h,m,y,w){mo(l,h,m,y),w&&mo(l,h+16,m,y+4)}function Yl(l,h,m,y){di(l,h+0,m,y,1),di(l,h+32,m,y+128,1)}function dh(l,h,m,y){var w;for(l=l[h+0]+4,w=0;4>w;++w)for(h=0;4>h;++h)Ar(m,y,h,w,l)}function Kl(l,h,m,y){l[h+0]&&Mn(l,h+0,m,y),l[h+16]&&Mn(l,h+16,m,y+4),l[h+32]&&Mn(l,h+32,m,y+128),l[h+48]&&Mn(l,h+48,m,y+128+4)}function fh(l,h,m,y){var w,k=s(16);for(w=0;4>w;++w){var E=l[h+0+w]+l[h+12+w],T=l[h+4+w]+l[h+8+w],L=l[h+4+w]-l[h+8+w],M=l[h+0+w]-l[h+12+w];k[0+w]=E+T,k[8+w]=E-T,k[4+w]=M+L,k[12+w]=M-L}for(w=0;4>w;++w)E=(l=k[0+4*w]+3)+k[3+4*w],T=k[1+4*w]+k[2+4*w],L=k[1+4*w]-k[2+4*w],M=l-k[3+4*w],m[y+0]=E+T>>3,m[y+16]=M+L>>3,m[y+32]=E-T>>3,m[y+48]=M-L>>3,y+=64}function go(l,h,m){var y,w=h-32,k=tr,E=255-l[w-1];for(y=0;y<m;++y){var T,L=k,M=E+l[h-1];for(T=0;T<m;++T)l[h+T]=L[M+l[w+T]];h+=32}}function ph(l,h){go(l,h,4)}function mh(l,h){go(l,h,8)}function gh(l,h){go(l,h,16)}function li(l,h){var m;for(m=0;16>m;++m)r(l,h+32*m,l,h-32,16)}function ua(l,h){var m;for(m=16;0<m;--m)i(l,h,l[h-1],16),h+=32}function ha(l,h,m){var y;for(y=0;16>y;++y)i(h,m+32*y,l,16)}function Xl(l,h){var m,y=16;for(m=0;16>m;++m)y+=l[h-1+32*m]+l[h+m-32];ha(y>>5,l,h)}function Sn(l,h){var m,y=8;for(m=0;16>m;++m)y+=l[h-1+32*m];ha(y>>4,l,h)}function vh(l,h){var m,y=8;for(m=0;16>m;++m)y+=l[h+m-32];ha(y>>4,l,h)}function Jl(l,h){ha(128,l,h)}function et(l,h,m){return l+2*h+m+2>>2}function yh(l,h){var m,y=h-32;for(y=new Uint8Array([et(l[y-1],l[y+0],l[y+1]),et(l[y+0],l[y+1],l[y+2]),et(l[y+1],l[y+2],l[y+3]),et(l[y+2],l[y+3],l[y+4])]),m=0;4>m;++m)r(l,h+32*m,y,0,y.length)}function _h(l,h){var m=l[h-1],y=l[h-1+32],w=l[h-1+64],k=l[h-1+96];Se(l,h+0,16843009*et(l[h-1-32],m,y)),Se(l,h+32,16843009*et(m,y,w)),Se(l,h+64,16843009*et(y,w,k)),Se(l,h+96,16843009*et(w,k,k))}function $r(l,h){var m,y=4;for(m=0;4>m;++m)y+=l[h+m-32]+l[h-1+32*m];for(y>>=3,m=0;4>m;++m)i(l,h+32*m,y,4)}function Ql(l,h){var m=l[h-1+0],y=l[h-1+32],w=l[h-1+64],k=l[h-1-32],E=l[h+0-32],T=l[h+1-32],L=l[h+2-32],M=l[h+3-32];l[h+0+96]=et(y,w,l[h-1+96]),l[h+1+96]=l[h+0+64]=et(m,y,w),l[h+2+96]=l[h+1+64]=l[h+0+32]=et(k,m,y),l[h+3+96]=l[h+2+64]=l[h+1+32]=l[h+0+0]=et(E,k,m),l[h+3+64]=l[h+2+32]=l[h+1+0]=et(T,E,k),l[h+3+32]=l[h+2+0]=et(L,T,E),l[h+3+0]=et(M,L,T)}function Zl(l,h){var m=l[h+1-32],y=l[h+2-32],w=l[h+3-32],k=l[h+4-32],E=l[h+5-32],T=l[h+6-32],L=l[h+7-32];l[h+0+0]=et(l[h+0-32],m,y),l[h+1+0]=l[h+0+32]=et(m,y,w),l[h+2+0]=l[h+1+32]=l[h+0+64]=et(y,w,k),l[h+3+0]=l[h+2+32]=l[h+1+64]=l[h+0+96]=et(w,k,E),l[h+3+32]=l[h+2+64]=l[h+1+96]=et(k,E,T),l[h+3+64]=l[h+2+96]=et(E,T,L),l[h+3+96]=et(T,L,L)}function da(l,h){var m=l[h-1+0],y=l[h-1+32],w=l[h-1+64],k=l[h-1-32],E=l[h+0-32],T=l[h+1-32],L=l[h+2-32],M=l[h+3-32];l[h+0+0]=l[h+1+64]=k+E+1>>1,l[h+1+0]=l[h+2+64]=E+T+1>>1,l[h+2+0]=l[h+3+64]=T+L+1>>1,l[h+3+0]=L+M+1>>1,l[h+0+96]=et(w,y,m),l[h+0+64]=et(y,m,k),l[h+0+32]=l[h+1+96]=et(m,k,E),l[h+1+32]=l[h+2+96]=et(k,E,T),l[h+2+32]=l[h+3+96]=et(E,T,L),l[h+3+32]=et(T,L,M)}function vo(l,h){var m=l[h+0-32],y=l[h+1-32],w=l[h+2-32],k=l[h+3-32],E=l[h+4-32],T=l[h+5-32],L=l[h+6-32],M=l[h+7-32];l[h+0+0]=m+y+1>>1,l[h+1+0]=l[h+0+64]=y+w+1>>1,l[h+2+0]=l[h+1+64]=w+k+1>>1,l[h+3+0]=l[h+2+64]=k+E+1>>1,l[h+0+32]=et(m,y,w),l[h+1+32]=l[h+0+96]=et(y,w,k),l[h+2+32]=l[h+1+96]=et(w,k,E),l[h+3+32]=l[h+2+96]=et(k,E,T),l[h+3+64]=et(E,T,L),l[h+3+96]=et(T,L,M)}function bh(l,h){var m=l[h-1+0],y=l[h-1+32],w=l[h-1+64],k=l[h-1+96];l[h+0+0]=m+y+1>>1,l[h+2+0]=l[h+0+32]=y+w+1>>1,l[h+2+32]=l[h+0+64]=w+k+1>>1,l[h+1+0]=et(m,y,w),l[h+3+0]=l[h+1+32]=et(y,w,k),l[h+3+32]=l[h+1+64]=et(w,k,k),l[h+3+64]=l[h+2+64]=l[h+0+96]=l[h+1+96]=l[h+2+96]=l[h+3+96]=k}function wh(l,h){var m=l[h-1+0],y=l[h-1+32],w=l[h-1+64],k=l[h-1+96],E=l[h-1-32],T=l[h+0-32],L=l[h+1-32],M=l[h+2-32];l[h+0+0]=l[h+2+32]=m+E+1>>1,l[h+0+32]=l[h+2+64]=y+m+1>>1,l[h+0+64]=l[h+2+96]=w+y+1>>1,l[h+0+96]=k+w+1>>1,l[h+3+0]=et(T,L,M),l[h+2+0]=et(E,T,L),l[h+1+0]=l[h+3+32]=et(m,E,T),l[h+1+32]=l[h+3+64]=et(y,m,E),l[h+1+64]=l[h+3+96]=et(w,y,m),l[h+1+96]=et(k,w,y)}function xh(l,h){var m;for(m=0;8>m;++m)r(l,h+32*m,l,h-32,8)}function yo(l,h){var m;for(m=0;8>m;++m)i(l,h,l[h-1],8),h+=32}function xs(l,h,m){var y;for(y=0;8>y;++y)i(h,m+32*y,l,8)}function Di(l,h){var m,y=8;for(m=0;8>m;++m)y+=l[h+m-32]+l[h-1+32*m];xs(y>>4,l,h)}function Nh(l,h){var m,y=4;for(m=0;8>m;++m)y+=l[h+m-32];xs(y>>3,l,h)}function Ns(l,h){var m,y=4;for(m=0;8>m;++m)y+=l[h-1+32*m];xs(y>>3,l,h)}function _o(l,h){xs(128,l,h)}function fa(l,h,m){var y=l[h-m],w=l[h+0],k=3*(w-y)+Ih[1020+l[h-2*m]-l[h+m]],E=dc[112+(k+4>>3)];l[h-m]=tr[255+y+dc[112+(k+3>>3)]],l[h+0]=tr[255+w-E]}function ec(l,h,m,y){var w=l[h+0],k=l[h+m];return fr[255+l[h-2*m]-l[h-m]]>y||fr[255+k-w]>y}function tc(l,h,m,y){return 4*fr[255+l[h-m]-l[h+0]]+fr[255+l[h-2*m]-l[h+m]]<=y}function nc(l,h,m,y,w){var k=l[h-3*m],E=l[h-2*m],T=l[h-m],L=l[h+0],M=l[h+m],$=l[h+2*m],ee=l[h+3*m];return 4*fr[255+T-L]+fr[255+E-M]>y?0:fr[255+l[h-4*m]-k]<=w&&fr[255+k-E]<=w&&fr[255+E-T]<=w&&fr[255+ee-$]<=w&&fr[255+$-M]<=w&&fr[255+M-L]<=w}function rc(l,h,m,y){var w=2*y+1;for(y=0;16>y;++y)tc(l,h+y,m,w)&&fa(l,h+y,m)}function Gr(l,h,m,y){var w=2*y+1;for(y=0;16>y;++y)tc(l,h+y*m,1,w)&&fa(l,h+y*m,1)}function ci(l,h,m,y){var w;for(w=3;0<w;--w)rc(l,h+=4*m,m,y)}function Sh(l,h,m,y){var w;for(w=3;0<w;--w)Gr(l,h+=4,m,y)}function Oi(l,h,m,y,w,k,E,T){for(k=2*k+1;0<w--;){if(nc(l,h,m,k,E))if(ec(l,h,m,T))fa(l,h,m);else{var L=l,M=h,$=m,ee=L[M-2*$],te=L[M-$],J=L[M+0],_e=L[M+$],ue=L[M+2*$],Y=27*(ve=Ih[1020+3*(J-te)+Ih[1020+ee-_e]])+63>>7,K=18*ve+63>>7,ve=9*ve+63>>7;L[M-3*$]=tr[255+L[M-3*$]+ve],L[M-2*$]=tr[255+ee+K],L[M-$]=tr[255+te+Y],L[M+0]=tr[255+J-Y],L[M+$]=tr[255+_e-K],L[M+2*$]=tr[255+ue-ve]}h+=y}}function kr(l,h,m,y,w,k,E,T){for(k=2*k+1;0<w--;){if(nc(l,h,m,k,E))if(ec(l,h,m,T))fa(l,h,m);else{var L=l,M=h,$=m,ee=L[M-$],te=L[M+0],J=L[M+$],_e=dc[112+((ue=3*(te-ee))+4>>3)],ue=dc[112+(ue+3>>3)],Y=_e+1>>1;L[M-2*$]=tr[255+L[M-2*$]+Y],L[M-$]=tr[255+ee+ue],L[M+0]=tr[255+te-_e],L[M+$]=tr[255+J-Y]}h+=y}}function bo(l,h,m,y,w,k){Oi(l,h,m,1,16,y,w,k)}function Ss(l,h,m,y,w,k){Oi(l,h,1,m,16,y,w,k)}function Ah(l,h,m,y,w,k){var E;for(E=3;0<E;--E)kr(l,h+=4*m,m,1,16,y,w,k)}function pa(l,h,m,y,w,k){var E;for(E=3;0<E;--E)kr(l,h+=4,1,m,16,y,w,k)}function kh(l,h,m,y,w,k,E,T){Oi(l,h,w,1,8,k,E,T),Oi(m,y,w,1,8,k,E,T)}function wo(l,h,m,y,w,k,E,T){Oi(l,h,1,w,8,k,E,T),Oi(m,y,1,w,8,k,E,T)}function xo(l,h,m,y,w,k,E,T){kr(l,h+4*w,w,1,8,k,E,T),kr(m,y+4*w,w,1,8,k,E,T)}function ic(l,h,m,y,w,k,E,T){kr(l,h+4,1,w,8,k,E,T),kr(m,y+4,1,w,8,k,E,T)}function ma(){this.ba=new br,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ht,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function No(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function So(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function sc(){this.ua=0,this.Wa=new B,this.vb=new B,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new q,this.yc=new O}function Ch(){this.xb=this.a=0,this.l=new la,this.ca=new br,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new C,this.Pb=0,this.wd=new C,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new sc,this.ab=0,this.gc=a(4,So),this.Oc=0}function ga(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new la,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function As(l,h,m,y,w,k,E){for(l=l==null?0:l[h+0],h=0;h<E;++h)w[k+h]=l+m[y+h]&255,l=w[k+h]}function Ao(l,h,m,y,w,k,E){var T;if(l==null)As(null,null,m,y,w,k,E);else for(T=0;T<E;++T)w[k+T]=l[h+T]+m[y+T]&255}function Mi(l,h,m,y,w,k,E){if(l==null)As(null,null,m,y,w,k,E);else{var T,L=l[h+0],M=L,$=L;for(T=0;T<E;++T)M=$+(L=l[h+T])-M,$=m[y+T]+(-256&M?0>M?0:255:M)&255,M=L,w[k+T]=$}}function ko(l,h,m,y){var w=h.width,k=h.o;if(e(l!=null&&h!=null),0>m||0>=y||m+y>k)return null;if(!l.Cc){if(l.ga==null){var E;if(l.ga=new ga,(E=l.ga==null)||(E=h.width*h.o,e(l.Gb.length==0),l.Gb=s(E),l.Uc=0,l.Gb==null?E=0:(l.mb=l.Gb,l.nb=l.Uc,l.rc=null,E=1),E=!E),!E){E=l.ga;var T=l.Fa,L=l.P,M=l.qc,$=l.mb,ee=l.nb,te=L+1,J=M-1,_e=E.l;if(e(T!=null&&$!=null&&h!=null),qi[0]=null,qi[1]=As,qi[2]=Ao,qi[3]=Mi,E.ca=$,E.tb=ee,E.c=h.width,E.i=h.height,e(0<E.c&&0<E.i),1>=M)h=0;else if(E.$a=T[L+0]>>0&3,E.Z=T[L+0]>>2&3,E.Lc=T[L+0]>>4&3,L=T[L+0]>>6&3,0>E.$a||1<E.$a||4<=E.Z||1<E.Lc||L)h=0;else if(_e.put=qr,_e.ac=yn,_e.bc=Vr,_e.ma=E,_e.width=h.width,_e.height=h.height,_e.Da=h.Da,_e.v=h.v,_e.va=h.va,_e.j=h.j,_e.o=h.o,E.$a)e:{e(E.$a==1),h=lr();t:for(;;){if(h==null){h=0;break e}if(e(E!=null),E.mc=h,h.c=E.c,h.i=E.i,h.l=E.l,h.l.ma=E,h.l.width=E.c,h.l.height=E.i,h.a=0,re(h.m,T,te,J),!Hr(E.c,E.i,1,h,null)||(h.ab==1&&h.gc[0].hc==3&&oi(h.s)?(E.ic=1,T=h.c*h.i,h.Ta=null,h.Ua=0,h.V=s(T),h.Ba=0,h.V==null?(h.a=1,h=0):h=1):(E.ic=0,h=ws(h,E.c)),!h))break t;h=1;break e}E.mc=null,h=0}else h=J>=E.c*E.i;E=!h}if(E)return null;l.ga.Lc!=1?l.Ga=0:y=k-m}e(l.ga!=null),e(m+y<=k);e:{if(h=(T=l.ga).c,k=T.l.o,T.$a==0){if(te=l.rc,J=l.Vc,_e=l.Fa,L=l.P+1+m*h,M=l.mb,$=l.nb+m*h,e(L<=l.P+l.qc),T.Z!=0)for(e(qi[T.Z]!=null),E=0;E<y;++E)qi[T.Z](te,J,_e,L,M,$,h),te=M,J=$,$+=h,L+=h;else for(E=0;E<y;++E)r(M,$,_e,L,h),te=M,J=$,$+=h,L+=h;l.rc=te,l.Vc=J}else{if(e(T.mc!=null),h=m+y,e((E=T.mc)!=null),e(h<=E.i),E.C>=h)h=1;else if(T.ic||Z(),T.ic){T=E.V,te=E.Ba,J=E.c;var ue=E.i,Y=(_e=1,L=E.$/J,M=E.$%J,$=E.m,ee=E.s,E.$),K=J*ue,ve=J*h,be=ee.wc,ye=Y<ve?rn(ee,M,L):null;e(Y<=K),e(h<=ue),e(oi(ee));t:for(;;){for(;!$.h&&Y<ve;){if(M&be||(ye=rn(ee,M,L)),e(ye!=null),X($),256>(ue=zn(ye.G[0],ye.H[0],$)))T[te+Y]=ue,++Y,++M>=J&&(M=0,++L<=h&&!(L%16)&&Nr(E,L));else{if(!(280>ue)){_e=0;break t}ue=wr(ue-256,$);var Fe,Ee=zn(ye.G[4],ye.H[4],$);if(X($),!(Y>=(Ee=Wr(J,Ee=wr(Ee,$)))&&K-Y>=ue)){_e=0;break t}for(Fe=0;Fe<ue;++Fe)T[te+Y+Fe]=T[te+Y+Fe-Ee];for(Y+=ue,M+=ue;M>=J;)M-=J,++L<=h&&!(L%16)&&Nr(E,L);Y<ve&&M&be&&(ye=rn(ee,M,L))}e($.h==U($))}Nr(E,L>h?h:L);break t}!_e||$.h&&Y<K?(_e=0,E.a=$.h?5:3):E.$=Y,h=_e}else h=Sr(E,E.V,E.Ba,E.c,E.i,h,ra);if(!h){y=0;break e}}m+y>=k&&(l.Cc=1),y=1}if(!y)return null;if(l.Cc&&((y=l.ga)!=null&&(y.mc=null),l.ga=null,0<l.Ga))return alert("todo:WebPDequantizeLevels"),null}return l.nb+m*w}function d(l,h,m,y,w,k){for(;0<w--;){var E,T=l,L=h+(m?1:0),M=l,$=h+(m?0:3);for(E=0;E<y;++E){var ee=M[$+4*E];ee!=255&&(ee*=32897,T[L+4*E+0]=T[L+4*E+0]*ee>>23,T[L+4*E+1]=T[L+4*E+1]*ee>>23,T[L+4*E+2]=T[L+4*E+2]*ee>>23)}h+=k}}function x(l,h,m,y,w){for(;0<y--;){var k;for(k=0;k<m;++k){var E=l[h+2*k+0],T=15&(M=l[h+2*k+1]),L=4369*T,M=(240&M|M>>4)*L>>16;l[h+2*k+0]=(240&E|E>>4)*L>>16&240|(15&E|E<<4)*L>>16>>4&15,l[h+2*k+1]=240&M|T}h+=w}}function j(l,h,m,y,w,k,E,T){var L,M,$=255;for(M=0;M<w;++M){for(L=0;L<y;++L){var ee=l[h+L];k[E+4*L]=ee,$&=ee}h+=m,E+=T}return $!=255}function z(l,h,m,y,w){var k;for(k=0;k<w;++k)m[y+k]=l[h+k]>>8}function Z(){dr=d,Rt=x,Ft=j,Zt=z}function fe(l,h,m){V[l]=function(y,w,k,E,T,L,M,$,ee,te,J,_e,ue,Y,K,ve,be){var ye,Fe=be-1>>1,Ee=T[L+0]|M[$+0]<<16,He=ee[te+0]|J[_e+0]<<16;e(y!=null);var Pe=3*Ee+He+131074>>2;for(h(y[w+0],255&Pe,Pe>>16,ue,Y),k!=null&&(Pe=3*He+Ee+131074>>2,h(k[E+0],255&Pe,Pe>>16,K,ve)),ye=1;ye<=Fe;++ye){var bt=T[L+ye]|M[$+ye]<<16,kt=ee[te+ye]|J[_e+ye]<<16,vt=Ee+bt+He+kt+524296,ft=vt+2*(bt+He)>>3;Pe=ft+Ee>>1,Ee=(vt=vt+2*(Ee+kt)>>3)+bt>>1,h(y[w+2*ye-1],255&Pe,Pe>>16,ue,Y+(2*ye-1)*m),h(y[w+2*ye-0],255&Ee,Ee>>16,ue,Y+(2*ye-0)*m),k!=null&&(Pe=vt+He>>1,Ee=ft+kt>>1,h(k[E+2*ye-1],255&Pe,Pe>>16,K,ve+(2*ye-1)*m),h(k[E+2*ye+0],255&Ee,Ee>>16,K,ve+(2*ye+0)*m)),Ee=bt,He=kt}1&be||(Pe=3*Ee+He+131074>>2,h(y[w+be-1],255&Pe,Pe>>16,ue,Y+(be-1)*m),k!=null&&(Pe=3*He+Ee+131074>>2,h(k[E+be-1],255&Pe,Pe>>16,K,ve+(be-1)*m)))}}function we(){pr[fc]=n5,pr[pc]=im,pr[Zp]=r5,pr[mc]=sm,pr[gc]=am,pr[Th]=om,pr[em]=i5,pr[Lh]=im,pr[Ph]=sm,pr[vc]=am,pr[Dh]=om}function Re(l){return l&~s5?0>l?0:255:l>>lm}function We(l,h){return Re((19077*l>>8)+(26149*h>>8)-14234)}function st(l,h,m){return Re((19077*l>>8)-(6419*h>>8)-(13320*m>>8)+8708)}function rt(l,h){return Re((19077*l>>8)+(33050*h>>8)-17685)}function mt(l,h,m,y,w){y[w+0]=We(l,m),y[w+1]=st(l,h,m),y[w+2]=rt(l,h)}function Vt(l,h,m,y,w){y[w+0]=rt(l,h),y[w+1]=st(l,h,m),y[w+2]=We(l,m)}function $t(l,h,m,y,w){var k=st(l,h,m);h=k<<3&224|rt(l,h)>>3,y[w+0]=248&We(l,m)|k>>5,y[w+1]=h}function sn(l,h,m,y,w){var k=240&rt(l,h)|15;y[w+0]=240&We(l,m)|st(l,h,m)>>4,y[w+1]=k}function An(l,h,m,y,w){y[w+0]=255,mt(l,h,m,y,w+1)}function dn(l,h,m,y,w){Vt(l,h,m,y,w),y[w+3]=255}function Cr(l,h,m,y,w){mt(l,h,m,y,w),y[w+3]=255}function er(l,h){return 0>l?0:l>h?h:l}function Yr(l,h,m){V[l]=function(y,w,k,E,T,L,M,$,ee){for(var te=$+(-2&ee)*m;$!=te;)h(y[w+0],k[E+0],T[L+0],M,$),h(y[w+1],k[E+0],T[L+0],M,$+m),w+=2,++E,++L,$+=2*m;1&ee&&h(y[w+0],k[E+0],T[L+0],M,$)}}function ac(l,h,m){return m==0?l==0?h==0?6:5:h==0?4:0:m}function Co(l,h,m,y,w){switch(l>>>30){case 3:di(h,m,y,w,0);break;case 2:Qt(h,m,y,w);break;case 1:Mn(h,m,y,w)}}function Eo(l,h){var m,y,w=h.M,k=h.Nb,E=l.oc,T=l.pc+40,L=l.oc,M=l.pc+584,$=l.oc,ee=l.pc+600;for(m=0;16>m;++m)E[T+32*m-1]=129;for(m=0;8>m;++m)L[M+32*m-1]=129,$[ee+32*m-1]=129;for(0<w?E[T-1-32]=L[M-1-32]=$[ee-1-32]=129:(i(E,T-32-1,127,21),i(L,M-32-1,127,9),i($,ee-32-1,127,9)),y=0;y<l.za;++y){var te=h.ya[h.aa+y];if(0<y){for(m=-1;16>m;++m)r(E,T+32*m-4,E,T+32*m+12,4);for(m=-1;8>m;++m)r(L,M+32*m-4,L,M+32*m+4,4),r($,ee+32*m-4,$,ee+32*m+4,4)}var J=l.Gd,_e=l.Hd+y,ue=te.ad,Y=te.Hc;if(0<w&&(r(E,T-32,J[_e].y,0,16),r(L,M-32,J[_e].f,0,8),r($,ee-32,J[_e].ea,0,8)),te.Za){var K=E,ve=T-32+16;for(0<w&&(y>=l.za-1?i(K,ve,J[_e].y[15],4):r(K,ve,J[_e+1].y,0,4)),m=0;4>m;m++)K[ve+128+m]=K[ve+256+m]=K[ve+384+m]=K[ve+0+m];for(m=0;16>m;++m,Y<<=2)K=E,ve=T+um[m],Er[te.Ob[m]](K,ve),Co(Y,ue,16*+m,K,ve)}else if(K=ac(y,w,te.Ob[0]),Ui[K](E,T),Y!=0)for(m=0;16>m;++m,Y<<=2)Co(Y,ue,16*+m,E,T+um[m]);for(m=te.Gc,K=ac(y,w,te.Dd),pi[K](L,M),pi[K]($,ee),Y=ue,K=L,ve=M,255&(te=m>>0)&&(170&te?Do(Y,256,K,ve):ur(Y,256,K,ve)),te=$,Y=ee,255&(m>>=8)&&(170&m?Do(ue,320,te,Y):ur(ue,320,te,Y)),w<l.Ub-1&&(r(J[_e].y,0,E,T+480,16),r(J[_e].f,0,L,M+224,8),r(J[_e].ea,0,$,ee+224,8)),m=8*k*l.B,J=l.sa,_e=l.ta+16*y+16*k*l.R,ue=l.qa,te=l.ra+8*y+m,Y=l.Ha,K=l.Ia+8*y+m,m=0;16>m;++m)r(J,_e+m*l.R,E,T+32*m,16);for(m=0;8>m;++m)r(ue,te+m*l.B,L,M+32*m,8),r(Y,K+m*l.B,$,ee+32*m,8)}}function va(l,h,m,y,w,k,E,T,L){var M=[0],$=[0],ee=0,te=L!=null?L.kd:0,J=L??new No;if(l==null||12>m)return 7;J.data=l,J.w=h,J.ha=m,h=[h],m=[m],J.gb=[J.gb];e:{var _e=h,ue=m,Y=J.gb;if(e(l!=null),e(ue!=null),e(Y!=null),Y[0]=0,12<=ue[0]&&!t(l,_e[0],"RIFF")){if(t(l,_e[0]+8,"WEBP")){Y=3;break e}var K=Ie(l,_e[0]+4);if(12>K||4294967286<K){Y=3;break e}if(te&&K>ue[0]-8){Y=7;break e}Y[0]=K,_e[0]+=12,ue[0]-=12}Y=0}if(Y!=0)return Y;for(K=0<J.gb[0],m=m[0];;){e:{var ve=l;ue=h,Y=m;var be=M,ye=$,Fe=_e=[0];if((Pe=ee=[ee])[0]=0,8>Y[0])Y=7;else{if(!t(ve,ue[0],"VP8X")){if(Ie(ve,ue[0]+4)!=10){Y=3;break e}if(18>Y[0]){Y=7;break e}var Ee=Ie(ve,ue[0]+8),He=1+Le(ve,ue[0]+12);if(2147483648<=He*(ve=1+Le(ve,ue[0]+15))){Y=3;break e}Fe!=null&&(Fe[0]=Ee),be!=null&&(be[0]=He),ye!=null&&(ye[0]=ve),ue[0]+=18,Y[0]-=18,Pe[0]=1}Y=0}}if(ee=ee[0],_e=_e[0],Y!=0)return Y;if(ue=!!(2&_e),!K&&ee)return 3;if(k!=null&&(k[0]=!!(16&_e)),E!=null&&(E[0]=ue),T!=null&&(T[0]=0),E=M[0],_e=$[0],ee&&ue&&L==null){Y=0;break}if(4>m){Y=7;break}if(K&&ee||!K&&!ee&&!t(l,h[0],"ALPH")){m=[m],J.na=[J.na],J.P=[J.P],J.Sa=[J.Sa];e:{Ee=l,Y=h,K=m;var Pe=J.gb;be=J.na,ye=J.P,Fe=J.Sa,He=22,e(Ee!=null),e(K!=null),ve=Y[0];var bt=K[0];for(e(be!=null),e(Fe!=null),be[0]=null,ye[0]=null,Fe[0]=0;;){if(Y[0]=ve,K[0]=bt,8>bt){Y=7;break e}var kt=Ie(Ee,ve+4);if(4294967286<kt){Y=3;break e}var vt=8+kt+1&-2;if(He+=vt,0<Pe&&He>Pe){Y=3;break e}if(!t(Ee,ve,"VP8 ")||!t(Ee,ve,"VP8L")){Y=0;break e}if(bt[0]<vt){Y=7;break e}t(Ee,ve,"ALPH")||(be[0]=Ee,ye[0]=ve+8,Fe[0]=kt),ve+=vt,bt-=vt}}if(m=m[0],J.na=J.na[0],J.P=J.P[0],J.Sa=J.Sa[0],Y!=0)break}m=[m],J.Ja=[J.Ja],J.xa=[J.xa];e:if(Pe=l,Y=h,K=m,be=J.gb[0],ye=J.Ja,Fe=J.xa,Ee=Y[0],ve=!t(Pe,Ee,"VP8 "),He=!t(Pe,Ee,"VP8L"),e(Pe!=null),e(K!=null),e(ye!=null),e(Fe!=null),8>K[0])Y=7;else{if(ve||He){if(Pe=Ie(Pe,Ee+4),12<=be&&Pe>be-12){Y=3;break e}if(te&&Pe>K[0]-8){Y=7;break e}ye[0]=Pe,Y[0]+=8,K[0]-=8,Fe[0]=He}else Fe[0]=5<=K[0]&&Pe[Ee+0]==47&&!(Pe[Ee+4]>>5),ye[0]=K[0];Y=0}if(m=m[0],J.Ja=J.Ja[0],J.xa=J.xa[0],h=h[0],Y!=0)break;if(4294967286<J.Ja)return 3;if(T==null||ue||(T[0]=J.xa?2:1),E=[E],_e=[_e],J.xa){if(5>m){Y=7;break}T=E,te=_e,ue=k,l==null||5>m?l=0:5<=m&&l[h+0]==47&&!(l[h+4]>>5)?(K=[0],Pe=[0],be=[0],re(ye=new C,l,h,m),Ge(ye,K,Pe,be)?(T!=null&&(T[0]=K[0]),te!=null&&(te[0]=Pe[0]),ue!=null&&(ue[0]=be[0]),l=1):l=0):l=0}else{if(10>m){Y=7;break}T=_e,l==null||10>m||!zl(l,h+3,m-3)?l=0:(te=l[h+0]|l[h+1]<<8|l[h+2]<<16,ue=16383&(l[h+7]<<8|l[h+6]),l=16383&(l[h+9]<<8|l[h+8]),1&te||3<(te>>1&7)||!(te>>4&1)||te>>5>=J.Ja||!ue||!l?l=0:(E&&(E[0]=ue),T&&(T[0]=l),l=1))}if(!l||(E=E[0],_e=_e[0],ee&&(M[0]!=E||$[0]!=_e)))return 3;L!=null&&(L[0]=J,L.offset=h-L.w,e(4294967286>h-L.w),e(L.offset==L.ha-m));break}return Y==0||Y==7&&ee&&L==null?(k!=null&&(k[0]|=J.na!=null&&0<J.na.length),y!=null&&(y[0]=E),w!=null&&(w[0]=_e),0):Y}function Io(l,h,m){var y=h.width,w=h.height,k=0,E=0,T=y,L=w;if(h.Da=l!=null&&0<l.Da,h.Da&&(T=l.cd,L=l.bd,k=l.v,E=l.j,11>m||(k&=-2,E&=-2),0>k||0>E||0>=T||0>=L||k+T>y||E+L>w))return 0;if(h.v=k,h.j=E,h.va=k+T,h.o=E+L,h.U=T,h.T=L,h.da=l!=null&&0<l.da,h.da){if(!ze(T,L,m=[l.ib],k=[l.hb]))return 0;h.ib=m[0],h.hb=k[0]}return h.ob=l!=null&&l.ob,h.Kb=l==null||!l.Sd,h.da&&(h.ob=h.ib<3*y/4&&h.hb<3*w/4,h.Kb=0),1}function To(l){if(l==null)return 2;if(11>l.S){var h=l.f.RGBA;h.fb+=(l.height-1)*h.A,h.A=-h.A}else h=l.f.kb,l=l.height,h.O+=(l-1)*h.fa,h.fa=-h.fa,h.N+=(l-1>>1)*h.Ab,h.Ab=-h.Ab,h.W+=(l-1>>1)*h.Db,h.Db=-h.Db,h.F!=null&&(h.J+=(l-1)*h.lb,h.lb=-h.lb);return 0}function ya(l,h,m,y){if(y==null||0>=l||0>=h)return 2;if(m!=null){if(m.Da){var w=m.cd,k=m.bd,E=-2&m.v,T=-2&m.j;if(0>E||0>T||0>=w||0>=k||E+w>l||T+k>h)return 2;l=w,h=k}if(m.da){if(!ze(l,h,w=[m.ib],k=[m.hb]))return 2;l=w[0],h=k[0]}}y.width=l,y.height=h;e:{var L=y.width,M=y.height;if(l=y.S,0>=L||0>=M||!(l>=fc&&13>l))l=2;else{if(0>=y.Rd&&y.sd==null){E=k=w=h=0;var $=(T=L*hm[l])*M;if(11>l||(k=(M+1)/2*(h=(L+1)/2),l==12&&(E=(w=L)*M)),(M=s($+2*k+E))==null){l=1;break e}y.sd=M,11>l?((L=y.f.RGBA).eb=M,L.fb=0,L.A=T,L.size=$):((L=y.f.kb).y=M,L.O=0,L.fa=T,L.Fd=$,L.f=M,L.N=0+$,L.Ab=h,L.Cd=k,L.ea=M,L.W=0+$+k,L.Db=h,L.Ed=k,l==12&&(L.F=M,L.J=0+$+2*k),L.Tc=E,L.lb=w)}if(h=1,w=y.S,k=y.width,E=y.height,w>=fc&&13>w)if(11>w)l=y.f.RGBA,h&=(T=Math.abs(l.A))*(E-1)+k<=l.size,h&=T>=k*hm[w],h&=l.eb!=null;else{l=y.f.kb,T=(k+1)/2,$=(E+1)/2,L=Math.abs(l.fa),M=Math.abs(l.Ab);var ee=Math.abs(l.Db),te=Math.abs(l.lb),J=te*(E-1)+k;h&=L*(E-1)+k<=l.Fd,h&=M*($-1)+T<=l.Cd,h=(h&=ee*($-1)+T<=l.Ed)&L>=k&M>=T&ee>=T,h&=l.y!=null,h&=l.f!=null,h&=l.ea!=null,w==12&&(h&=te>=k,h&=J<=l.Tc,h&=l.F!=null)}else h=0;l=h?0:2}}return l!=0||m!=null&&m.fd&&(l=To(y)),l}var _n=64,_a=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ba=24,wa=32,Lo=8,$n=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ce("Predictor0","PredictorAdd0"),V.Predictor0=function(){return 4278190080},V.Predictor1=function(l){return l},V.Predictor2=function(l,h,m){return h[m+0]},V.Predictor3=function(l,h,m){return h[m+1]},V.Predictor4=function(l,h,m){return h[m-1]},V.Predictor5=function(l,h,m){return De(De(l,h[m+1]),h[m+0])},V.Predictor6=function(l,h,m){return De(l,h[m-1])},V.Predictor7=function(l,h,m){return De(l,h[m+0])},V.Predictor8=function(l,h,m){return De(h[m-1],h[m+0])},V.Predictor9=function(l,h,m){return De(h[m+0],h[m+1])},V.Predictor10=function(l,h,m){return De(De(l,h[m-1]),De(h[m+0],h[m+1]))},V.Predictor11=function(l,h,m){var y=h[m+0];return 0>=ot(y>>24&255,l>>24&255,(h=h[m-1])>>24&255)+ot(y>>16&255,l>>16&255,h>>16&255)+ot(y>>8&255,l>>8&255,h>>8&255)+ot(255&y,255&l,255&h)?y:l},V.Predictor12=function(l,h,m){var y=h[m+0];return(Ve((l>>24&255)+(y>>24&255)-((h=h[m-1])>>24&255))<<24|Ve((l>>16&255)+(y>>16&255)-(h>>16&255))<<16|Ve((l>>8&255)+(y>>8&255)-(h>>8&255))<<8|Ve((255&l)+(255&y)-(255&h)))>>>0},V.Predictor13=function(l,h,m){var y=h[m-1];return(tt((l=De(l,h[m+0]))>>24&255,y>>24&255)<<24|tt(l>>16&255,y>>16&255)<<16|tt(l>>8&255,y>>8&255)<<8|tt(l>>0&255,y>>0&255))>>>0};var Eh=V.PredictorAdd0;V.PredictorAdd1=ct,Ce("Predictor2","PredictorAdd2"),Ce("Predictor3","PredictorAdd3"),Ce("Predictor4","PredictorAdd4"),Ce("Predictor5","PredictorAdd5"),Ce("Predictor6","PredictorAdd6"),Ce("Predictor7","PredictorAdd7"),Ce("Predictor8","PredictorAdd8"),Ce("Predictor9","PredictorAdd9"),Ce("Predictor10","PredictorAdd10"),Ce("Predictor11","PredictorAdd11"),Ce("Predictor12","PredictorAdd12"),Ce("Predictor13","PredictorAdd13");var Po=V.PredictorAdd2;ht("ColorIndexInverseTransform","MapARGB","32b",function(l){return l>>8&255},function(l){return l}),ht("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(l){return l},function(l){return l>>8&255});var oc,cr=V.ColorIndexInverseTransform,xa=V.MapARGB,lc=V.VP8LColorIndexInverseTransformAlpha,cc=V.MapAlpha,Ri=V.VP8LPredictorsAdd=[];Ri.length=16,(V.VP8LPredictors=[]).length=16,(V.VP8LPredictorsAdd_C=[]).length=16,(V.VP8LPredictors_C=[]).length=16;var ks,Gn,On,Fi,ui,hi,Na,di,Qt,Do,Mn,ur,Sa,uc,Oo,Cs,Es,ji,Is,Aa,Ts,Bi,Mo,hr,dr,Rt,Ft,Zt,cn=s(511),fi=s(2041),Ro=s(225),ka=s(767),hc=0,Ih=fi,dc=Ro,tr=ka,fr=cn,fc=0,pc=1,Zp=2,mc=3,gc=4,Th=5,em=6,Lh=7,Ph=8,vc=9,Dh=10,Vv=[2,3,7],Wv=[3,3,11],tm=[280,256,256,256,40],zv=[0,1,1,1,0],Hv=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],$v=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Gv=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Yv=8,Oh=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Mh=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Fo=null,Kv=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Xv=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],nm=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Jv=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Qv=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Zv=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],e5=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ui=[],Er=[],pi=[],t5=1,rm=2,qi=[],pr=[];fe("UpsampleRgbLinePair",mt,3),fe("UpsampleBgrLinePair",Vt,3),fe("UpsampleRgbaLinePair",Cr,4),fe("UpsampleBgraLinePair",dn,4),fe("UpsampleArgbLinePair",An,4),fe("UpsampleRgba4444LinePair",sn,2),fe("UpsampleRgb565LinePair",$t,2);var n5=V.UpsampleRgbLinePair,r5=V.UpsampleBgrLinePair,im=V.UpsampleRgbaLinePair,sm=V.UpsampleBgraLinePair,am=V.UpsampleArgbLinePair,om=V.UpsampleRgba4444LinePair,i5=V.UpsampleRgb565LinePair,yc=16,_c=1<<yc-1,jo=-227,Rh=482,lm=6,s5=(256<<lm)-1,cm=0,a5=s(256),o5=s(256),l5=s(256),c5=s(256),u5=s(Rh-jo),h5=s(Rh-jo);Yr("YuvToRgbRow",mt,3),Yr("YuvToBgrRow",Vt,3),Yr("YuvToRgbaRow",Cr,4),Yr("YuvToBgraRow",dn,4),Yr("YuvToArgbRow",An,4),Yr("YuvToRgba4444Row",sn,2),Yr("YuvToRgb565Row",$t,2);var um=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],bc=[0,2,8],d5=[8,7,6,4,4,2,2,2,1,1,1,1],f5=1;this.WebPDecodeRGBA=function(l,h,m,y,w){var k=pc,E=new ma,T=new br;E.ba=T,T.S=k,T.width=[T.width],T.height=[T.height];var L=T.width,M=T.height,$=new ai;if($==null||l==null)var ee=2;else e($!=null),ee=va(l,h,m,$.width,$.height,$.Pd,$.Qd,$.format,null);if(ee!=0?L=0:(L!=null&&(L[0]=$.width[0]),M!=null&&(M[0]=$.height[0]),L=1),L){T.width=T.width[0],T.height=T.height[0],y!=null&&(y[0]=T.width),w!=null&&(w[0]=T.height);e:{if(y=new la,(w=new No).data=l,w.w=h,w.ha=m,w.kd=1,h=[0],e(w!=null),((l=va(w.data,w.w,w.ha,null,null,null,h,null,w))==0||l==7)&&h[0]&&(l=4),(h=l)==0){if(e(E!=null),y.data=w.data,y.w=w.w+w.offset,y.ha=w.ha-w.offset,y.put=qr,y.ac=yn,y.bc=Vr,y.ma=E,w.xa){if((l=lr())==null){E=1;break e}if(function(te,J){var _e=[0],ue=[0],Y=[0];t:for(;;){if(te==null)return 0;if(J==null)return te.a=2,0;if(te.l=J,te.a=0,re(te.m,J.data,J.w,J.ha),!Ge(te.m,_e,ue,Y)){te.a=3;break t}if(te.xb=rm,J.width=_e[0],J.height=ue[0],!Hr(_e[0],ue[0],1,te,null))break t;return 1}return e(te.a!=0),0}(l,y)){if(y=(h=ya(y.width,y.height,E.Oa,E.ba))==0){t:{y=l;n:for(;;){if(y==null){y=0;break t}if(e(y.s.yc!=null),e(y.s.Ya!=null),e(0<y.s.Wb),e((m=y.l)!=null),e((w=m.ma)!=null),y.xb!=0){if(y.ca=w.ba,y.tb=w.tb,e(y.ca!=null),!Io(w.Oa,m,mc)){y.a=2;break n}if(!ws(y,m.width)||m.da)break n;if((m.da||St(y.ca.S))&&Z(),11>y.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),y.ca.f.kb.F!=null&&Z()),y.Pb&&0<y.s.ua&&y.s.vb.X==null&&!$e(y.s.vb,y.s.Wa.Xa)){y.a=1;break n}y.xb=0}if(!Sr(y,y.V,y.Ba,y.c,y.i,m.o,na))break n;w.Dc=y.Ma,y=1;break t}e(y.a!=0),y=0}y=!y}y&&(h=l.a)}else h=l.a}else{if((l=new ch)==null){E=1;break e}if(l.Fa=w.na,l.P=w.P,l.qc=w.Sa,Hl(l,y)){if((h=ya(y.width,y.height,E.Oa,E.ba))==0){if(l.Aa=0,m=E.Oa,e((w=l)!=null),m!=null){if(0<(L=0>(L=m.Md)?0:100<L?255:255*L/100)){for(M=$=0;4>M;++M)12>(ee=w.pb[M]).lc&&(ee.ia=L*d5[0>ee.lc?0:ee.lc]>>3),$|=ee.ia;$&&(alert("todo:VP8InitRandom"),w.ia=1)}w.Ga=m.Id,100<w.Ga?w.Ga=100:0>w.Ga&&(w.Ga=0)}uh(l,y)||(h=l.a)}}else h=l.a}h==0&&E.Oa!=null&&E.Oa.fd&&(h=To(E.ba))}E=h}k=E!=0?null:11>k?T.f.RGBA.eb:T.f.kb.y}else k=null;return k};var hm=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(V,se){for(var me="",D=0;D<4;D++)me+=String.fromCharCode(V[se++]);return me}function f(V,se){return(V[se+0]<<0|V[se+1]<<8|V[se+2]<<16)>>>0}function p(V,se){return(V[se+0]<<0|V[se+1]<<8|V[se+2]<<16|V[se+3]<<24)>>>0}new c;var v=[0],g=[0],N=[],S=new c,I=n,b=function(V,se){var me={},D=0,O=!1,G=0,q=0;if(me.frames=[],!function(F,U,H,X){for(var ne=0;ne<X;ne++)if(F[U+ne]!=H.charCodeAt(ne))return!0;return!1}(V,se,"RIFF",4)){var ce,le;for(p(V,se+=4),se+=8;se<V.length;){var he=u(V,se),re=p(V,se+=4);se+=4;var de=re+(1&re);switch(he){case"VP8 ":case"VP8L":me.frames[D]===void 0&&(me.frames[D]={}),(C=me.frames[D]).src_off=O?q:se-8,C.src_size=G+re+8,D++,O&&(O=!1,G=0,q=0);break;case"VP8X":(C=me.header={}).feature_flags=V[se];var ge=se+4;C.canvas_width=1+f(V,ge),ge+=3,C.canvas_height=1+f(V,ge),ge+=3;break;case"ALPH":O=!0,G=de+8,q=se-8;break;case"ANIM":(C=me.header).bgcolor=p(V,se),ge=se+4,C.loop_count=(ce=V)[(le=ge)+0]<<0|ce[le+1]<<8,ge+=2;break;case"ANMF":var Te,C;(C=me.frames[D]={}).offset_x=2*f(V,se),se+=3,C.offset_y=2*f(V,se),se+=3,C.width=1+f(V,se),se+=3,C.height=1+f(V,se),se+=3,C.duration=f(V,se),se+=3,Te=V[se++],C.dispose=1&Te,C.blend=Te>>1&1}he!="ANMF"&&(se+=de)}return me}}(I,0);b.response=I,b.rgbaoutput=!0,b.dataurl=!1;var A=b.header?b.header:null,P=b.frames?b.frames:null;if(A){A.loop_counter=A.loop_count,v=[A.canvas_height],g=[A.canvas_width];for(var R=0;R<P.length&&P[R].blend!=0;R++);}var W=P[0],ie=S.WebPDecodeRGBA(I,W.src_off,W.src_size,g,v);W.rgba=ie,W.imgwidth=g[0],W.imgheight=v[0];for(var Q=0;Q<g[0]*v[0]*4;Q++)N[Q]=ie[Q];return this.width=g,this.height=v,this.data=N,this}(function(n){var e=function(){return typeof Bf=="function"},t=function(v,g,N,S){var I=4,b=a;switch(S){case n.image_compression.FAST:I=1,b=s;break;case n.image_compression.MEDIUM:I=6,b=o;break;case n.image_compression.SLOW:I=9,b=c}v=r(v,g,N,b);var A=Bf(v,{level:I});return n.__addimage__.arrayBufferToBinaryString(A)},r=function(v,g,N,S){for(var I,b,A,P=v.length/g,R=new Uint8Array(v.length+P),W=f(),ie=0;ie<P;ie+=1){if(A=ie*g,I=v.subarray(A,A+g),S)R.set(S(I,N,b),A+ie);else{for(var Q,V=W.length,se=[];Q<V;Q+=1)se[Q]=W[Q](I,N,b);var me=p(se.concat());R.set(se[me],A+ie)}b=I}return R},i=function(v){var g=Array.apply([],v);return g.unshift(0),g},s=function(v,g){var N,S=[],I=v.length;S[0]=1;for(var b=0;b<I;b+=1)N=v[b-g]||0,S[b+1]=v[b]-N+256&255;return S},a=function(v,g,N){var S,I=[],b=v.length;I[0]=2;for(var A=0;A<b;A+=1)S=N&&N[A]||0,I[A+1]=v[A]-S+256&255;return I},o=function(v,g,N){var S,I,b=[],A=v.length;b[0]=3;for(var P=0;P<A;P+=1)S=v[P-g]||0,I=N&&N[P]||0,b[P+1]=v[P]+256-(S+I>>>1)&255;return b},c=function(v,g,N){var S,I,b,A,P=[],R=v.length;P[0]=4;for(var W=0;W<R;W+=1)S=v[W-g]||0,I=N&&N[W]||0,b=N&&N[W-g]||0,A=u(S,I,b),P[W+1]=v[W]-A+256&255;return P},u=function(v,g,N){if(v===g&&g===N)return v;var S=Math.abs(g-N),I=Math.abs(v-N),b=Math.abs(v+g-N-N);return S<=I&&S<=b?v:I<=b?g:N},f=function(){return[i,s,a,o,c]},p=function(v){var g=v.map(function(N){return N.reduce(function(S,I){return S+Math.abs(I)},0)});return g.indexOf(Math.min.apply(null,g))};n.processPNG=function(v,g,N,S){var I,b,A,P,R,W,ie,Q,V,se,me,D,O,G,q,ce=this.decode.FLATE_DECODE,le="";if(this.__addimage__.isArrayBuffer(v)&&(v=new Uint8Array(v)),this.__addimage__.isArrayBufferView(v)){if(v=(A=new PC(v)).imgData,b=A.bits,I=A.colorSpace,R=A.colors,[4,6].indexOf(A.colorType)!==-1){if(A.bits===8){V=(Q=A.pixelBitlength==32?new Uint32Array(A.decodePixels().buffer):A.pixelBitlength==16?new Uint16Array(A.decodePixels().buffer):new Uint8Array(A.decodePixels().buffer)).length,me=new Uint8Array(V*A.colors),se=new Uint8Array(V);var he,re=A.pixelBitlength-A.bits;for(G=0,q=0;G<V;G++){for(O=Q[G],he=0;he<re;)me[q++]=O>>>he&255,he+=A.bits;se[G]=O>>>he&255}}if(A.bits===16){V=(Q=new Uint32Array(A.decodePixels().buffer)).length,me=new Uint8Array(V*(32/A.pixelBitlength)*A.colors),se=new Uint8Array(V*(32/A.pixelBitlength)),D=A.colors>1,G=0,q=0;for(var de=0;G<V;)O=Q[G++],me[q++]=O>>>0&255,D&&(me[q++]=O>>>16&255,O=Q[G++],me[q++]=O>>>0&255),se[de++]=O>>>16&255;b=8}S!==n.image_compression.NONE&&e()?(v=t(me,A.width*A.colors,A.colors,S),ie=t(se,A.width,1,S)):(v=me,ie=se,ce=void 0)}if(A.colorType===3&&(I=this.color_spaces.INDEXED,W=A.palette,A.transparency.indexed)){var ge=A.transparency.indexed,Te=0;for(G=0,V=ge.length;G<V;++G)Te+=ge[G];if((Te/=255)===V-1&&ge.indexOf(0)!==-1)P=[ge.indexOf(0)];else if(Te!==V){for(Q=A.decodePixels(),se=new Uint8Array(Q.length),G=0,V=Q.length;G<V;G++)se[G]=ge[Q[G]];ie=t(se,A.width,1)}}var C=function(F){var U;switch(F){case n.image_compression.FAST:U=11;break;case n.image_compression.MEDIUM:U=13;break;case n.image_compression.SLOW:U=14;break;default:U=12}return U}(S);return ce===this.decode.FLATE_DECODE&&(le="/Predictor "+C+" "),le+="/Colors "+R+" /BitsPerComponent "+b+" /Columns "+A.width,(this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),(ie&&this.__addimage__.isArrayBuffer(ie)||this.__addimage__.isArrayBufferView(ie))&&(ie=this.__addimage__.arrayBufferToBinaryString(ie)),{alias:N,data:v,index:g,filter:ce,decodeParameters:le,transparency:P,palette:W,sMask:ie,predictor:C,width:A.width,height:A.height,bitsPerComponent:b,colorSpace:I}}}})(Ye.API),function(n){n.processGIF89A=function(e,t,r,i){var s=new DC(e),a=s.width,o=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:a,height:o},f=new Sd(100).encode(u,100);return n.processJPEG.call(this,f,t,r,i)},n.processGIF87A=n.processGIF89A}(Ye.API),Lr.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Lr.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Mt.log("bit decode error:"+t)}},Lr.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var c=this.palette[s>>7-o&1];this.data[a+4*o]=c.blue,this.data[a+4*o+1]=c.green,this.data[a+4*o+2]=c.red,this.data[a+4*o+3]=255}t!==0&&(this.pos+=4-t)}},Lr.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,o=s>>4,c=15&s,u=this.palette[o];if(this.data[a]=u.blue,this.data[a+1]=u.green,this.data[a+2]=u.red,this.data[a+3]=255,2*i+1>=this.width)break;u=this.palette[c],this.data[a+4]=u.blue,this.data[a+4+1]=u.green,this.data[a+4+2]=u.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},Lr.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}n!==0&&(this.pos+=4-n)}},Lr.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,o=(s>>5&e)/e*255|0,c=(s>>10&e)/e*255|0,u=s>>15?255:0,f=r*this.width*4+4*i;this.data[f]=c,this.data[f+1]=o,this.data[f+2]=a,this.data[f+3]=u}this.pos+=n}},Lr.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,c=(a>>5&t)/t*255|0,u=(a>>11)/e*255|0,f=i*this.width*4+4*s;this.data[f]=u,this.data[f+1]=c,this.data[f+2]=o,this.data[f+3]=255}this.pos+=n}},Lr.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},Lr.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=a}},Lr.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,i){var s=new Lr(e,!1),a=s.width,o=s.height,c={data:s.getData(),width:a,height:o},u=new Sd(100).encode(c,100);return n.processJPEG.call(this,u,t,r,i)}}(Ye.API),_g.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,i){var s=new _g(e),a=s.width,o=s.height,c={data:s.getData(),width:a,height:o},u=new Sd(100).encode(c,100);return n.processJPEG.call(this,u,t,r,i)}}(Ye.API),Ye.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),o=0,c=0,u=0;u<i;u+=4){var f=r[u],p=r[u+1],v=r[u+2],g=r[u+3];s[o++]=f,s[o++]=p,s[o++]=v,a[c++]=g}var N=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:N,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Ye.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Da=Ye.API,Uc=Da.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:i.metadata.Unicode.widths,c=o.fof?o.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,f=u.fof?u.fof:1,p=e.doKerning!==!1,v=0,g=n.length,N=0,S=o[0]||c,I=[];for(t=0;t<g;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?I.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/s)||0)/1e3):(v=p&&wt(u[r])==="object"&&!isNaN(parseInt(u[r][N],10))?u[r][N]/f:0,I.push((o[r]||S)/c+v)),N=r;return I},mg=Da.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Da.processArabic&&(n=Da.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:Uc.apply(this,arguments).reduce(function(s,a){return s+a},0)},gg=function(n,e,t,r){for(var i=[],s=0,a=n.length,o=0;s!==a&&o+e[s]<t;)o+=e[s],s++;i.push(n.slice(0,s));var c=s;for(o=0;s!==a;)o+e[s]>r&&(i.push(n.slice(c,s)),o=0,c=s),o+=e[s],s++;return c!==s&&i.push(n.slice(c,s)),i},vg=function(n,e,t){t||(t={});var r,i,s,a,o,c,u,f=[],p=[f],v=t.textIndent||0,g=0,N=0,S=n.split(" "),I=Uc.apply(this,[" ",t])[0];if(c=t.lineIndent===-1?S[0].length+2:t.lineIndent||0){var b=Array(c).join(" "),A=[];S.map(function(R){(R=R.split(/\s*\n/)).length>1?A=A.concat(R.map(function(W,ie){return(ie&&W.length?`
`:"")+W})):A.push(R[0])}),S=A,c=mg.apply(this,[b,t])}for(s=0,a=S.length;s<a;s++){var P=0;if(r=S[s],c&&r[0]==`
`&&(r=r.substr(1),P=1),v+g+(N=(i=Uc.apply(this,[r,t])).reduce(function(R,W){return R+W},0))>e||P){if(N>e){for(o=gg.apply(this,[r,i,e-(v+g),e]),f.push(o.shift()),f=[o.pop()];o.length;)p.push([o.shift()]);N=i.slice(r.length-(f[0]?f[0].length:0)).reduce(function(R,W){return R+W},0)}else f=[r];p.push(f),v=N+c,g=I}else f.push(r),v+=g+N,g=I}return u=c?function(R,W){return(W?b:"")+R.join(" ")}:function(R){return R.join(" ")},p.map(u)},Da.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var p=this.internal.getFont(f.fontName,f.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/i;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=t.lineIndent;var o,c,u=[];for(o=0,c=r.length;o<c;o++)u=u.concat(vg.apply(this,[r[o],a,s]));return u},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},i=0;i<e.length;i++)t[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(p){return"0x"+parseInt(p,10).toString(16)},a=n.__fontmetrics__.compress=function(p){var v,g,N,S,I=["{"];for(var b in p){if(v=p[b],isNaN(parseInt(b,10))?g="'"+b+"'":(b=parseInt(b,10),g=(g=s(b).slice(2)).slice(0,-1)+r[g.slice(-1)]),typeof v=="number")v<0?(N=s(v).slice(3),S="-"):(N=s(v).slice(2),S=""),N=S+N.slice(0,-1)+r[N.slice(-1)];else{if(wt(v)!=="object")throw new Error("Don't know what to do with value type "+wt(v)+".");N=a(v)}I.push(g+N)}return I.push("}"),I.join("")},o=n.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,g,N,S,I={},b=1,A=I,P=[],R="",W="",ie=p.length-1,Q=1;Q<ie;Q+=1)(S=p[Q])=="'"?v?(N=v.join(""),v=void 0):v=[]:v?v.push(S):S=="{"?(P.push([A,N]),A={},N=void 0):S=="}"?((g=P.pop())[0][g[1]]=A,N=void 0,A=g[0]):S=="-"?b=-1:N===void 0?t.hasOwnProperty(S)?(R+=t[S],N=parseInt(R,16)*b,b=1,R=""):R+=S:t.hasOwnProperty(S)?(W+=t[S],A[N]=parseInt(W,16)*b,b=1,N=void 0,W=""):W+=S;return I},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},f={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(p){var v=p.font,g=f.Unicode[v.postScriptName];g&&(v.metadata.Unicode={},v.metadata.Unicode.widths=g.widths,v.metadata.Unicode.kerning=g.kerning);var N=u.Unicode[v.postScriptName];N&&(v.metadata.Unicode.encoding=N,v.encoding=N.codePages[0])}])}(Ye.API),function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=t.charCodeAt(s);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,s=t.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(ol(o)),a.metadata=n.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,r)}}])}(Ye),function(n){function e(){return(Ke.canvg?Promise.resolve(Ke.canvg):Of(()=>import("./index.es-BAOV3Uu9.js"),__vite__mapDeps([0,1]),import.meta.url)).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Ye.API.addSvgAsImage=function(t,r,i,s,a,o,c,u){if(isNaN(r)||isNaN(i))throw Mt.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw Mt.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=s,f.height=a;var p=f.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,f.width,f.height);var v={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return e().then(function(N){return N.fromString(p,t,v)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(N){return N.render(v)}).then(function(){g.addImage(f.toDataURL("image/jpeg",1),r,i,s,a,c,u)})}}(),Ye.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},Ye.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),c=[],u=0,f=0,p=0;function v(N,S){var I,b=!1;for(I=0;I<N.length;I+=1)N[I]===S&&(b=!0);return b}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var g=o.length;for(p=0;p<g;p+=1)t[o[p]].value=t[o[p]].defaultValue,t[o[p]].explicitSet=!1}if(wt(n)==="object"){for(i in n)if(s=n[i],v(o,i)&&s!==void 0){if(t[i].type==="boolean"&&typeof s=="boolean")t[i].value=s;else if(t[i].type==="name"&&v(t[i].valueSet,s))t[i].value=s;else if(t[i].type==="integer"&&Number.isInteger(s))t[i].value=s;else if(t[i].type==="array"){for(u=0;u<s.length;u+=1)if(r=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(f=0;f<s[u].length;f+=1)typeof s[u][f]!="number"&&(r=!1);r===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}t[i].value="["+c.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var N,S=[];for(N in t)t[N].explicitSet===!0&&(t[N].type==="name"?S.push("/"+N+" /"+t[N].value):S.push("/"+N+" "+t[N].value));S.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+S.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+a.length+o.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+a+o+c),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Ye.API),function(n){var e=n.API,t=e.pdfEscape16=function(s,a){for(var o,c=a.metadata.Unicode.widths,u=["","0","00","000","0000"],f=[""],p=0,v=s.length;p<v;++p){if(o=a.metadata.characterToGlyph(s.charCodeAt(p)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=s.charCodeAt(p),c.indexOf(o)==-1&&(c.push(o),c.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return f.join("");o=o.toString(16),f.push(u[4-o.length],o)}return f.join("")},r=function(s){var a,o,c,u,f,p,v;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],p=0,v=(o=Object.keys(s).sort(function(g,N){return g-N})).length;p<v;p++)a=o[p],c.length>=100&&(f+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(u=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),c.push("<"+a+"><"+u+">"));return c.length&&(f+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),f+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(a){var o=a.font,c=a.out,u=a.newObject,f=a.putStream;if(o.metadata instanceof n.API.TTFFont&&o.encoding==="Identity-H"){for(var p=o.metadata.Unicode.widths,v=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),g="",N=0;N<v.length;N++)g+=String.fromCharCode(v[N]);var S=u();f({data:g,addLength1:!0,objectId:S}),c("endobj");var I=u();f({data:r(o.metadata.toUnicode),addLength1:!0,objectId:I}),c("endobj");var b=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Ra(o.fontName)),c("/FontFile2 "+S+" 0 R"),c("/FontBBox "+n.API.PDFObject.convert(o.metadata.bbox)),c("/Flags "+o.metadata.flags),c("/StemV "+o.metadata.stemV),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c(">>"),c("endobj");var A=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+Ra(o.fontName)),c("/FontDescriptor "+b+" 0 R"),c("/W "+n.API.PDFObject.convert(p)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+o.encoding+")"),c(">>"),c(">>"),c("endobj"),o.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+I+" 0 R"),c("/BaseFont /"+Ra(o.fontName)),c("/Encoding /"+o.encoding),c("/DescendantFonts ["+A+" 0 R]"),c(">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(a){var o=a.font,c=a.out,u=a.newObject,f=a.putStream;if(o.metadata instanceof n.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var p=o.metadata.rawData,v="",g=0;g<p.length;g++)v+=String.fromCharCode(p[g]);var N=u();f({data:v,addLength1:!0,objectId:N}),c("endobj");var S=u();f({data:r(o.metadata.toUnicode),addLength1:!0,objectId:S}),c("endobj");var I=u();c("<<"),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c("/StemV "+o.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+N+" 0 R"),c("/Flags 96"),c("/FontBBox "+n.API.PDFObject.convert(o.metadata.bbox)),c("/FontName /"+Ra(o.fontName)),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c(">>"),c("endobj"),o.objectNumber=u();for(var b=0;b<o.metadata.hmtx.widths.length;b++)o.metadata.hmtx.widths[b]=parseInt(o.metadata.hmtx.widths[b]*(1e3/o.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+S+" 0 R/BaseFont/"+Ra(o.fontName)+"/FontDescriptor "+I+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]);var i=function(s){var a,o=s.text||"",c=s.x,u=s.y,f=s.options||{},p=s.mutex||{},v=p.pdfEscape,g=p.activeFontKey,N=p.fonts,S=g,I="",b=0,A="",P=N[S].encoding;if(N[S].encoding!=="Identity-H")return{text:o,x:c,y:u,options:f,mutex:p};for(A=o,S=g,Array.isArray(o)&&(A=o[0]),b=0;b<A.length;b+=1)N[S].metadata.hasOwnProperty("cmap")&&(a=N[S].metadata.cmap.unicode.codeMap[A[b].charCodeAt(0)]),a||A[b].charCodeAt(0)<256&&N[S].metadata.hasOwnProperty("Unicode")?I+=A[b]:I+="";var R="";return parseInt(S.slice(1))<14||P==="WinAnsiEncoding"?R=v(I,S).split("").map(function(W){return W.charCodeAt(0).toString(16)}).join(""):P==="Identity-H"&&(R=t(I,N[S])),p.isHex=!0,{text:R,x:c,y:u,options:f,mutex:p}};e.events.push(["postProcessText",function(s){var a=s.text||"",o=[],c={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var u=0;for(u=0;u<a.length;u+=1)Array.isArray(a[u])&&a[u].length===3?o.push([i(Object.assign({},c,{text:a[u][0]})).text,a[u][1],a[u][2]]):o.push(i(Object.assign({},c,{text:a[u]})).text);s.text=o}else s.text=i(Object.assign({},c,{text:a})).text}])}(Ye),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Ye.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,s,a,o,c,u,f,p=e,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],N={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},S={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},I=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],b=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),A=!1,P=0;this.__bidiEngine__={};var R=function(D){var O=D.charCodeAt(),G=O>>8,q=S[G];return q!==void 0?p[256*q+(255&O)]:G===252||G===253?"AL":b.test(G)?"L":G===8?"R":"N"},W=function(D){for(var O,G=0;G<D.length;G++){if((O=R(D.charAt(G)))==="L")return!1;if(O==="R")return!0}return!1},ie=function(D,O,G,q){var ce,le,he,re,de=O[q];switch(de){case"L":case"R":A=!1;break;case"N":case"AN":break;case"EN":A&&(de="AN");break;case"AL":A=!0,de="R";break;case"WS":de="N";break;case"CS":q<1||q+1>=O.length||(ce=G[q-1])!=="EN"&&ce!=="AN"||(le=O[q+1])!=="EN"&&le!=="AN"?de="N":A&&(le="AN"),de=le===ce?le:"N";break;case"ES":de=(ce=q>0?G[q-1]:"B")==="EN"&&q+1<O.length&&O[q+1]==="EN"?"EN":"N";break;case"ET":if(q>0&&G[q-1]==="EN"){de="EN";break}if(A){de="N";break}for(he=q+1,re=O.length;he<re&&O[he]==="ET";)he++;de=he<re&&O[he]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(re=O.length,he=q+1;he<re&&O[he]==="NSM";)he++;if(he<re){var ge=D[q],Te=ge>=1425&&ge<=2303||ge===64286;if(ce=O[he],Te&&(ce==="R"||ce==="AL")){de="R";break}}}de=q<1||(ce=O[q-1])==="B"?"N":G[q-1];break;case"B":A=!1,i=!0,de=P;break;case"S":s=!0,de="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":A=!1;break;case"BN":de="N"}return de},Q=function(D,O,G){var q=D.split("");return G&&V(q,G,{hiLevel:P}),q.reverse(),O&&O.reverse(),q.join("")},V=function(D,O,G){var q,ce,le,he,re,de=-1,ge=D.length,Te=0,C=[],F=P?g:v,U=[];for(A=!1,i=!1,s=!1,ce=0;ce<ge;ce++)U[ce]=R(D[ce]);for(le=0;le<ge;le++){if(re=Te,C[le]=ie(D,U,C,le),q=240&(Te=F[re][N[C[le]]]),Te&=15,O[le]=he=F[Te][5],q>0)if(q===16){for(ce=de;ce<le;ce++)O[ce]=1;de=-1}else de=-1;if(F[Te][6])de===-1&&(de=le);else if(de>-1){for(ce=de;ce<le;ce++)O[ce]=he;de=-1}U[le]==="B"&&(O[le]=0),G.hiLevel|=he}s&&function(H,X,ne){for(var ae=0;ae<ne;ae++)if(H[ae]==="S"){X[ae]=P;for(var oe=ae-1;oe>=0&&H[oe]==="WS";oe--)X[oe]=P}}(U,O,ge)},se=function(D,O,G,q,ce){if(!(ce.hiLevel<D)){if(D===1&&P===1&&!i)return O.reverse(),void(G&&G.reverse());for(var le,he,re,de,ge=O.length,Te=0;Te<ge;){if(q[Te]>=D){for(re=Te+1;re<ge&&q[re]>=D;)re++;for(de=Te,he=re-1;de<he;de++,he--)le=O[de],O[de]=O[he],O[he]=le,G&&(le=G[de],G[de]=G[he],G[he]=le);Te=re}Te++}}},me=function(D,O,G){var q=D.split(""),ce={hiLevel:P};return G||(G=[]),V(q,G,ce),function(le,he,re){if(re.hiLevel!==0&&f)for(var de,ge=0;ge<le.length;ge++)he[ge]===1&&(de=I.indexOf(le[ge]))>=0&&(le[ge]=I[de+1])}(q,G,ce),se(2,q,O,G,ce),se(1,q,O,G,ce),q.join("")};return this.__bidiEngine__.doBidiReorder=function(D,O,G){if(function(ce,le){if(le)for(var he=0;he<ce.length;he++)le[he]=he;o===void 0&&(o=W(ce)),u===void 0&&(u=W(ce))}(D,O),a||!c||u)if(a&&c&&o^u)P=o?1:0,D=Q(D,O,G);else if(!a&&c&&u)P=o?1:0,D=me(D,O,G),D=Q(D,O);else if(!a||o||c||u){if(a&&!c&&o^u)D=Q(D,O),o?(P=0,D=me(D,O,G)):(P=1,D=me(D,O,G),D=Q(D,O));else if(a&&o&&!c&&u)P=1,D=me(D,O,G),D=Q(D,O);else if(!a&&!c&&o^u){var q=f;o?(P=1,D=me(D,O,G),P=0,f=!1,D=me(D,O,G),f=q):(P=0,D=me(D,O,G),D=Q(D,O),P=1,f=!1,D=me(D,O,G),f=q,D=Q(D,O))}}else P=0,D=me(D,O,G);else P=o?1:0,D=me(D,O,G);return D},this.__bidiEngine__.setOptions=function(D){D&&(a=D.isInputVisual,c=D.isOutputVisual,o=D.isInputRtl,u=D.isOutputRtl,f=D.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),a=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(a=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?a.push([t.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):a.push([t.doBidiReorder(i[o])]);r.text=a}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(Ye),Ye.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new ms(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new YC(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new OC(this.contents),this.head=new RC(this),this.name=new qC(this),this.cmap=new Bv(this),this.toUnicode={},this.hhea=new FC(this),this.maxp=new VC(this),this.hmtx=new WC(this),this.post=new BC(this),this.os2=new jC(this),this.loca=new GC(this),this.glyf=new zC(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,c,u;for(u=[],a=0,o=(c=this.bbox).length;a<o;a++)e=c[a],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,s,a,o;for(a=0,s=0,o=(e=""+e).length;0<=o?s<o:s>o;s=0<=o?++s:--s)i=e.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return a*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var Br,ms=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,s,a,o,c;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^a)+256*(255^o)+(255^c)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*s+65536*a+256*o+c},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)t=e[r],s.push(this.writeByte(t));return s},n}(),OC=function(){var n;function e(t){var r,i,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,s,a,o,c,u,f,p,v,g,N,S;for(S in g=Object.keys(t).length,c=Math.log(2),p=16*Math.floor(Math.log(g)/c),a=Math.floor(p/c),f=16*g-p,(i=new ms).writeInt(this.scalarType),i.writeShort(g),i.writeShort(p),i.writeShort(a),i.writeShort(f),s=16*g,u=i.pos+s,o=null,N=[],t)for(v=t[S],i.writeString(S),i.writeInt(n(v)),i.writeInt(u),i.writeInt(v.length),N=N.concat(v),S==="head"&&(o=u),u+=v.length;u%4;)N.push(0),u++;return i.write(N),r=2981146554-n(i.data),i.pos=o+8,i.writeUInt32(r),i.data},n=function(t){var r,i,s,a;for(t=Uv.call(t);t.length%4;)t.push(0);for(s=new ms(t),i=0,r=0,a=t.length;r<a;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),MC={}.hasOwnProperty,si=function(n,e){for(var t in e)MC.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};Br=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var RC=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return si(e,Br),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new ms).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),bg=function(){function n(e,t){var r,i,s,a,o,c,u,f,p,v,g,N,S,I,b,A,P;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(g=e.readUInt16(),v=g/2,e.pos+=6,s=function(){var R,W;for(W=[],c=R=0;0<=v?R<v:R>v;c=0<=v?++R:--R)W.push(e.readUInt16());return W}(),e.pos+=2,S=function(){var R,W;for(W=[],c=R=0;0<=v?R<v:R>v;c=0<=v?++R:--R)W.push(e.readUInt16());return W}(),u=function(){var R,W;for(W=[],c=R=0;0<=v?R<v:R>v;c=0<=v?++R:--R)W.push(e.readUInt16());return W}(),f=function(){var R,W;for(W=[],c=R=0;0<=v?R<v:R>v;c=0<=v?++R:--R)W.push(e.readUInt16());return W}(),i=(this.length-e.pos+this.offset)/2,o=function(){var R,W;for(W=[],c=R=0;0<=i?R<i:R>i;c=0<=i?++R:--R)W.push(e.readUInt16());return W}(),c=b=0,P=s.length;b<P;c=++b)for(I=s[c],r=A=N=S[c];N<=I?A<=I:A>=I;r=N<=I?++A:--A)f[c]===0?a=r+u[c]:(a=o[f[c]/2+(r-N)-(v-c)]||0)!==0&&(a+=u[c]),this.codeMap[r]=65535&a}e.pos=p}return n.encode=function(e,t){var r,i,s,a,o,c,u,f,p,v,g,N,S,I,b,A,P,R,W,ie,Q,V,se,me,D,O,G,q,ce,le,he,re,de,ge,Te,C,F,U,H,X,ne,ae,oe,Se,xe,Le;switch(q=new ms,a=Object.keys(e).sort(function(Ie,$e){return Ie-$e}),t){case"macroman":for(S=0,I=function(){var Ie=[];for(N=0;N<256;++N)Ie.push(0);return Ie}(),A={0:0},s={},ce=0,de=a.length;ce<de;ce++)A[oe=e[i=a[ce]]]==null&&(A[oe]=++S),s[i]={old:e[i],new:A[e[i]]},I[i]=A[e[i]];return q.writeUInt16(1),q.writeUInt16(0),q.writeUInt32(12),q.writeUInt16(0),q.writeUInt16(262),q.writeUInt16(0),q.write(I),{charMap:s,subtable:q.data,maxGlyphID:S+1};case"unicode":for(O=[],p=[],P=0,A={},r={},b=u=null,le=0,ge=a.length;le<ge;le++)A[W=e[i=a[le]]]==null&&(A[W]=++P),r[i]={old:W,new:A[W]},o=A[W]-i,b!=null&&o===u||(b&&p.push(b),O.push(i),u=o),b=i;for(b&&p.push(b),p.push(65535),O.push(65535),me=2*(se=O.length),V=2*Math.pow(Math.log(se)/Math.LN2,2),v=Math.log(V/2)/Math.LN2,Q=2*se-V,c=[],ie=[],g=[],N=he=0,Te=O.length;he<Te;N=++he){if(D=O[N],f=p[N],D===65535){c.push(0),ie.push(0);break}if(D-(G=r[D].new)>=32768)for(c.push(0),ie.push(2*(g.length+se-N)),i=re=D;D<=f?re<=f:re>=f;i=D<=f?++re:--re)g.push(r[i].new);else c.push(G-D),ie.push(0)}for(q.writeUInt16(3),q.writeUInt16(1),q.writeUInt32(12),q.writeUInt16(4),q.writeUInt16(16+8*se+2*g.length),q.writeUInt16(0),q.writeUInt16(me),q.writeUInt16(V),q.writeUInt16(v),q.writeUInt16(Q),ne=0,C=p.length;ne<C;ne++)i=p[ne],q.writeUInt16(i);for(q.writeUInt16(0),ae=0,F=O.length;ae<F;ae++)i=O[ae],q.writeUInt16(i);for(Se=0,U=c.length;Se<U;Se++)o=c[Se],q.writeUInt16(o);for(xe=0,H=ie.length;xe<H;xe++)R=ie[xe],q.writeUInt16(R);for(Le=0,X=g.length;Le<X;Le++)S=g[Le],q.writeUInt16(S);return{charMap:r,subtable:q.data,maxGlyphID:P+1}}},n}(),Bv=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return si(e,Br),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,i,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new bg(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var i,s;return r==null&&(r="macroman"),i=bg.encode(t,r),(s=new ms).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),FC=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return si(e,Br),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),jC=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return si(e,Br),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),BC=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return si(e,Br),e.prototype.tag="post",e.prototype.parse=function(t){var r,i,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var a;for(i=t.readUInt16(),this.glyphNameIndex=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)r=t.readByte(),s.push(this.names.push(t.readString(r)));return s;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=(function(){var o,c,u;for(u=[],a=o=0,c=this.file.maxp.numGlyphs;0<=c?o<c:o>c;a=0<=c?++o:--o)u.push(t.readUInt32());return u}).call(this)}},e}(),UC=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},qC=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return si(e,Br),e.prototype.tag="name",e.prototype.parse=function(t){var r,i,s,a,o,c,u,f,p,v,g;for(t.pos=this.offset,t.readShort(),r=t.readShort(),c=t.readShort(),i=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+c+t.readShort()});for(u={},a=p=0,v=i.length;p<v;a=++p)s=i[a],t.pos=s.offset,f=t.readString(s.length),o=new UC(f,s),u[g=s.nameID]==null&&(u[g]=[]),u[s.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),VC=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return si(e,Br),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),WC=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return si(e,Br),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,i,s,a,o,c,u;for(t.pos=this.offset,this.metrics=[],r=0,c=this.file.hhea.numberOfMetrics;0<=c?r<c:r>c;r=0<=c?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var f,p;for(p=[],r=f=0;0<=s?f<s:f>s;r=0<=s?++f:--f)p.push(t.readInt16());return p}(),this.widths=(function(){var f,p,v,g;for(g=[],f=0,p=(v=this.metrics).length;f<p;f++)a=v[f],g.push(a.advance);return g}).call(this),i=this.widths[this.widths.length-1],u=[],r=o=0;0<=s?o<s:o>s;r=0<=s?++o:--o)u.push(this.widths.push(i));return u},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),Uv=[].slice,zC=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return si(e,Br),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,i,s,a,o,c,u,f,p,v;return t in this.cache?this.cache[t]:(a=this.file.loca,r=this.file.contents,i=a.indexOf(t),(s=a.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,o=(c=new ms(r.read(s))).readShort(),f=c.readShort(),v=c.readShort(),u=c.readShort(),p=c.readShort(),this.cache[t]=o===-1?new $C(c,f,v,u,p):new HC(c,o,f,v,u,p),this.cache[t]))},e.prototype.encode=function(t,r,i){var s,a,o,c,u;for(o=[],a=[],c=0,u=r.length;c<u;c++)s=t[r[c]],a.push(o.length),s&&(o=o.concat(s.encode(i)));return a.push(o.length),{table:o,offsets:a}},e}(),HC=function(){function n(e,t,r,i,s,a){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),$C=function(){function n(e,t,r,i,s){var a,o;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new ms(Uv.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),GC=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return si(e,Br),e.prototype.tag="loca",e.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=2)a.push(2*t.readUInt16());return a}).call(this):(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=4)a.push(t.readUInt32());return a}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),s=0,a=0,o=0;o<i.length;++o)if(i[o]=s,a<r.length&&r[a]==o){++a,i[o]=s;var c=this.offsets[o],u=this.offsets[o+1]-c;u>0&&(s+=u)}for(var f=new Array(4*i.length),p=0;p<i.length;++p)f[4*p+3]=255&i[p],f[4*p+2]=(65280&i[p])>>8,f[4*p+1]=(16711680&i[p])>>16,f[4*p]=(4278190080&i[p])>>24;return f},e}(),YC=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,s;for(t in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,s,a,o,c;for(i={},a=0,o=e.length;a<o;a++)i[s=e[a]]=this.font.glyf.glyphFor(s);for(s in t=[],i)(r=i[s])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(s in c=this.glyphsFor(t))r=c[s],i[s]=r;return i},n.prototype.encode=function(e,t){var r,i,s,a,o,c,u,f,p,v,g,N,S,I,b;for(i in r=Bv.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),g={0:0},b=r.charMap)g[(c=b[i]).old]=c.new;for(N in v=r.maxGlyphID,a)N in g||(g[N]=v++);return f=function(A){var P,R;for(P in R={},A)R[A[P]]=P;return R}(g),p=Object.keys(f).sort(function(A,P){return A-P}),S=function(){var A,P,R;for(R=[],A=0,P=p.length;A<P;A++)o=p[A],R.push(f[o]);return R}(),s=this.font.glyf.encode(a,S,g),u=this.font.loca.encode(s.offsets,S),I={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(I["OS/2"]=this.font.os2.raw()),this.font.directory.encode(I)},n}();Ye.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,s,a;if(Array.isArray(t))return"["+function(){var o,c,u;for(u=[],o=0,c=t.length;o<c;o++)r=t[o],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in s=["<<"],t)a=t[i],s.push("/"+i+" "+e.convert(a));return s.push(">>"),s.join(`
`)}return""+t},e}();function qv(n,e){return{generateReceipt:(r,i)=>{const s=new Ye,a=s.internal.pageSize.width;let o=20;s.setFontSize(16),s.text("Recibo de Pago",a/2,o,{align:"center"}),o+=20,s.setFontSize(12),s.text(`Empleado: ${n}`,20,o),o+=10,s.text(`CI: ${e}`,20,o),o+=10,s.text(`Período: ${IA(i)}`,20,o),o+=20,s.setFontSize(12);let c=0;Object.entries(r).forEach(([u,f])=>{f.amount>0&&(s.text(Zs[u],20,o),f.days&&s.text(`(${f.days} días)`,80,o),s.text(`$${or(f.amount)}`,a-40,o,{align:"right"}),o+=10,c+=f.amount)}),o+=10,s.setLineWidth(.5),s.line(20,o,a-20,o),o+=15,s.setFontSize(14),s.text("Total:",20,o),s.text(`$${or(c)}`,a-40,o,{align:"right"}),o+=40,s.line(20,o,100,o),o+=10,s.setFontSize(10),s.text("Firma del empleado",20,o),s.save(`recibo-${n.toLowerCase().replace(/\s+/g,"-")}-${i}.pdf`)}}}function KC({payment:n,isDeleting:e,onConfirm:t,onClose:r}){return _.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:_.jsx("div",{className:"bg-white rounded-lg max-w-md w-full",children:_.jsxs("div",{className:"p-6",children:[_.jsxs("div",{className:"flex justify-between items-center mb-4",children:[_.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Confirmar Eliminación"}),_.jsx("button",{onClick:r,disabled:e,className:"text-gray-400 hover:text-gray-500 disabled:opacity-50",children:_.jsx(Bl,{className:"w-5 h-5"})})]}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("p",{className:"text-gray-600",children:["¿Está seguro que desea eliminar el pago de ",Nl(n.date)," por $",gr(n.total),"?"]}),_.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:_.jsx("div",{className:"flex",children:_.jsx("div",{className:"ml-3",children:_.jsx("p",{className:"text-sm text-yellow-700",children:"Esta acción eliminará todos los movimientos asociados y no se puede deshacer."})})})})]}),_.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[_.jsx("button",{type:"button",onClick:r,disabled:e,className:"btn btn-secondary",children:"Cancelar"}),_.jsx("button",{type:"button",onClick:t,disabled:e,className:"btn bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",children:e?_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[_.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),_.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Eliminando..."]}):"Eliminar"})]})]})})})}function XC({employeeId:n,employeeName:e,employeeCI:t,onRefresh:r}){const[i,s]=ke.useState([]),[a,o]=ke.useState(!0),[c,u]=ke.useState(null),[f,p]=ke.useState(null),{generateReceipt:v}=qv(e,t);ke.useEffect(()=>{g()},[n]);const g=async()=>{try{const I=await Un(xt(Nt,`payments/${n}`));if(I.exists()){const b=Object.values(I.val());s(b.sort((A,P)=>new Date(P.date).getTime()-new Date(A.date).getTime()))}else s([])}catch(I){console.error("Error loading payments:",I),Lt.error("Error al cargar los pagos")}finally{o(!1)}},N=async()=>{if(f)try{u(f.id);const I={};I[`payments/${n}/${f.id}`]=null;for(const b of f.details)if(b.movementId){const A=await Un(xt(Nt,`accounts/${n}`));if(A.exists()){const R=Object.values(A.val()).find(W=>W.concept===b.concept);R&&(I[`movements/${R.id}/${b.movementId}`]=null)}}await jl(xt(Nt),I),Lt.success("Pago eliminado exitosamente"),r?await r():await g()}catch(I){console.error("Error deleting payment:",I),Lt.error("Error al eliminar el pago")}finally{u(null),p(null)}},S=I=>{const b=I.details.reduce((A,P)=>(A[P.concept]={amount:P.amount,days:P.days||void 0},A),{});v(b,I.date)};return a?_.jsx("div",{className:"card",children:_.jsx("div",{className:"card-body",children:_.jsx("div",{className:"text-center",children:"Cargando pagos..."})})}):_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"card",children:[_.jsx("div",{className:"card-header",children:_.jsx("h2",{className:"text-lg font-semibold",children:"Historial de Pagos"})}),i.length>0?_.jsx("div",{className:"overflow-x-auto",children:_.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[_.jsx("thead",{className:"bg-gray-50",children:_.jsxs("tr",{children:[_.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),_.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Conceptos"}),_.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),_.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),_.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),_.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(I=>_.jsxs("tr",{className:"hover:bg-gray-50",children:[_.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Nl(I.date)}),_.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:_.jsx("div",{className:"space-y-1",children:I.details.map((b,A)=>_.jsxs("div",{children:[Zs[b.concept],b.days&&` (${b.days} días)`,":",_.jsxs("span",{className:"ml-1 font-medium",children:["$",gr(b.amount)]})]},A))})}),_.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["$",gr(I.total)]}),_.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${I.status==="completed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:I.status==="completed"?"Completado":"Pendiente"})}),_.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("button",{onClick:()=>S(I),className:"text-gray-600 hover:text-gray-900 transition-colors",title:"Imprimir recibo",children:_.jsx(VN,{className:"w-5 h-5"})}),_.jsx("button",{onClick:()=>p(I),disabled:c===I.id,className:"text-red-600 hover:text-red-900 transition-colors disabled:opacity-50",title:"Eliminar pago",children:_.jsx(Vp,{className:`w-5 h-5 ${c===I.id?"animate-spin":""}`})})]})})]},I.id))})]})}):_.jsx("div",{className:"card-body text-center text-gray-500",children:"No hay pagos registrados"})]}),f&&_.jsx(KC,{payment:f,isDeleting:c===f.id,onConfirm:N,onClose:()=>p(null)})]})}async function JC(n,e,t,r){const i={},s=new Date().toISOString();for(const a of r){let o;switch(a.concept){case"licencia":{const c=pv(t),u=Gp(e);o=Math.round(c*u*100)/100;break}case"vacacional":o=mv(e);break;case"aguinaldo":o=gv(e);break;default:continue}i[`movements/${a.accountId}/${a.id}`]={...a,amount:o,baseSalary:e,updatedAt:s}}return i}async function QC(n,e){const t=ni(xt(Nt,"auditLogs")),r={id:t.key,action:n,data:e,timestamp:new Date().toISOString(),createdAt:new Date().toISOString()};await Hs(t,r)}async function ZC(n,e){const t=await Un(xt(Nt,"accounts/"+n));if(!t.exists())return[];const r=[],i=fs(e).getTime();for(const s of Object.values(t.val())){const a=await Un(xt(Nt,"movements/"+s.id));if(a.exists()){const o=Object.values(a.val());r.push(...o.filter(c=>new Date(c.date).getTime()>=i&&c.type==="credit"&&c.status==="pending"))}}return r}class eE{static async updateSalary(e,t,r,i){try{const s={},a=new Date().toISOString(),o=await this.getPreviousSalaries(e);if(o.length>0){const g=o[0],N=Xu(new Date(g.startDate),1);if(Ha(r,N))throw new Error("La fecha del nuevo salario debe ser posterior al último salario registrado")}const u=ni(xt(Nt,"salaryHistory/"+e)).key;if(o.length>0){const g=o[0];s["salaryHistory/"+e+"/"+g.id+"/endDate"]=$s(ev(r))}s["salaryHistory/"+e+"/"+u]={id:u,employeeId:e,amount:t,startDate:$s(fs(r)),endDate:null,createdAt:a,updatedAt:a};const f=new Date;Ha(f,r)||(s["employees/"+e+"/currentSalary"]=t);const p=await ZC(e,r),v=await JC(e,t,r,p);Object.assign(s,v),await jl(xt(Nt),s),await QC("salary_update",{employeeId:e,previousAmount:i,newAmount:t,startDate:r,affectedMovements:p.length,isFutureUpdate:Ha(f,r)})}catch(s){throw console.error("Error updating salary:",s),s}}static async getPreviousSalaries(e){const t=await Un(xt(Nt,"salaryHistory/"+e));return t.exists()?Object.values(t.val()).sort((r,i)=>new Date(i.startDate).getTime()-new Date(r.startDate).getTime()):[]}}function tE({employeeId:n,currentSalary:e,salaryHistory:t,onClose:r,onSuccess:i}){const s=[...t].sort((N,S)=>new Date(S.startDate).getTime()-new Date(N.startDate).getTime())[0],a=wl(Xu(new Date(s.startDate),1),"yyyy-MM"),[o,c]=ke.useState(e.toString()),[u,f]=ke.useState(a),[p,v]=ke.useState(!1),g=async N=>{N.preventDefault();try{v(!0);const S=Math.round(parseFloat(o));if(isNaN(S)||S<=0){Lt.error("El salario debe ser un número positivo");return}await eE.updateSalary(n,S,u,e),Lt.success("Salario actualizado exitosamente"),i()}catch(S){console.error("Error updating salary:",S),Lt.error(S instanceof Error?S.message:"Error al actualizar el salario")}finally{v(!1)}};return _.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:_.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[_.jsxs("div",{className:"flex justify-between items-center mb-4",children:[_.jsx("h2",{className:"text-xl font-semibold",children:"Actualizar Salario"}),_.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700",children:_.jsx(Bl,{className:"w-5 h-5"})})]}),_.jsxs("form",{onSubmit:g,className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mes y Año"}),_.jsx("input",{type:"month",required:!0,value:u,onChange:N=>f(N.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-gray-500 focus:ring-gray-500"}),_.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Debe ser posterior a ",wl(s.startDate,"MMMM yyyy")]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nuevo Salario Base"}),_.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[_.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:_.jsx("span",{className:"text-gray-500 sm:text-sm",children:"$"})}),_.jsx("input",{type:"number",required:!0,min:"1",step:"1",value:o,onChange:N=>c(N.target.value),className:"pl-7 block w-full rounded-md border-gray-300 shadow-sm focus:border-gray-500 focus:ring-gray-500"})]}),_.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Salario actual: $",gr(e)]})]}),_.jsxs("div",{className:"flex justify-end gap-3",children:[_.jsx("button",{type:"button",onClick:r,disabled:p,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 disabled:opacity-50",children:"Cancelar"}),_.jsx("button",{type:"submit",disabled:p,className:"px-4 py-2 text-sm font-medium text-white bg-gray-800 rounded-md hover:bg-gray-700 disabled:opacity-50",children:p?"Actualizando...":"Guardar"})]})]})]})})}class nE{static async submitPayment(e,t,r){try{const i=$s(fs(r)),a=ni(xt(Nt,`payments/${e}`)).key,o=Object.values(t).reduce((p,v)=>p+Math.round(v.amount*100)/100,0),c=await Promise.all(Object.entries(t).filter(([p,v])=>v.amount>0).map(async([p,v])=>{const g=await ea(e,p),S=ni(xt(Nt,`movements/${g.id}`)).key,I={accountId:g.id,concept:p,type:"debit",amount:Math.round(v.amount*100)/100,date:i,days:v.days?Math.round(v.days*100)/100:null,status:"completed",reference:a,order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return{concept:p,amount:v.amount,days:v.days,movementId:S,movement:I,accountId:g.id}})),u={employeeId:e,date:i,total:o,status:"completed",details:c.map(p=>({concept:p.concept,amount:Math.round(p.amount*100)/100,days:p.days?Math.round(p.days*100)/100:null,movementId:p.movementId})),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},f={[`payments/${e}/${a}`]:{...u,id:a}};return c.forEach(p=>{f[`movements/${p.accountId}/${p.movementId}`]={...p.movement,id:p.movementId}}),await jl(xt(Nt),f),!0}catch(i){throw console.error("Error submitting payment:",i),new Error("Error al procesar el pago. Por favor, intente nuevamente.")}}}function rE(n){return{submitPayment:async(t,r)=>nE.submitPayment(n,t,r)}}function iE({onClose:n}){return _.jsxs("div",{className:"flex justify-between items-center mb-6",children:[_.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Generar Pago"}),_.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-500 transition-colors",children:_.jsx(Bl,{className:"w-5 h-5"})})]})}function sE({value:n,onChange:e}){return _.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mes y Año"}),_.jsx("input",{type:"month",value:n,onChange:t=>e(t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-gray-500 focus:ring-gray-500"}),_.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Seleccione el período para el pago"})]})}function aE({concept:n,label:e,isSelected:t,balance:r,payment:i,currentSalary:s,onSelect:a,onChange:o}){const c=f=>{const p=parseFloat(f)||0,v=Math.max(0,Math.min(p,r));o(n,v,i.days)},u=f=>{if(n!=="licencia")return;const p=parseInt(f)||0,v=Math.round(s/30),g=Math.floor(r/v),N=Math.max(0,Math.min(p,g)),S=N*v;o(n,S,N)};return _.jsxs("div",{className:`p-4 rounded-lg border ${t?"border-gray-800 bg-gray-50":"border-gray-200"}`,children:[_.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 mb-4",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("button",{type:"button",onClick:a,className:`w-5 h-5 rounded-full border-2 flex items-center justify-center shrink-0 ${t?"border-gray-800 bg-gray-800":"border-gray-300"}`,children:t&&_.jsx("span",{className:"block w-2 h-2 rounded-full bg-white"})}),_.jsx("span",{className:"font-medium",children:e})]}),_.jsxs("div",{className:"text-sm text-gray-500",children:["Disponible: $",or(r)]})]}),t&&_.jsxs("div",{className:"space-y-4",children:[n==="licencia"&&_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Días"}),_.jsx("input",{type:"number",min:"0",value:i.days||0,onChange:f=>u(f.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-gray-500 focus:ring-gray-500"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monto"}),_.jsxs("div",{className:"relative rounded-md shadow-sm",children:[_.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:_.jsx("span",{className:"text-gray-500 sm:text-sm",children:"$"})}),_.jsx("input",{type:"number",min:"0",max:r,value:i.amount,onChange:f=>c(f.target.value),className:"block w-full pl-7 rounded-md border-gray-300 shadow-sm focus:border-gray-500 focus:ring-gray-500"})]})]})]})]})}function oE({currentSalary:n,employeeId:e,onPaymentsChange:t}){const[r,i]=ke.useState(null),[s,a]=ke.useState({}),[o,c]=ke.useState({licencia:{amount:0,days:0},vacacional:{amount:0},aguinaldo:{amount:0}}),[u,f]=ke.useState(!0);ke.useEffect(()=>{p()},[e]);const p=async()=>{try{f(!0);const g=["licencia","vacacional","aguinaldo"],N={};for(const S of g){const I=await ea(e,S),b=await Yp(I.id);N[S]=Kp(b)}a(N)}catch(g){console.error("Error loading balances:",g),Lt.error("Error al cargar los saldos")}finally{f(!1)}},v=(g,N,S)=>{const I={...o,[g]:{amount:N,days:S}};c(I),t(I)};return u?_.jsx("div",{className:"text-center py-4",children:"Cargando saldos..."}):_.jsx("div",{className:"space-y-4",children:Object.entries(Zs).map(([g,N])=>_.jsx(aE,{concept:g,label:N,isSelected:r===g,balance:s[g]||0,payment:o[g],currentSalary:n,onSelect:()=>i(r===g?null:g),onChange:v},g))})}function lE({payments:n}){const e=Object.values(n).reduce((t,r)=>t+r.amount,0);return _.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-6",children:[_.jsx("h3",{className:"text-lg font-medium mb-4",children:"Resumen del Pago"}),_.jsxs("div",{className:"space-y-2",children:[Object.entries(n).map(([t,r])=>r.amount>0&&_.jsxs("div",{className:"flex justify-between text-sm",children:[_.jsxs("span",{className:"text-gray-600",children:[Zs[t],r.days&&` (${r.days} días)`]}),_.jsxs("span",{className:"font-medium",children:["$",or(r.amount)]})]},t)),_.jsxs("div",{className:"flex justify-between pt-2 border-t border-gray-200",children:[_.jsx("span",{className:"font-medium",children:"Total"}),_.jsxs("span",{className:"font-medium",children:["$",or(e)]})]})]})]})}function cE({onClose:n,isSubmitting:e}){return _.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[_.jsx("button",{type:"button",onClick:n,disabled:e,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 disabled:opacity-50",children:"Cancelar"}),_.jsx("button",{type:"submit",disabled:e,className:"px-4 py-2 text-sm font-medium text-white bg-gray-800 rounded-md hover:bg-gray-700 disabled:opacity-50",children:e?"Generando...":"Generar Pago"})]})}function uE({employeeId:n,employeeName:e,employeeCI:t,currentSalary:r,onClose:i,onSuccess:s}){const[a,o]=ke.useState(new Date().toISOString().slice(0,7)),[c,u]=ke.useState({}),[f,p]=ke.useState(!1),{submitPayment:v}=rE(n),{generateReceipt:g}=qv(e,t),N=async S=>{if(S.preventDefault(),Object.values(c).reduce((b,A)=>b+A.amount,0)===0){Lt.error("Debe seleccionar al menos un concepto para pagar");return}try{p(!0),await v(c,a),g(c,a),Lt.success("Pago generado exitosamente"),await s()}catch(b){console.error("Error submitting payment:",b),Lt.error(b instanceof Error?b.message:"Error al generar el pago")}finally{p(!1)}};return _.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 overflow-y-auto",children:_.jsx("div",{className:"bg-white rounded-lg w-full max-w-2xl my-8",children:_.jsxs("form",{onSubmit:N,className:"divide-y divide-gray-200",children:[_.jsx("div",{className:"px-6 py-4",children:_.jsx(iE,{onClose:i})}),_.jsxs("div",{className:"px-6 py-4 space-y-4",children:[_.jsx(sE,{value:a,onChange:o}),_.jsx(oE,{currentSalary:r,employeeId:n,onPaymentsChange:u})]}),_.jsx("div",{className:"px-6 py-4",children:_.jsx(lE,{payments:c})}),_.jsx("div",{className:"px-6 py-4 bg-gray-50",children:_.jsx(cE,{onClose:i,isSubmitting:f})})]})})})}function hE({employeeId:n,employeeName:e,employeeCI:t,currentSalary:r,onClose:i,onSuccess:s}){return _.jsx(uE,{employeeId:n,employeeName:e,employeeCI:t,currentSalary:r,onClose:i,onSuccess:s})}function dE(){const{id:n}=E5(),e=wg(),{employee:t,salaryHistory:r,loading:i,error:s,refresh:a}=ik(n),[o,c]=ke.useState({licencia:0,vacacional:0,aguinaldo:0}),[u,f]=ke.useState(!1),[p,v]=ke.useState(!1),g=ke.useCallback(async()=>{if(n)try{const S=["licencia","vacacional","aguinaldo"],b=(await Promise.all(S.map(async A=>{const P=await ea(n,A),R=await Yp(P.id);return{concept:A,balance:Kp(R)}}))).reduce((A,{concept:P,balance:R})=>({...A,[P]:R}),{licencia:0,vacacional:0,aguinaldo:0});c(b)}catch(S){console.error("Error loading provisions:",S),Lt.error("Error al cargar las provisiones")}},[n]);ke.useEffect(()=>{if(s){e("/employees");return}t&&n&&g()},[t,n,s,e,g]);const N=ke.useCallback(async()=>{try{await Promise.all([a(),g()])}catch(S){console.error("Error updating data:",S),Lt.error("Error al actualizar los datos")}},[a,g]);return i?_.jsx("div",{className:"flex items-center justify-center min-h-screen",children:_.jsx("div",{className:"text-lg",children:"Cargando..."})}):!t||!n?null:_.jsxs("div",{className:"space-y-6",children:[_.jsx(sk,{employee:t,onUpdateSalary:()=>f(!0),onGeneratePayment:()=>v(!0)}),_.jsx(ok,{provisions:o,salary:t.currentSalary,startDate:t.startDate}),_.jsx(Kk,{employeeId:n,salaryHistory:r,employmentStartDate:t.startDate,onRefresh:N}),_.jsx(XC,{employeeId:n,employeeName:t.fullName,employeeCI:t.ci,onRefresh:N}),_.jsx($k,{employeeId:n,onMovementsUpdate:N}),u&&_.jsx(tE,{employeeId:n,currentSalary:t.currentSalary,salaryHistory:r,onClose:()=>f(!1),onSuccess:async()=>{f(!1),await N()}}),p&&_.jsx(hE,{employeeId:n,employeeName:t.fullName,employeeCI:t.ci,currentSalary:t.currentSalary,onClose:()=>v(!1),onSuccess:async()=>{v(!1),await N()}})]})}function fE(){const[n,e]=ke.useState(""),[t,r]=ke.useState(""),[i,s]=ke.useState(!1),{login:a}=qp(),o=wg(),c=async u=>{u.preventDefault(),s(!0);try{await a(n,t),o("/")}catch(f){console.error("Login error:",f),Lt.error("Error al iniciar sesión. Verifique sus credenciales.")}finally{s(!1)}};return _.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-gray-800 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:_.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white rounded-2xl shadow-xl p-8",children:[_.jsxs("div",{className:"text-center",children:[_.jsx("div",{className:"mx-auto h-16 w-16 flex items-center justify-center rounded-full bg-gradient-to-r from-gray-800 to-gray-700 shadow-lg",children:_.jsx(BN,{className:"h-8 w-8 text-white"})}),_.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Iniciar Sesión"}),_.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Ingrese sus credenciales para continuar"})]}),_.jsxs("form",{className:"mt-8 space-y-6",onSubmit:c,children:[_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),_.jsxs("div",{className:"mt-1 relative",children:[_.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:_.jsx(qN,{className:"h-5 w-5 text-gray-400"})}),_.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:n,onChange:u=>e(u.target.value),className:"appearance-none block w-full pl-11 pr-3 py-3 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent sm:text-sm",placeholder:"nombre@empresa.com"})]})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Contraseña"}),_.jsxs("div",{className:"mt-1 relative",children:[_.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:_.jsx(jN,{className:"h-5 w-5 text-gray-400"})}),_.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:t,onChange:u=>r(u.target.value),className:"appearance-none block w-full pl-11 pr-3 py-3 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent sm:text-sm",placeholder:"••••••••"})]})]})]}),_.jsx("button",{type:"submit",disabled:i,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-gradient-to-r from-gray-800 to-gray-700 hover:from-gray-700 hover:to-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50 transition-all duration-200 ease-in-out transform hover:scale-[1.02]",children:i?_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[_.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),_.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),_.jsx("span",{children:"Iniciando sesión..."})]}):"Iniciar Sesión"})]})]})})}function pE({children:n}){const{user:e,loading:t}=qp();return t?_.jsx("div",{children:"Loading..."}):e?_.jsx(_.Fragment,{children:n}):_.jsx(I5,{to:"/login"})}function mE(){return _.jsx(DN,{children:_.jsx(T5,{children:_.jsxs("div",{className:"min-h-screen bg-gray-50",children:[_.jsx(Cy,{position:"top-right"}),_.jsxs(L5,{children:[_.jsx(Wo,{path:"/login",element:_.jsx(fE,{})}),_.jsxs(Wo,{element:_.jsx(pE,{children:_.jsx(HN,{})}),children:[_.jsx(Wo,{index:!0,element:_.jsx($N,{})}),_.jsx(Wo,{path:"employees",element:_.jsx(rk,{})}),_.jsx(Wo,{path:"employees/:id",element:_.jsx(dE,{})})]})]})]})})})}const gE=Sg(document.getElementById("root"));gE.render(_.jsx(ke.StrictMode,{children:_.jsx(mE,{})}));export{wt as _};
//# sourceMappingURL=index-Bg10tXb3.js.map
